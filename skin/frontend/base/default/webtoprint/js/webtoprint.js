var WebToPrint=function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=56)}([function(e,t,i){var n,o;/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
!function(t,i){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,function(i,r){"use strict";function a(e,t,i){i=i||pe;var n,o,r=i.createElement("script");if(r.text=e,t)for(n in Te)(o=t[n]||t.getAttribute&&t.getAttribute(n))&&r.setAttribute(n,o);i.head.appendChild(r).parentNode.removeChild(r)}function s(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ve[be.call(e)]||"object":typeof e}function l(e){var t=!!e&&"length"in e&&e.length,i=s(e);return!Ce(e)&&!Ee(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function c(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function u(e,t,i){return Ce(t)?ze.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?ze.grep(e,function(e){return e===t!==i}):"string"!=typeof t?ze.grep(e,function(e){return me.call(t,e)>-1!==i}):ze.filter(t,e,i)}function d(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function p(e){var t={};return ze.each(e.match(He)||[],function(e,i){t[i]=!0}),t}function f(e){return e}function h(e){throw e}function g(e,t,i,n){var o;try{e&&Ce(o=e.promise)?o.call(e).done(t).fail(i):e&&Ce(o=e.then)?o.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}function _(){pe.removeEventListener("DOMContentLoaded",_),i.removeEventListener("load",_),ze.ready()}function m(e,t){return t.toUpperCase()}function v(e){return e.replace(Fe,"ms-").replace(qe,m)}function b(){this.expando=ze.expando+b.uid++}function y(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Qe.test(e)?JSON.parse(e):e)}function w(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Ve,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=y(i)}catch(e){}$e.set(e,t,i)}else i=void 0;return i}function k(e,t,i,n){var o,r,a=20,s=n?function(){return n.cur()}:function(){return ze.css(e,t,"")},l=s(),c=i&&i[3]||(ze.cssNumber[t]?"":"px"),u=e.nodeType&&(ze.cssNumber[t]||"px"!==c&&+l)&&Ye.exec(ze.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)ze.style(e,t,u+c),(1-r)*(1-(r=s()/l||.5))<=0&&(a=0),u/=r;u*=2,ze.style(e,t,u+c),i=i||[]}return i&&(u=+u||+l||0,o=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=o)),o}function x(e){var t,i=e.ownerDocument,n=e.nodeName,o=nt[n];return o||(t=i.body.appendChild(i.createElement(n)),o=ze.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),nt[n]=o,o)}function C(e,t){for(var i,n,o=[],r=0,a=e.length;r<a;r++)n=e[r],n.style&&(i=n.style.display,t?("none"===i&&(o[r]=Ue.get(n,"display")||null,o[r]||(n.style.display="")),""===n.style.display&&tt(n)&&(o[r]=x(n))):"none"!==i&&(o[r]="none",Ue.set(n,"display",i)));for(r=0;r<a;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}function E(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&c(e,t)?ze.merge([e],i):i}function T(e,t){for(var i=0,n=e.length;i<n;i++)Ue.set(e[i],"globalEval",!t||Ue.get(t[i],"globalEval"))}function z(e,t,i,n,o){for(var r,a,l,c,u,d,p=t.createDocumentFragment(),f=[],h=0,g=e.length;h<g;h++)if((r=e[h])||0===r)if("object"===s(r))ze.merge(f,r.nodeType?[r]:r);else if(lt.test(r)){for(a=a||p.appendChild(t.createElement("div")),l=(rt.exec(r)||["",""])[1].toLowerCase(),c=st[l]||st._default,a.innerHTML=c[1]+ze.htmlPrefilter(r)+c[2],d=c[0];d--;)a=a.lastChild;ze.merge(f,a.childNodes),a=p.firstChild,a.textContent=""}else f.push(t.createTextNode(r));for(p.textContent="",h=0;r=f[h++];)if(n&&ze.inArray(r,n)>-1)o&&o.push(r);else if(u=Je(r),a=E(p.appendChild(r),"script"),u&&T(a),i)for(d=0;r=a[d++];)at.test(r.type||"")&&i.push(r);return p}function O(){return!0}function P(){return!1}function j(e,t){return e===S()==("focus"===t)}function S(){try{return pe.activeElement}catch(e){}}function A(e,t,i,n,o,r){var a,s;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(s in t)A(e,s,i,n,t[s],r);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=P;else if(!o)return e;return 1===r&&(a=o,o=function(e){return ze().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=ze.guid++)),e.each(function(){ze.event.add(this,t,o,n,i)})}function D(e,t,i){if(!i)return void(void 0===Ue.get(e,t)&&ze.event.add(e,t,O));Ue.set(e,t,!1),ze.event.add(e,t,{namespace:!1,handler:function(e){var n,o,r=Ue.get(this,t);if(1&e.isTrigger&&this[t]){if(r.length)(ze.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=he.call(arguments),Ue.set(this,t,r),n=i(this,t),this[t](),o=Ue.get(this,t),r!==o||n?Ue.set(this,t,!1):o={},r!==o)return e.stopImmediatePropagation(),e.preventDefault(),o.value}else r.length&&(Ue.set(this,t,{value:ze.event.trigger(ze.extend(r[0],ze.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})}function M(e,t){return c(e,"table")&&c(11!==t.nodeType?t:t.firstChild,"tr")?ze(e).children("tbody")[0]||e:e}function I(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function N(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function R(e,t){var i,n,o,r,a,s,l,c;if(1===t.nodeType){if(Ue.hasData(e)&&(r=Ue.access(e),a=Ue.set(t,r),c=r.events)){delete a.handle,a.events={};for(o in c)for(i=0,n=c[o].length;i<n;i++)ze.event.add(t,o,c[o][i])}$e.hasData(e)&&(s=$e.access(e),l=ze.extend({},s),$e.set(t,l))}}function H(e,t){var i=t.nodeName.toLowerCase();"input"===i&&ot.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function L(e,t,i,n){t=ge.apply([],t);var o,r,s,l,c,u,d=0,p=e.length,f=p-1,h=t[0],g=Ce(h);if(g||p>1&&"string"==typeof h&&!xe.checkClone&&ht.test(h))return e.each(function(o){var r=e.eq(o);g&&(t[0]=h.call(this,o,r.html())),L(r,t,i,n)});if(p&&(o=z(t,e[0].ownerDocument,!1,e,n),r=o.firstChild,1===o.childNodes.length&&(o=r),r||n)){for(s=ze.map(E(o,"script"),I),l=s.length;d<p;d++)c=o,d!==f&&(c=ze.clone(c,!0,!0),l&&ze.merge(s,E(c,"script"))),i.call(e[d],c,d);if(l)for(u=s[s.length-1].ownerDocument,ze.map(s,N),d=0;d<l;d++)c=s[d],at.test(c.type||"")&&!Ue.access(c,"globalEval")&&ze.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?ze._evalUrl&&!c.noModule&&ze._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")}):a(c.textContent.replace(gt,""),c,u))}return e}function B(e,t,i){for(var n,o=t?ze.filter(t,e):e,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||ze.cleanData(E(n)),n.parentNode&&(i&&Je(n)&&T(E(n,"script")),n.parentNode.removeChild(n));return e}function W(e,t,i){var n,o,r,a,s=e.style;return i=i||mt(e),i&&(a=i.getPropertyValue(t)||i[t],""!==a||Je(e)||(a=ze.style(e,t)),!xe.pixelBoxStyles()&&_t.test(a)&&vt.test(t)&&(n=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function F(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function q(e){for(var t=e[0].toUpperCase()+e.slice(1),i=bt.length;i--;)if((e=bt[i]+t)in yt)return e}function G(e){var t=ze.cssProps[e]||wt[e];return t||(e in yt?e:wt[e]=q(e)||e)}function U(e,t,i){var n=Ye.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function $(e,t,i,n,o,r){var a="width"===t?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=ze.css(e,i+Ke[a],!0,o)),n?("content"===i&&(l-=ze.css(e,"padding"+Ke[a],!0,o)),"margin"!==i&&(l-=ze.css(e,"border"+Ke[a]+"Width",!0,o))):(l+=ze.css(e,"padding"+Ke[a],!0,o),"padding"!==i?l+=ze.css(e,"border"+Ke[a]+"Width",!0,o):s+=ze.css(e,"border"+Ke[a]+"Width",!0,o));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-s-.5))||0),l}function Q(e,t,i){var n=mt(e),o=!xe.boxSizingReliable()||i,r=o&&"border-box"===ze.css(e,"boxSizing",!1,n),a=r,s=W(e,t,n),l="offset"+t[0].toUpperCase()+t.slice(1);if(_t.test(s)){if(!i)return s;s="auto"}return(!xe.boxSizingReliable()&&r||"auto"===s||!parseFloat(s)&&"inline"===ze.css(e,"display",!1,n))&&e.getClientRects().length&&(r="border-box"===ze.css(e,"boxSizing",!1,n),(a=l in e)&&(s=e[l])),(s=parseFloat(s)||0)+$(e,t,i||(r?"border":"content"),a,n,s)+"px"}function V(e,t,i,n,o){return new V.prototype.init(e,t,i,n,o)}function X(){zt&&(!1===pe.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(X):i.setTimeout(X,ze.fx.interval),ze.fx.tick())}function Y(){return i.setTimeout(function(){Tt=void 0}),Tt=Date.now()}function K(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)i=Ke[n],o["margin"+i]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function Z(e,t,i){for(var n,o=(te.tweeners[t]||[]).concat(te.tweeners["*"]),r=0,a=o.length;r<a;r++)if(n=o[r].call(i,t,e))return n}function J(e,t,i){var n,o,r,a,s,l,c,u,d="width"in t||"height"in t,p=this,f={},h=e.style,g=e.nodeType&&tt(e),_=Ue.get(e,"fxshow");i.queue||(a=ze._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ze.queue(e,"fx").length||a.empty.fire()})}));for(n in t)if(o=t[n],Ot.test(o)){if(delete t[n],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!_||void 0===_[n])continue;g=!0}f[n]=_&&_[n]||ze.style(e,n)}if((l=!ze.isEmptyObject(t))||!ze.isEmptyObject(f)){d&&1===e.nodeType&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],c=_&&_.display,null==c&&(c=Ue.get(e,"display")),u=ze.css(e,"display"),"none"===u&&(c?u=c:(C([e],!0),c=e.style.display||c,u=ze.css(e,"display"),C([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===ze.css(e,"float")&&(l||(p.done(function(){h.display=c}),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block")),i.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]})),l=!1;for(n in f)l||(_?"hidden"in _&&(g=_.hidden):_=Ue.access(e,"fxshow",{display:c}),r&&(_.hidden=!g),g&&C([e],!0),p.done(function(){g||C([e]),Ue.remove(e,"fxshow");for(n in f)ze.style(e,n,f[n])})),l=Z(g?_[n]:0,n,p),n in _||(_[n]=l.start,g&&(l.end=l.start,l.start=0))}}function ee(e,t){var i,n,o,r,a;for(i in e)if(n=v(i),o=t[n],r=e[i],Array.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),(a=ze.cssHooks[n])&&"expand"in a){r=a.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=o)}else t[n]=o}function te(e,t,i){var n,o,r=0,a=te.prefilters.length,s=ze.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Tt||Y(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,r=1-n,a=0,l=c.tweens.length;a<l;a++)c.tweens[a].run(r);return s.notifyWith(e,[c,r,i]),r<1&&l?i:(l||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:ze.extend({},t),opts:ze.extend(!0,{specialEasing:{},easing:ze.easing._default},i),originalProperties:t,originalOptions:i,startTime:Tt||Y(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ze.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(ee(u,c.opts.specialEasing);r<a;r++)if(n=te.prefilters[r].call(c,e,u,c.opts))return Ce(n.stop)&&(ze._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return ze.map(u,Z,c),Ce(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),ze.fx.timer(ze.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}function ie(e){return(e.match(He)||[]).join(" ")}function ne(e){return e.getAttribute&&e.getAttribute("class")||""}function oe(e){return Array.isArray(e)?e:"string"==typeof e?e.match(He)||[]:[]}function re(e,t,i,n){var o;if(Array.isArray(t))ze.each(t,function(t,o){i||Bt.test(e)?n(e,o):re(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,i,n)});else if(i||"object"!==s(t))n(e,t);else for(o in t)re(e+"["+o+"]",t[o],i,n)}function ae(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,r=t.toLowerCase().match(He)||[];if(Ce(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function se(e,t,i,n){function o(s){var l;return r[s]=!0,ze.each(e[s]||[],function(e,s){var c=s(t,i,n);return"string"!=typeof c||a||r[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var r={},a=e===Zt;return o(t.dataTypes[0])||!r["*"]&&o("*")}function le(e,t){var i,n,o=ze.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&ze.extend(!0,e,n),e}function ce(e,t,i){for(var n,o,r,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==l[0]&&l.unshift(r),i[r]}function ue(e,t,i,n){var o,r,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(r=u.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=c[l+" "+r]||c["* "+r]))for(o in c)if(s=o.split(" "),s[1]===r&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(r=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}var de=[],pe=i.document,fe=Object.getPrototypeOf,he=de.slice,ge=de.concat,_e=de.push,me=de.indexOf,ve={},be=ve.toString,ye=ve.hasOwnProperty,we=ye.toString,ke=we.call(Object),xe={},Ce=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},Ee=function(e){return null!=e&&e===e.window},Te={type:!0,src:!0,nonce:!0,noModule:!0},ze=function(e,t){return new ze.fn.init(e,t)},Oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;ze.fn=ze.prototype={jquery:"3.4.1",constructor:ze,length:0,toArray:function(){return he.call(this)},get:function(e){return null==e?he.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ze.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ze.each(this,e)},map:function(e){return this.pushStack(ze.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(he.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:_e,sort:de.sort,splice:de.splice},ze.extend=ze.fn.extend=function(){var e,t,i,n,o,r,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||Ce(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=e[t],"__proto__"!==t&&a!==n&&(c&&n&&(ze.isPlainObject(n)||(o=Array.isArray(n)))?(i=a[t],r=o&&!Array.isArray(i)?[]:o||ze.isPlainObject(i)?i:{},o=!1,a[t]=ze.extend(c,r,n)):void 0!==n&&(a[t]=n));return a},ze.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==be.call(e))&&(!(t=fe(e))||"function"==typeof(i=ye.call(t,"constructor")&&t.constructor)&&we.call(i)===ke)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){a(e,{nonce:t&&t.nonce})},each:function(e,t){var i,n=0;if(l(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Oe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(l(Object(e))?ze.merge(i,"string"==typeof e?[e]:e):_e.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:me.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,r=e.length,a=!i;o<r;o++)!t(e[o],o)!==a&&n.push(e[o]);return n},map:function(e,t,i){var n,o,r=0,a=[];if(l(e))for(n=e.length;r<n;r++)null!=(o=t(e[r],r,i))&&a.push(o);else for(r in e)null!=(o=t(e[r],r,i))&&a.push(o);return ge.apply([],a)},guid:1,support:xe}),"function"==typeof Symbol&&(ze.fn[Symbol.iterator]=de[Symbol.iterator]),ze.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ve["[object "+t+"]"]=t.toLowerCase()});var Pe=/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(e){function t(e,t,i,n){var o,r,a,s,l,u,p,f=t&&t.ownerDocument,h=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return i;if(!n&&((t?t.ownerDocument||t:L)!==S&&j(t),t=t||S,D)){if(11!==h&&(l=me.exec(e)))if(o=l[1]){if(9===h){if(!(a=t.getElementById(o)))return i;if(a.id===o)return i.push(a),i}else if(f&&(a=f.getElementById(o))&&R(t,a)&&a.id===o)return i.push(a),i}else{if(l[2])return K.apply(i,t.getElementsByTagName(e)),i;if((o=l[3])&&y.getElementsByClassName&&t.getElementsByClassName)return K.apply(i,t.getElementsByClassName(o)),i}if(y.qsa&&!U[e+" "]&&(!M||!M.test(e))&&(1!==h||"object"!==t.nodeName.toLowerCase())){if(p=e,f=t,1===h&&ce.test(e)){for((s=t.getAttribute("id"))?s=s.replace(we,ke):t.setAttribute("id",s=H),u=C(e),r=u.length;r--;)u[r]="#"+s+" "+d(u[r]);p=u.join(","),f=ve.test(e)&&c(t.parentNode)||t}try{return K.apply(i,f.querySelectorAll(p)),i}catch(t){U(e,!0)}finally{s===H&&t.removeAttribute("id")}}}return T(e.replace(ae,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>w.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[H]=!0,e}function o(e){var t=S.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var i=e.split("|"),n=i.length;n--;)w.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Ce(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return n(function(t){return t=+t,n(function(i,n){for(var o,r=e([],i.length,t),a=r.length;a--;)i[o=r[a]]&&(i[o]=!(n[o]=i[o]))})})}function c(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function d(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,o=t.next,r=o||n,a=i&&"parentNode"===r,s=W++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,o);return!1}:function(t,i,l){var c,u,d,p=[B,s];if(l){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(d=t[H]||(t[H]={}),u=d[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=u[r])&&c[0]===B&&c[1]===s)return p[2]=c[2];if(u[r]=p,p[2]=e(t,i,l))return!0}return!1}}function f(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function h(e,i,n){for(var o=0,r=i.length;o<r;o++)t(e,i[o],n);return n}function g(e,t,i,n,o){for(var r,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(r=e[s])&&(i&&!i(r,n,o)||(a.push(r),c&&t.push(s)));return a}function _(e,t,i,o,r,a){return o&&!o[H]&&(o=_(o)),r&&!r[H]&&(r=_(r,a)),n(function(n,a,s,l){var c,u,d,p=[],f=[],_=a.length,m=n||h(t||"*",s.nodeType?[s]:s,[]),v=!e||!n&&t?m:g(m,p,e,s,l),b=i?r||(n?e:_||o)?[]:a:v;if(i&&i(v,b,s,l),o)for(c=g(b,f),o(c,[],s,l),u=c.length;u--;)(d=c[u])&&(b[f[u]]=!(v[f[u]]=d));if(n){if(r||e){if(r){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(v[u]=d);r(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=r?J(n,d):p[u])>-1&&(n[c]=!(a[c]=d))}}else b=g(b===a?b.splice(_,b.length):b),r?r(null,a,b,l):K.apply(a,b)})}function m(e){for(var t,i,n,o=e.length,r=w.relative[e[0].type],a=r||w.relative[" "],s=r?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return J(t,e)>-1},a,!0),u=[function(e,i,n){var o=!r&&(n||i!==z)||((t=i).nodeType?l(e,i,n):c(e,i,n));return t=null,o}];s<o;s++)if(i=w.relative[e[s].type])u=[p(f(u),i)];else{if(i=w.filter[e[s].type].apply(null,e[s].matches),i[H]){for(n=++s;n<o&&!w.relative[e[n].type];n++);return _(s>1&&f(u),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ae,"$1"),i,s<n&&m(e.slice(s,n)),n<o&&m(e=e.slice(n)),n<o&&d(e))}u.push(i)}return f(u)}function v(e,i){var o=i.length>0,r=e.length>0,a=function(n,a,s,l,c){var u,d,p,f=0,h="0",_=n&&[],m=[],v=z,b=n||r&&w.find.TAG("*",c),y=B+=null==v?1:Math.random()||.1,k=b.length;for(c&&(z=a===S||a||c);h!==k&&null!=(u=b[h]);h++){if(r&&u){for(d=0,a||u.ownerDocument===S||(j(u),s=!D);p=e[d++];)if(p(u,a||S,s)){l.push(u);break}c&&(B=y)}o&&((u=!p&&u)&&f--,n&&_.push(u))}if(f+=h,o&&h!==f){for(d=0;p=i[d++];)p(_,m,a,s);if(n){if(f>0)for(;h--;)_[h]||m[h]||(m[h]=X.call(l));m=g(m)}K.apply(l,m),c&&!n&&m.length>0&&f+i.length>1&&t.uniqueSort(l)}return c&&(B=y,z=v),_};return o?n(a):a}var b,y,w,k,x,C,E,T,z,O,P,j,S,A,D,M,I,N,R,H="sizzle"+1*new Date,L=e.document,B=0,W=0,F=i(),q=i(),G=i(),U=i(),$=function(e,t){return e===t&&(P=!0),0},Q={}.hasOwnProperty,V=[],X=V.pop,Y=V.push,K=V.push,Z=V.slice,J=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+te+"*("+ie+")(?:"+te+"*([*^$|!~]?=)"+te+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+te+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",re=new RegExp(te+"+","g"),ae=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),se=new RegExp("^"+te+"*,"+te+"*"),le=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),ce=new RegExp(te+"|>"),ue=new RegExp(oe),de=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},fe=/HTML$/i,he=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,_e=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=new RegExp("\\\\([\\da-f]{1,6}"+te+"?|("+te+")|.)","ig"),ye=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},we=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ke=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},xe=function(){j()},Ce=p(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{K.apply(V=Z.call(L.childNodes),L.childNodes),V[L.childNodes.length].nodeType}catch(e){K={apply:V.length?function(e,t){Y.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}y=t.support={},x=t.isXML=function(e){var t=e.namespaceURI,i=(e.ownerDocument||e).documentElement;return!fe.test(t||i&&i.nodeName||"HTML")},j=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:L;return n!==S&&9===n.nodeType&&n.documentElement?(S=n,A=S.documentElement,D=!x(S),L!==S&&(i=S.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",xe,!1):i.attachEvent&&i.attachEvent("onunload",xe)),y.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=o(function(e){return e.appendChild(S.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=_e.test(S.getElementsByClassName),y.getById=o(function(e){return A.appendChild(e).id=H,!S.getElementsByName||!S.getElementsByName(H).length}),y.getById?(w.filter.ID=function(e){var t=e.replace(be,ye);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&D){var i=t.getElementById(e);return i?[i]:[]}}):(w.filter.ID=function(e){var t=e.replace(be,ye);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&D){var i,n,o,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(o=t.getElementsByName(e),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),w.find.TAG=y.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},w.find.CLASS=y.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&D)return t.getElementsByClassName(e)},I=[],M=[],(y.qsa=_e.test(S.querySelectorAll))&&(o(function(e){A.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+te+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+te+"*(?:value|"+ee+")"),e.querySelectorAll("[id~="+H+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||M.push(".#.+[+~]")}),o(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=S.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+te+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),A.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(y.matchesSelector=_e.test(N=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&o(function(e){y.disconnectedMatch=N.call(e,"*"),N.call(e,"[s!='']:x"),I.push("!=",oe)}),M=M.length&&new RegExp(M.join("|")),I=I.length&&new RegExp(I.join("|")),t=_e.test(A.compareDocumentPosition),R=t||_e.test(A.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=t?function(e,t){if(e===t)return P=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!y.sortDetached&&t.compareDocumentPosition(e)===i?e===S||e.ownerDocument===L&&R(L,e)?-1:t===S||t.ownerDocument===L&&R(L,t)?1:O?J(O,e)-J(O,t):0:4&i?-1:1)}:function(e,t){if(e===t)return P=!0,0;var i,n=0,o=e.parentNode,r=t.parentNode,s=[e],l=[t];if(!o||!r)return e===S?-1:t===S?1:o?-1:r?1:O?J(O,e)-J(O,t):0;if(o===r)return a(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;s[n]===l[n];)n++;return n?a(s[n],l[n]):s[n]===L?-1:l[n]===L?1:0},S):S},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==S&&j(e),y.matchesSelector&&D&&!U[i+" "]&&(!I||!I.test(i))&&(!M||!M.test(i)))try{var n=N.call(e,i);if(n||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){U(i,!0)}return t(i,S,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==S&&j(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==S&&j(e);var i=w.attrHandle[t.toLowerCase()],n=i&&Q.call(w.attrHandle,t.toLowerCase())?i(e,t,!D):void 0;return void 0!==n?n:y.attributes||!D?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(we,ke)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,o=0;if(P=!y.detectDuplicates,O=!y.sortStable&&e.slice(0),e.sort($),P){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return O=null,e},k=t.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=k(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=k(t);return i},w=t.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(be,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ue.test(i)&&(t=C(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+te+")"+e+"("+te+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(o){var r=t.attr(o,e);return null==r?"!="===i:!i||(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r.replace(re," ")+" ").indexOf(n)>-1:"|="===i&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var c,u,d,p,f,h,g=r!==a?"nextSibling":"previousSibling",_=t.parentNode,m=s&&t.nodeName.toLowerCase(),v=!l&&!s,b=!1;if(_){if(r){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===m:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?_.firstChild:_.lastChild],a&&v){for(p=_,d=p[H]||(p[H]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),c=u[e]||[],f=c[0]===B&&c[1],b=f&&c[2],p=f&&_.childNodes[f];p=++f&&p&&p[g]||(b=f=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){u[e]=[B,f,b];break}}else if(v&&(p=t,d=p[H]||(p[H]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),c=u[e]||[],f=c[0]===B&&c[1],b=f),!1===b)for(;(p=++f&&p&&p[g]||(b=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==m:1!==p.nodeType)||!++b||(v&&(d=p[H]||(p[H]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),u[e]=[B,b]),p!==t)););return(b-=o)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,i){var o,r=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[H]?r(i):r.length>1?(o=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,o=r(e,i),a=o.length;a--;)n=J(e,o[a]),e[n]=!(t[n]=o[a])}):function(e){return r(e,0,o)}):r}},pseudos:{not:n(function(e){var t=[],i=[],o=E(e.replace(ae,"$1"));return o[H]?n(function(e,t,i,n){for(var r,a=o(e,null,n,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,n,r){return t[0]=e,o(t,null,r,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(be,ye),function(t){return(t.textContent||k(t)).indexOf(e)>-1}}),lang:n(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,ye).toLowerCase(),function(t){var i;do{if(i=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===A},focus:function(e){return e===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[i<0?i+t:i]}),even:l(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:l(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:l(function(e,t,i){for(var n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e}),gt:l(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(b);return u.prototype=w.filters=w.pseudos,w.setFilters=new u,C=t.tokenize=function(e,i){var n,o,r,a,s,l,c,u=q[e+" "];if(u)return i?0:u.slice(0);for(s=e,l=[],c=w.preFilter;s;){n&&!(o=se.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),n=!1,(o=le.exec(s))&&(n=o.shift(),r.push({value:n,type:o[0].replace(ae," ")}),s=s.slice(n.length));for(a in w.filter)!(o=pe[a].exec(s))||c[a]&&!(o=c[a](o))||(n=o.shift(),r.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return i?s.length:s?t.error(e):q(e,l).slice(0)},E=t.compile=function(e,t){var i,n=[],o=[],r=G[e+" "];if(!r){for(t||(t=C(e)),i=t.length;i--;)r=m(t[i]),r[H]?n.push(r):o.push(r);r=G(e,v(o,n)),r.selector=e}return r},T=t.select=function(e,t,i,n){var o,r,a,s,l,u="function"==typeof e&&e,p=!n&&C(e=u.selector||e);if(i=i||[],1===p.length){if(r=p[0]=p[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&9===t.nodeType&&D&&w.relative[r[1].type]){if(!(t=(w.find.ID(a.matches[0].replace(be,ye),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=pe.needsContext.test(e)?0:r.length;o--&&(a=r[o],!w.relative[s=a.type]);)if((l=w.find[s])&&(n=l(a.matches[0].replace(be,ye),ve.test(r[0].type)&&c(t.parentNode)||t))){if(r.splice(o,1),!(e=n.length&&d(r)))return K.apply(i,n),i;break}}return(u||E(e,p))(n,t,!D,i,!t||ve.test(e)&&c(t.parentNode)||t),i},y.sortStable=H.split("").sort($).join("")===H,y.detectDuplicates=!!P,j(),y.sortDetached=o(function(e){return 1&e.compareDocumentPosition(S.createElement("fieldset"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(ee,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(i);ze.find=Pe,ze.expr=Pe.selectors,ze.expr[":"]=ze.expr.pseudos,ze.uniqueSort=ze.unique=Pe.uniqueSort,ze.text=Pe.getText,ze.isXMLDoc=Pe.isXML,ze.contains=Pe.contains,ze.escapeSelector=Pe.escape;var je=function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ze(e).is(i))break;n.push(e)}return n},Se=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},Ae=ze.expr.match.needsContext,De=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;ze.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ze.find.matchesSelector(n,e)?[n]:[]:ze.find.matches(e,ze.grep(t,function(e){return 1===e.nodeType}))},ze.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(ze(e).filter(function(){for(t=0;t<n;t++)if(ze.contains(o[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)ze.find(e,o[t],i);return n>1?ze.uniqueSort(i):i},filter:function(e){return this.pushStack(u(this,e||[],!1))},not:function(e){return this.pushStack(u(this,e||[],!0))},is:function(e){return!!u(this,"string"==typeof e&&Ae.test(e)?ze(e):e||[],!1).length}});var Me,Ie=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ze.fn.init=function(e,t,i){var n,o;if(!e)return this;if(i=i||Me,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Ie.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ze?t[0]:t,ze.merge(this,ze.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:pe,!0)),De.test(n[1])&&ze.isPlainObject(t))for(n in t)Ce(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return o=pe.getElementById(n[2]),o&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):Ce(e)?void 0!==i.ready?i.ready(e):e(ze):ze.makeArray(e,this)}).prototype=ze.fn,Me=ze(pe);var Ne=/^(?:parents|prev(?:Until|All))/,Re={children:!0,contents:!0,next:!0,prev:!0};ze.fn.extend({has:function(e){var t=ze(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(ze.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,o=this.length,r=[],a="string"!=typeof e&&ze(e);if(!Ae.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&ze.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?ze.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?me.call(ze(e),this[0]):me.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ze.uniqueSort(ze.merge(this.get(),ze(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ze.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return je(e,"parentNode")},parentsUntil:function(e,t,i){return je(e,"parentNode",i)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return je(e,"nextSibling")},prevAll:function(e){return je(e,"previousSibling")},nextUntil:function(e,t,i){return je(e,"nextSibling",i)},prevUntil:function(e,t,i){return je(e,"previousSibling",i)},siblings:function(e){return Se((e.parentNode||{}).firstChild,e)},children:function(e){return Se(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(c(e,"template")&&(e=e.content||e),ze.merge([],e.childNodes))}},function(e,t){ze.fn[e]=function(i,n){var o=ze.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=ze.filter(n,o)),this.length>1&&(Re[e]||ze.uniqueSort(o),Ne.test(e)&&o.reverse()),this.pushStack(o)}});var He=/[^\x20\t\r\n\f]+/g;ze.Callbacks=function(e){e="string"==typeof e?p(e):ze.extend({},e);var t,i,n,o,r=[],a=[],l=-1,c=function(){for(o=o||e.once,n=t=!0;a.length;l=-1)for(i=a.shift();++l<r.length;)!1===r[l].apply(i[0],i[1])&&e.stopOnFalse&&(l=r.length,i=!1);e.memory||(i=!1),t=!1,o&&(r=i?[]:"")},u={add:function(){return r&&(i&&!t&&(l=r.length-1,a.push(i)),function t(i){ze.each(i,function(i,n){Ce(n)?e.unique&&u.has(n)||r.push(n):n&&n.length&&"string"!==s(n)&&t(n)})}(arguments),i&&!t&&c()),this},remove:function(){return ze.each(arguments,function(e,t){for(var i;(i=ze.inArray(t,r,i))>-1;)r.splice(i,1),i<=l&&l--}),this},has:function(e){return e?ze.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=a=[],r=i="",this},disabled:function(){return!r},lock:function(){return o=a=[],i||t||(r=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=i||[],i=[e,i.slice?i.slice():i],a.push(i),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},ze.extend({Deferred:function(e){var t=[["notify","progress",ze.Callbacks("memory"),ze.Callbacks("memory"),2],["resolve","done",ze.Callbacks("once memory"),ze.Callbacks("once memory"),0,"resolved"],["reject","fail",ze.Callbacks("once memory"),ze.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return ze.Deferred(function(i){ze.each(t,function(t,n){var o=Ce(e[n[4]])&&e[n[4]];r[n[1]](function(){var e=o&&o.apply(this,arguments);e&&Ce(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(e,n,o){function r(e,t,n,o){return function(){var s=this,l=arguments,c=function(){var i,c;if(!(e<a)){if((i=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,Ce(c)?o?c.call(i,r(a,t,f,o),r(a,t,h,o)):(a++,c.call(i,r(a,t,f,o),r(a,t,h,o),r(a,t,f,t.notifyWith))):(n!==f&&(s=void 0,l=[i]),(o||t.resolveWith)(s,l))}},u=o?c:function(){try{c()}catch(i){ze.Deferred.exceptionHook&&ze.Deferred.exceptionHook(i,u.stackTrace),e+1>=a&&(n!==h&&(s=void 0,l=[i]),t.rejectWith(s,l))}};e?u():(ze.Deferred.getStackHook&&(u.stackTrace=ze.Deferred.getStackHook()),i.setTimeout(u))}}var a=0;return ze.Deferred(function(i){t[0][3].add(r(0,i,Ce(o)?o:f,i.notifyWith)),t[1][3].add(r(0,i,Ce(e)?e:f)),t[2][3].add(r(0,i,Ce(n)?n:h))}).promise()},promise:function(e){return null!=e?ze.extend(e,o):o}},r={};return ze.each(t,function(e,i){var a=i[2],s=i[5];o[i[1]]=a.add,s&&a.add(function(){n=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=a.fireWith}),o.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),o=he.call(arguments),r=ze.Deferred(),a=function(e){return function(i){n[e]=this,o[e]=arguments.length>1?he.call(arguments):i,--t||r.resolveWith(n,o)}};if(t<=1&&(g(e,r.done(a(i)).resolve,r.reject,!t),"pending"===r.state()||Ce(o[i]&&o[i].then)))return r.then();for(;i--;)g(o[i],a(i),r.reject);return r.promise()}});var Le=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ze.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&Le.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ze.readyException=function(e){i.setTimeout(function(){throw e})};var Be=ze.Deferred();ze.fn.ready=function(e){return Be.then(e).catch(function(e){ze.readyException(e)}),this},ze.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ze.readyWait:ze.isReady)||(ze.isReady=!0,!0!==e&&--ze.readyWait>0||Be.resolveWith(pe,[ze]))}}),ze.ready.then=Be.then,"complete"===pe.readyState||"loading"!==pe.readyState&&!pe.documentElement.doScroll?i.setTimeout(ze.ready):(pe.addEventListener("DOMContentLoaded",_),i.addEventListener("load",_));var We=function(e,t,i,n,o,r,a){var l=0,c=e.length,u=null==i;if("object"===s(i)){o=!0;for(l in i)We(e,t,l,i[l],!0,r,a)}else if(void 0!==n&&(o=!0,Ce(n)||(a=!0),u&&(a?(t.call(e,n),t=null):(u=t,t=function(e,t,i){return u.call(ze(e),i)})),t))for(;l<c;l++)t(e[l],i,a?n:n.call(e[l],l,t(e[l],i)));return o?e:u?t.call(e):c?t(e[0],i):r},Fe=/^-ms-/,qe=/-([a-z])/g,Ge=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};b.uid=1,b.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Ge(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[v(t)]=i;else for(n in t)o[v(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][v(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(v):(t=v(t),t=t in n?[t]:t.match(He)||[]),i=t.length;for(;i--;)delete n[t[i]]}(void 0===t||ze.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ze.isEmptyObject(t)}};var Ue=new b,$e=new b,Qe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ve=/[A-Z]/g;ze.extend({hasData:function(e){return $e.hasData(e)||Ue.hasData(e)},data:function(e,t,i){return $e.access(e,t,i)},removeData:function(e,t){$e.remove(e,t)},_data:function(e,t,i){return Ue.access(e,t,i)},_removeData:function(e,t){Ue.remove(e,t)}}),ze.fn.extend({data:function(e,t){var i,n,o,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(o=$e.get(r),1===r.nodeType&&!Ue.get(r,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=v(n.slice(5)),w(r,n,o[n])));Ue.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){$e.set(this,e)}):We(this,function(t){var i;if(r&&void 0===t){if(void 0!==(i=$e.get(r,e)))return i;if(void 0!==(i=w(r,e)))return i}else this.each(function(){$e.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){$e.remove(this,e)})}}),ze.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=Ue.get(e,t),i&&(!n||Array.isArray(i)?n=Ue.access(e,t,ze.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=ze.queue(e,t),n=i.length,o=i.shift(),r=ze._queueHooks(e,t),a=function(){ze.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,a,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Ue.get(e,i)||Ue.access(e,i,{empty:ze.Callbacks("once memory").add(function(){Ue.remove(e,[t+"queue",i])})})}}),ze.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?ze.queue(this[0],e):void 0===t?this:this.each(function(){var i=ze.queue(this,e,t);ze._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&ze.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ze.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=ze.Deferred(),r=this,a=this.length,s=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=Ue.get(r[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),o.promise(t)}});var Xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ye=new RegExp("^(?:([+-])=|)("+Xe+")([a-z%]*)$","i"),Ke=["Top","Right","Bottom","Left"],Ze=pe.documentElement,Je=function(e){return ze.contains(e.ownerDocument,e)},et={composed:!0};Ze.getRootNode&&(Je=function(e){return ze.contains(e.ownerDocument,e)||e.getRootNode(et)===e.ownerDocument});var tt=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&Je(e)&&"none"===ze.css(e,"display")},it=function(e,t,i,n){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=i.apply(e,n||[]);for(r in t)e.style[r]=a[r];return o},nt={};ze.fn.extend({show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){tt(this)?ze(this).show():ze(this).hide()})}});var ot=/^(?:checkbox|radio)$/i,rt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,at=/^$|^module$|\/(?:java|ecma)script/i,st={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};st.optgroup=st.option,st.tbody=st.tfoot=st.colgroup=st.caption=st.thead,st.th=st.td;var lt=/<|&#?\w+;/;!function(){var e=pe.createDocumentFragment(),t=e.appendChild(pe.createElement("div")),i=pe.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),xe.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",xe.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var ct=/^key/,ut=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,dt=/^([^.]*)(?:\.(.+)|)/;ze.event={global:{},add:function(e,t,i,n,o){var r,a,s,l,c,u,d,p,f,h,g,_=Ue.get(e);if(_)for(i.handler&&(r=i,i=r.handler,o=r.selector),o&&ze.find.matchesSelector(Ze,o),i.guid||(i.guid=ze.guid++),(l=_.events)||(l=_.events={}),(a=_.handle)||(a=_.handle=function(t){return void 0!==ze&&ze.event.triggered!==t.type?ze.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(He)||[""],c=t.length;c--;)s=dt.exec(t[c])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f&&(d=ze.event.special[f]||{},f=(o?d.delegateType:d.bindType)||f,d=ze.event.special[f]||{},u=ze.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&ze.expr.match.needsContext.test(o),namespace:h.join(".")},r),(p=l[f])||(p=l[f]=[],p.delegateCount=0,d.setup&&!1!==d.setup.call(e,n,h,a)||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,u):p.push(u),ze.event.global[f]=!0)},remove:function(e,t,i,n,o){var r,a,s,l,c,u,d,p,f,h,g,_=Ue.hasData(e)&&Ue.get(e);if(_&&(l=_.events)){for(t=(t||"").match(He)||[""],c=t.length;c--;)if(s=dt.exec(t[c])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f){for(d=ze.event.special[f]||{},f=(n?d.delegateType:d.bindType)||f,p=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=p.length;r--;)u=p[r],!o&&g!==u.origType||i&&i.guid!==u.guid||s&&!s.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(p.splice(r,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,h,_.handle)||ze.removeEvent(e,f,_.handle),delete l[f])}else for(f in l)ze.event.remove(e,f+t[c],i,n,!0);ze.isEmptyObject(l)&&Ue.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,r,a,s=ze.event.fix(e),l=new Array(arguments.length),c=(Ue.get(this,"events")||{})[s.type]||[],u=ze.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=ze.event.handlers.call(this,s,c),t=0;(o=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==r.namespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(n=((ze.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,o,r,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(r=[],a={},i=0;i<l;i++)n=t[i],o=n.selector+" ",void 0===a[o]&&(a[o]=n.needsContext?ze(o,this).index(c)>-1:ze.find(o,this,null,[c]).length),a[o]&&r.push(n);r.length&&s.push({elem:c,handlers:r})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(ze.Event.prototype,e,{enumerable:!0,configurable:!0,get:Ce(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ze.expando]?e:new ze.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ot.test(t.type)&&t.click&&c(t,"input")&&D(t,"click",O),!1},trigger:function(e){var t=this||e;return ot.test(t.type)&&t.click&&c(t,"input")&&D(t,"click"),!0},_default:function(e){var t=e.target;return ot.test(t.type)&&t.click&&c(t,"input")&&Ue.get(t,"click")||c(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ze.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},ze.Event=function(e,t){if(!(this instanceof ze.Event))return new ze.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?O:P,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ze.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ze.expando]=!0},ze.Event.prototype={constructor:ze.Event,isDefaultPrevented:P,isPropagationStopped:P,isImmediatePropagationStopped:P,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=O,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=O,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=O,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ze.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ct.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ut.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ze.event.addProp),ze.each({focus:"focusin",blur:"focusout"},function(e,t){ze.event.special[e]={setup:function(){return D(this,e,j),!1},trigger:function(){return D(this,e),!0},delegateType:t}}),ze.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ze.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===n||ze.contains(n,o))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),ze.fn.extend({on:function(e,t,i,n){return A(this,e,t,i,n)},one:function(e,t,i,n){return A(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,ze(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=P),this.each(function(){ze.event.remove(this,e,i,t)})}});var pt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ft=/<script|<style|<link/i,ht=/checked\s*(?:[^=]|=\s*.checked.)/i,gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ze.extend({htmlPrefilter:function(e){return e.replace(pt,"<$1></$2>")},clone:function(e,t,i){var n,o,r,a,s=e.cloneNode(!0),l=Je(e);if(!(xe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ze.isXMLDoc(e)))for(a=E(s),r=E(e),n=0,o=r.length;n<o;n++)H(r[n],a[n]);if(t)if(i)for(r=r||E(e),a=a||E(s),n=0,o=r.length;n<o;n++)R(r[n],a[n]);else R(e,s);return a=E(s,"script"),a.length>0&&T(a,!l&&E(e,"script")),s},cleanData:function(e){for(var t,i,n,o=ze.event.special,r=0;void 0!==(i=e[r]);r++)if(Ge(i)){if(t=i[Ue.expando]){if(t.events)for(n in t.events)o[n]?ze.event.remove(i,n):ze.removeEvent(i,n,t.handle);i[Ue.expando]=void 0}i[$e.expando]&&(i[$e.expando]=void 0)}}}),ze.fn.extend({detach:function(e){return B(this,e,!0)},remove:function(e){return B(this,e)},text:function(e){return We(this,function(e){return void 0===e?ze.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return L(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){M(this,e).appendChild(e)}})},prepend:function(){return L(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=M(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ze.cleanData(E(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ze.clone(this,e,t)})},html:function(e){return We(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ft.test(e)&&!st[(rt.exec(e)||["",""])[1].toLowerCase()]){e=ze.htmlPrefilter(e);try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(ze.cleanData(E(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return L(this,arguments,function(t){var i=this.parentNode;ze.inArray(this,e)<0&&(ze.cleanData(E(this)),i&&i.replaceChild(t,this))},e)}}),ze.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ze.fn[e]=function(e){for(var i,n=[],o=ze(e),r=o.length-1,a=0;a<=r;a++)i=a===r?this:this.clone(!0),ze(o[a])[t](i),_e.apply(n,i.get());return this.pushStack(n)}});var _t=new RegExp("^("+Xe+")(?!px)[a-z%]+$","i"),mt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},vt=new RegExp(Ke.join("|"),"i");!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ze.appendChild(l).appendChild(c);var e=i.getComputedStyle(c);n="1%"!==e.top,s=12===t(e.marginLeft),c.style.right="60%",a=36===t(e.right),o=36===t(e.width),c.style.position="absolute",r=12===t(c.offsetWidth/3),Ze.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var n,o,r,a,s,l=pe.createElement("div"),c=pe.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",xe.clearCloneStyle="content-box"===c.style.backgroundClip,ze.extend(xe,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),r}}))}();var bt=["Webkit","Moz","ms"],yt=pe.createElement("div").style,wt={},kt=/^(none|table(?!-c[ea]).+)/,xt=/^--/,Ct={position:"absolute",visibility:"hidden",display:"block"},Et={letterSpacing:"0",fontWeight:"400"};ze.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=W(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=v(t),l=xt.test(t),c=e.style;if(l||(t=G(s)),a=ze.cssHooks[t]||ze.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(o=a.get(e,!1,n))?o:c[t];r=typeof i,"string"===r&&(o=Ye.exec(i))&&o[1]&&(i=k(e,t,o),r="number"),null!=i&&i===i&&("number"!==r||l||(i+=o&&o[3]||(ze.cssNumber[s]?"":"px")),xe.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var o,r,a,s=v(t);return xt.test(t)||(t=G(s)),a=ze.cssHooks[t]||ze.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,i)),void 0===o&&(o=W(e,t,n)),"normal"===o&&t in Et&&(o=Et[t]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),ze.each(["height","width"],function(e,t){ze.cssHooks[t]={get:function(e,i,n){if(i)return!kt.test(ze.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Q(e,t,n):it(e,Ct,function(){return Q(e,t,n)})},set:function(e,i,n){var o,r=mt(e),a=!xe.scrollboxSize()&&"absolute"===r.position,s=a||n,l=s&&"border-box"===ze.css(e,"boxSizing",!1,r),c=n?$(e,t,n,l,r):0;return l&&a&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-$(e,t,"border",!1,r)-.5)),c&&(o=Ye.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=ze.css(e,t)),U(e,i,c)}}}),ze.cssHooks.marginLeft=F(xe.reliableMarginLeft,function(e,t){if(t)return(parseFloat(W(e,"marginLeft"))||e.getBoundingClientRect().left-it(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ze.each({margin:"",padding:"",border:"Width"},function(e,t){ze.cssHooks[e+t]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+Ke[n]+t]=r[n]||r[n-2]||r[0];return o}},"margin"!==e&&(ze.cssHooks[e+t].set=U)}),ze.fn.extend({css:function(e,t){return We(this,function(e,t,i){var n,o,r={},a=0;if(Array.isArray(t)){for(n=mt(e),o=t.length;a<o;a++)r[t[a]]=ze.css(e,t[a],!1,n);return r}return void 0!==i?ze.style(e,t,i):ze.css(e,t)},e,t,arguments.length>1)}}),ze.Tween=V,V.prototype={constructor:V,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||ze.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(ze.cssNumber[i]?"":"px")},cur:function(){var e=V.propHooks[this.prop];return e&&e.get?e.get(this):V.propHooks._default.get(this)},run:function(e){var t,i=V.propHooks[this.prop];return this.options.duration?this.pos=t=ze.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ze.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ze.fx.step[e.prop]?ze.fx.step[e.prop](e):1!==e.elem.nodeType||!ze.cssHooks[e.prop]&&null==e.elem.style[G(e.prop)]?e.elem[e.prop]=e.now:ze.style(e.elem,e.prop,e.now+e.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ze.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ze.fx=V.prototype.init,ze.fx.step={};var Tt,zt,Ot=/^(?:toggle|show|hide)$/,Pt=/queueHooks$/;ze.Animation=ze.extend(te,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return k(i.elem,e,Ye.exec(t),i),i}]},tweener:function(e,t){Ce(e)?(t=e,e=["*"]):e=e.match(He);for(var i,n=0,o=e.length;n<o;n++)i=e[n],te.tweeners[i]=te.tweeners[i]||[],te.tweeners[i].unshift(t)},prefilters:[J],prefilter:function(e,t){t?te.prefilters.unshift(e):te.prefilters.push(e)}}),ze.speed=function(e,t,i){var n=e&&"object"==typeof e?ze.extend({},e):{complete:i||!i&&t||Ce(e)&&e,duration:e,easing:i&&t||t&&!Ce(t)&&t};return ze.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in ze.fx.speeds?n.duration=ze.fx.speeds[n.duration]:n.duration=ze.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){Ce(n.old)&&n.old.call(this),n.queue&&ze.dequeue(this,n.queue)},n},ze.fn.extend({fadeTo:function(e,t,i,n){return this.filter(tt).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=ze.isEmptyObject(e),r=ze.speed(t,i,n),a=function(){var t=te(this,ze.extend({},e),r);(o||Ue.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=ze.timers,a=Ue.get(this);if(o)a[o]&&a[o].stop&&n(a[o]);else for(o in a)a[o]&&a[o].stop&&Pt.test(o)&&n(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(i),t=!1,r.splice(o,1));!t&&i||ze.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=Ue.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],r=ze.timers,a=n?n.length:0;for(i.finish=!0,ze.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ze.each(["toggle","show","hide"],function(e,t){var i=ze.fn[t];ze.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(K(t,!0),e,n,o)}}),ze.each({slideDown:K("show"),slideUp:K("hide"),slideToggle:K("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ze.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ze.timers=[],ze.fx.tick=function(){var e,t=0,i=ze.timers;for(Tt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||ze.fx.stop(),Tt=void 0},ze.fx.timer=function(e){ze.timers.push(e),ze.fx.start()},ze.fx.interval=13,ze.fx.start=function(){zt||(zt=!0,X())},ze.fx.stop=function(){zt=null},ze.fx.speeds={slow:600,fast:200,_default:400},ze.fn.delay=function(e,t){return e=ze.fx?ze.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var o=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(o)}})},function(){var e=pe.createElement("input"),t=pe.createElement("select"),i=t.appendChild(pe.createElement("option"));e.type="checkbox",xe.checkOn=""!==e.value,xe.optSelected=i.selected,e=pe.createElement("input"),e.value="t",e.type="radio",xe.radioValue="t"===e.value}();var jt,St=ze.expr.attrHandle;ze.fn.extend({attr:function(e,t){return We(this,ze.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ze.removeAttr(this,e)})}}),ze.extend({attr:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?ze.prop(e,t,i):(1===r&&ze.isXMLDoc(e)||(o=ze.attrHooks[t.toLowerCase()]||(ze.expr.match.bool.test(t)?jt:void 0)),void 0!==i?null===i?void ze.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:(n=ze.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!xe.radioValue&&"radio"===t&&c(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(He);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),jt={set:function(e,t,i){return!1===t?ze.removeAttr(e,i):e.setAttribute(i,i),i}},ze.each(ze.expr.match.bool.source.match(/\w+/g),function(e,t){var i=St[t]||ze.find.attr;St[t]=function(e,t,n){var o,r,a=t.toLowerCase();return n||(r=St[a],St[a]=o,o=null!=i(e,t,n)?a:null,St[a]=r),o}});var At=/^(?:input|select|textarea|button)$/i,Dt=/^(?:a|area)$/i;ze.fn.extend({prop:function(e,t){return We(this,ze.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ze.propFix[e]||e]})}}),ze.extend({prop:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&ze.isXMLDoc(e)||(t=ze.propFix[t]||t,o=ze.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=ze.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||Dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),xe.optSelected||(ze.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ze.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ze.propFix[this.toLowerCase()]=this}),ze.fn.extend({addClass:function(e){var t,i,n,o,r,a,s,l=0;if(Ce(e))return this.each(function(t){ze(this).addClass(e.call(this,t,ne(this)))});if(t=oe(e),t.length)for(;i=this[l++];)if(o=ne(i),n=1===i.nodeType&&" "+ie(o)+" "){for(a=0;r=t[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=ie(n),o!==s&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,n,o,r,a,s,l=0;if(Ce(e))return this.each(function(t){ze(this).removeClass(e.call(this,t,ne(this)))});if(!arguments.length)return this.attr("class","");if(t=oe(e),t.length)for(;i=this[l++];)if(o=ne(i),n=1===i.nodeType&&" "+ie(o)+" "){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");s=ie(n),o!==s&&i.setAttribute("class",s)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):Ce(e)?this.each(function(i){ze(this).toggleClass(e.call(this,i,ne(this),t),t)}):this.each(function(){var t,o,r,a;if(n)for(o=0,r=ze(this),a=oe(e);t=a[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||(t=ne(this),t&&Ue.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Ue.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+ie(ne(i))+" ").indexOf(t)>-1)return!0;return!1}});var Mt=/\r/g;ze.fn.extend({val:function(e){var t,i,n,o=this[0];{if(arguments.length)return n=Ce(e),this.each(function(i){var o;1===this.nodeType&&(o=n?e.call(this,i,ze(this).val()):e,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=ze.map(o,function(e){return null==e?"":e+""})),(t=ze.valHooks[this.type]||ze.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return(t=ze.valHooks[o.type]||ze.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(Mt,""):null==i?"":i)}}}),ze.extend({valHooks:{option:{get:function(e){var t=ze.find.attr(e,"value");return null!=t?t:ie(ze.text(e))}},select:{get:function(e){var t,i,n,o=e.options,r=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?r+1:o.length;for(n=r<0?l:a?r:0;n<l;n++)if(i=o[n],(i.selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!c(i.parentNode,"optgroup"))){if(t=ze(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,n,o=e.options,r=ze.makeArray(t),a=o.length;a--;)n=o[a],(n.selected=ze.inArray(ze.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),ze.each(["radio","checkbox"],function(){ze.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=ze.inArray(ze(e).val(),t)>-1}},xe.checkOn||(ze.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),xe.focusin="onfocusin"in i;var It=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};ze.extend(ze.event,{trigger:function(e,t,n,o){var r,a,s,l,c,u,d,p,f=[n||pe],h=ye.call(e,"type")?e.type:e,g=ye.call(e,"namespace")?e.namespace.split("."):[];if(a=p=s=n=n||pe,3!==n.nodeType&&8!==n.nodeType&&!It.test(h+ze.event.triggered)&&(h.indexOf(".")>-1&&(g=h.split("."),h=g.shift(),g.sort()),c=h.indexOf(":")<0&&"on"+h,e=e[ze.expando]?e:new ze.Event(h,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ze.makeArray(t,[e]),d=ze.event.special[h]||{},o||!d.trigger||!1!==d.trigger.apply(n,t))){if(!o&&!d.noBubble&&!Ee(n)){for(l=d.delegateType||h,It.test(l+h)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(n.ownerDocument||pe)&&f.push(s.defaultView||s.parentWindow||i)}for(r=0;(a=f[r++])&&!e.isPropagationStopped();)p=a,e.type=r>1?l:d.bindType||h,u=(Ue.get(a,"events")||{})[e.type]&&Ue.get(a,"handle"),u&&u.apply(a,t),(u=c&&a[c])&&u.apply&&Ge(a)&&(e.result=u.apply(a,t),!1===e.result&&e.preventDefault());return e.type=h,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!Ge(n)||c&&Ce(n[h])&&!Ee(n)&&(s=n[c],s&&(n[c]=null),ze.event.triggered=h,e.isPropagationStopped()&&p.addEventListener(h,Nt),n[h](),e.isPropagationStopped()&&p.removeEventListener(h,Nt),ze.event.triggered=void 0,s&&(n[c]=s)),e.result}},simulate:function(e,t,i){var n=ze.extend(new ze.Event,i,{type:e,isSimulated:!0});ze.event.trigger(n,null,t)}}),ze.fn.extend({trigger:function(e,t){return this.each(function(){ze.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return ze.event.trigger(e,t,i,!0)}}),xe.focusin||ze.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){ze.event.simulate(t,e.target,ze.event.fix(e))};ze.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=Ue.access(n,t);o||n.addEventListener(e,i,!0),Ue.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=Ue.access(n,t)-1;o?Ue.access(n,t,o):(n.removeEventListener(e,i,!0),Ue.remove(n,t))}}});var Rt=i.location,Ht=Date.now(),Lt=/\?/;ze.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||ze.error("Invalid XML: "+e),t};var Bt=/\[\]$/,Wt=/\r?\n/g,Ft=/^(?:submit|button|image|reset|file)$/i,qt=/^(?:input|select|textarea|keygen)/i;ze.param=function(e,t){var i,n=[],o=function(e,t){var i=Ce(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!ze.isPlainObject(e))ze.each(e,function(){o(this.name,this.value)});else for(i in e)re(i,e[i],t,o);return n.join("&")},ze.fn.extend({serialize:function(){return ze.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ze.prop(this,"elements");return e?ze.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ze(this).is(":disabled")&&qt.test(this.nodeName)&&!Ft.test(e)&&(this.checked||!ot.test(e))}).map(function(e,t){var i=ze(this).val();return null==i?null:Array.isArray(i)?ze.map(i,function(e){return{name:t.name,value:e.replace(Wt,"\r\n")}}):{name:t.name,value:i.replace(Wt,"\r\n")}}).get()}});var Gt=/%20/g,Ut=/#.*$/,$t=/([?&])_=[^&]*/,Qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Vt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Xt=/^(?:GET|HEAD)$/,Yt=/^\/\//,Kt={},Zt={},Jt="*/".concat("*"),ei=pe.createElement("a");ei.href=Rt.href,ze.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rt.href,type:"GET",isLocal:Vt.test(Rt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ze.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?le(le(e,ze.ajaxSettings),t):le(ze.ajaxSettings,e)},ajaxPrefilter:ae(Kt),ajaxTransport:ae(Zt),ajax:function(e,t){function n(e,t,n,s){var c,p,f,y,w,k=t;u||(u=!0,l&&i.clearTimeout(l),o=void 0,a=s||"",x.readyState=e>0?4:0,c=e>=200&&e<300||304===e,n&&(y=ce(h,x,n)),y=ue(h,y,x,c),c?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ze.lastModified[r]=w),(w=x.getResponseHeader("etag"))&&(ze.etag[r]=w)),204===e||"HEAD"===h.type?k="nocontent":304===e?k="notmodified":(k=y.state,p=y.data,f=y.error,c=!f)):(f=k,!e&&k||(k="error",e<0&&(e=0))),x.status=e,x.statusText=(t||k)+"",c?m.resolveWith(g,[p,k,x]):m.rejectWith(g,[x,k,f]),x.statusCode(b),b=void 0,d&&_.trigger(c?"ajaxSuccess":"ajaxError",[x,h,c?p:f]),v.fireWith(g,[x,k]),d&&(_.trigger("ajaxComplete",[x,h]),--ze.active||ze.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var o,r,a,s,l,c,u,d,p,f,h=ze.ajaxSetup({},t),g=h.context||h,_=h.context&&(g.nodeType||g.jquery)?ze(g):ze.event,m=ze.Deferred(),v=ze.Callbacks("once memory"),b=h.statusCode||{},y={},w={},k="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Qt.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==u&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)x.always(e[x.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||k;return o&&o.abort(t),n(0,t),this}};if(m.promise(x),h.url=((e||h.url||Rt.href)+"").replace(Yt,Rt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(He)||[""],null==h.crossDomain){c=pe.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=ei.protocol+"//"+ei.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ze.param(h.data,h.traditional)),se(Kt,h,t,x),u)return x;d=ze.event&&h.global,d&&0==ze.active++&&ze.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Xt.test(h.type),r=h.url.replace(Ut,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Gt,"+")):(f=h.url.slice(r.length),h.data&&(h.processData||"string"==typeof h.data)&&(r+=(Lt.test(r)?"&":"?")+h.data,delete h.data),!1===h.cache&&(r=r.replace($t,"$1"),f=(Lt.test(r)?"&":"?")+"_="+Ht+++f),h.url=r+f),h.ifModified&&(ze.lastModified[r]&&x.setRequestHeader("If-Modified-Since",ze.lastModified[r]),ze.etag[r]&&x.setRequestHeader("If-None-Match",ze.etag[r])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Jt+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)x.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,x,h)||u))return x.abort();if(k="abort",v.add(h.complete),x.done(h.success),x.fail(h.error),o=se(Zt,h,t,x)){if(x.readyState=1,d&&_.trigger("ajaxSend",[x,h]),u)return x;h.async&&h.timeout>0&&(l=i.setTimeout(function(){x.abort("timeout")},h.timeout));try{u=!1,o.send(y,n)}catch(e){if(u)throw e;n(-1,e)}}else n(-1,"No Transport");return x},getJSON:function(e,t,i){return ze.get(e,t,i,"json")},getScript:function(e,t){return ze.get(e,void 0,t,"script")}}),ze.each(["get","post"],function(e,t){ze[t]=function(e,i,n,o){return Ce(i)&&(o=o||n,n=i,i=void 0),ze.ajax(ze.extend({url:e,type:t,dataType:o,data:i,success:n},ze.isPlainObject(e)&&e))}}),ze._evalUrl=function(e,t){return ze.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ze.globalEval(e,t)}})},ze.fn.extend({wrapAll:function(e){var t;return this[0]&&(Ce(e)&&(e=e.call(this[0])),t=ze(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return Ce(e)?this.each(function(t){ze(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ze(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=Ce(e);return this.each(function(i){ze(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ze(this).replaceWith(this.childNodes)}),this}}),ze.expr.pseudos.hidden=function(e){return!ze.expr.pseudos.visible(e)},ze.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ze.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var ti={0:200,1223:204},ii=ze.ajaxSettings.xhr();xe.cors=!!ii&&"withCredentials"in ii,xe.ajax=ii=!!ii,ze.ajaxTransport(function(e){var t,n;if(xe.cors||ii&&!e.crossDomain)return{send:function(o,r){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(a in o)s.setRequestHeader(a,o[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(ti[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout(function(){t&&n()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),ze.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ze.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ze.globalEval(e),e}}}),ze.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ze.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,i;return{send:function(n,o){t=ze("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),pe.head.appendChild(t[0])},abort:function(){i&&i()}}}});var ni=[],oi=/(=)\?(?=&|$)|\?\?/;ze.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ni.pop()||ze.expando+"_"+Ht++;return this[e]=!0,e}}),ze.ajaxPrefilter("json jsonp",function(e,t,n){var o,r,a,s=!1!==e.jsonp&&(oi.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&oi.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=Ce(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(oi,"$1"+o):!1!==e.jsonp&&(e.url+=(Lt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||ze.error(o+" was not called"),a[0]},e.dataTypes[0]="json",r=i[o],i[o]=function(){a=arguments},n.always(function(){void 0===r?ze(i).removeProp(o):i[o]=r,e[o]&&(e.jsonpCallback=t.jsonpCallback,ni.push(o)),a&&Ce(r)&&r(a[0]),a=r=void 0}),"script"}),xe.createHTMLDocument=function(){var e=pe.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ze.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var n,o,r;return t||(xe.createHTMLDocument?(t=pe.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=pe.location.href,t.head.appendChild(n)):t=pe),o=De.exec(e),r=!i&&[],o?[t.createElement(o[1])]:(o=z([e],t,r),r&&r.length&&ze(r).remove(),ze.merge([],o.childNodes))},ze.fn.load=function(e,t,i){var n,o,r,a=this,s=e.indexOf(" ");return s>-1&&(n=ie(e.slice(s)),e=e.slice(0,s)),Ce(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&ze.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(n?ze("<div>").append(ze.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,r||[e.responseText,t,e])})}),this},ze.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ze.fn[t]=function(e){return this.on(t,e)}}),ze.expr.pseudos.animated=function(e){return ze.grep(ze.timers,function(t){return e===t.elem}).length},ze.offset={setOffset:function(e,t,i){var n,o,r,a,s,l,c,u=ze.css(e,"position"),d=ze(e),p={};"static"===u&&(e.style.position="relative"),s=d.offset(),r=ze.css(e,"top"),l=ze.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1,c?(n=d.position(),a=n.top,o=n.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),Ce(t)&&(t=t.call(e,i,ze.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):d.css(p)}},ze.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ze.offset.setOffset(this,e,t)});var t,i,n=this[0];if(n)return n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,i,n=this[0],o={top:0,left:0};if("fixed"===ze.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===ze.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&(o=ze(e).offset(),o.top+=ze.css(e,"borderTopWidth",!0),o.left+=ze.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-ze.css(n,"marginTop",!0),left:t.left-o.left-ze.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ze.css(e,"position");)e=e.offsetParent;return e||Ze})}}),ze.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;ze.fn[e]=function(n){return We(this,function(e,n,o){var r;if(Ee(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[n];r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):e[n]=o},e,n,arguments.length)}}),ze.each(["top","left"],function(e,t){ze.cssHooks[t]=F(xe.pixelPosition,function(e,i){if(i)return i=W(e,t),_t.test(i)?ze(e).position()[t]+"px":i})}),ze.each({Height:"height",Width:"width"},function(e,t){ze.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){ze.fn[n]=function(o,r){var a=arguments.length&&(i||"boolean"!=typeof o),s=i||(!0===o||!0===r?"margin":"border");return We(this,function(t,i,o){var r;return Ee(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?ze.css(t,i,s):ze.style(t,i,o,s)},t,a?o:void 0,a)}})}),ze.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ze.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ze.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ze.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),ze.proxy=function(e,t){var i,n,o;if("string"==typeof t&&(i=e[t],t=e,e=i),Ce(e))return n=he.call(arguments,2),o=function(){return e.apply(t||this,n.concat(he.call(arguments)))},o.guid=e.guid=e.guid||ze.guid++,o},ze.holdReady=function(e){e?ze.readyWait++:ze.ready(!0)},ze.isArray=Array.isArray,ze.parseJSON=JSON.parse,ze.nodeName=c,ze.isFunction=Ce,ze.isWindow=Ee,ze.camelCase=v,ze.type=s,ze.now=Date.now,ze.isNumeric=function(e){var t=ze.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},n=[],void 0!==(o=function(){return ze}.apply(t,n))&&(e.exports=o);var ri=i.jQuery,ai=i.$;return ze.noConflict=function(e){return i.$===ze&&(i.$=ai),e&&i.jQuery===ze&&(i.jQuery=ri),ze},r||(i.jQuery=i.$=ze),ze})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);i(75),i(12),i(84),i(85),i(86),i(74)(n),i(63)(n),i(46),i(47),i(64),i(48),t.default=n},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return r(e,null,[{key:"assertType",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if((void 0===e?"undefined":o(e))!==""+t){if(i)throw new TypeError("Expected argument "+i+' to be of type "'+t+'", "'+(void 0===e?"undefined":o(e))+'" given');throw new TypeError('Expected value to be of type "'+t+'", "'+(void 0===e?"undefined":o(e))+'" given')}}},{key:"assertFunction",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.assertType(t,"function",i)}},{key:"assertObject",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.assertType(t,"object",i)}},{key:"assertjQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=void 0===e?"undefined":o(e);if("object"!==i||void 0===e.jquery){if(t)throw new TypeError("Expected argument "+t+' to be a jQuery object, "'+i+'" given');throw new TypeError('Expected value to be a jQuery object, "'+i+'" given')}}},{key:"assertjQueryOrDomElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=void 0===e?"undefined":o(e);if("object"!==i||void 0===e.jquery&&!e.tagName){if(t)throw new TypeError("Expected argument "+t+' to be a jQuery object or DOM element, "'+i+'" given');throw new TypeError('Expected value to be a jQuery object or DOM element, "'+i+'" given')}}},{key:"assertString",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.assertType(t,"string",i)}},{key:"assertNumber",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.assertType(t,"number",i)}},{key:"assertNumeric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(isNaN(parseFloat(e))){if(t)throw new TypeError("Argument "+t+' can not be converted into number, "'+e+'" given');throw new TypeError('Value can not be converted into number, "'+e+'" given')}}},{key:"assertDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(e instanceof Date)){if(t)throw new TypeError("Expected argument "+t+' to be an instance of "Date", "'+(void 0===e?"undefined":o(e))+'" given');throw new TypeError('Expected value to be an instance of "Date", "'+(void 0===e?"undefined":o(e))+'" given')}}},{key:"assertInstanceOf",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!(t instanceof i)){var o=e._get_class_name_from_impl(i),r=e._get_value_description(t);if(n)throw new TypeError("Expected argument "+n+' to be an instance of "'+o+'", "'+r+'" given');throw new TypeError('Expected value to be an instance of "'+o+'", "'+r+'" given')}}},{key:"assertDomElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e.tagName){if(t)throw new TypeError("Expected argument "+t+' to be a DOM element, "'+(void 0===e?"undefined":o(e))+'" given');throw new TypeError('Expected value to be a DOM element, "'+(void 0===e?"undefined":o(e))+'" given')}}},{key:"_get_value_description",value:function(t){var i=void 0===t?"undefined":o(t);return"object"!==i?i:t.constructor&&t.constructor.name?t.constructor.name:e._get_class_name_from_impl(t.constructor)}},{key:"_get_class_name_from_impl",value:function(e){var t=""+e;return"function ()"===t.substr(0,11)?t:t.substring(9,t.indexOf(" {"))}}]),e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(){},a=window.console||{};a.log=a.log||r,a.warn=a.warn||r,a.error=a.error||r,a.debug=o.default.environment().debug_mode&&a.debug?a.debug:r,t.default=a},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(69),s=n(a),l=i(1),c=n(l),u=i(3),d=n(u),p=i(54),f=n(p),h=i(70),g=n(h),_=function(){function e(){o(this,e),e._instance&&d.default.error("An instance of UiHelper already exists"),this._preview_overlay=null,this._product_form=null,this._fancybox_helper=new f.default}return r(e,null,[{key:"instance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),r(e,[{key:"hide",value:function(e){var t=this;if(Array.isArray(e))return e.forEach(function(e){return t.hide(e)}),this;if("string"==typeof e||"string"==typeof e.nodeName)return this.hide((0,c.default)(e));if(void 0===e.jquery)throw new TypeError("Expected argument element to be a string, HTMLElement or jQuery object");return e.addClass("zp-hidden"),this}},{key:"show",value:function(e){var t=this;if(Array.isArray(e))return e.forEach(function(e){return t.show(e)}),this;if("string"==typeof e||"string"==typeof e.nodeName)return this.show((0,c.default)(e));if(void 0===e.jquery)throw new TypeError("Expected argument element to be a string, HTMLElement or jQuery object");return e.removeClass("zp-hidden"),this}},{key:"has_hide_class",value:function(e){if("string"==typeof e||"string"==typeof e.nodeName)return this.has_hide_class((0,c.default)(e));if(void 0===e.jquery)throw new TypeError("Expected argument element to be a string, HTMLElement or jQuery object");return e.hasClass("zp-hidden")}},{key:"preview_overlay",get:function(){return this._preview_overlay||(this._preview_overlay=new s.default(this.product_image_gallery,updating_preview_image_text)),this._preview_overlay}},{key:"product_image_gallery",get:function(){return this.original_product_image.parent()[0]}},{key:"original_product_image",get:function(){return(0,c.default)("#image, #image-main")}},{key:"product_image_box",get:function(){return(0,c.default)("#zetaprints-preview-image-container")}},{key:"next_page_button",get:function(){return(0,c.default)("#zp-next-page-button")}},{key:"enlarge_button",get:function(){return(0,c.default)("#zp-enlarge-button")}},{key:"editor_button",get:function(){return(0,c.default)("#zp-editor-button")}},{key:"update_preview_form_button",get:function(){return(0,c.default)("#zp-update-preview-form-button")}},{key:"update_preview_button",get:function(){return(0,c.default)("#zp-update-preview-button")}},{key:"form_button",get:function(){return(0,c.default)("#zp-form-button")}},{key:"product_form",get:function(){return this._product_form||(this._product_form=new g.default((0,c.default)("#product_addtocart_form"))),this._product_form}},{key:"select_image_elements_inputs",get:function(){return(0,c.default)("input.zetaprints-images").filter(function(){return!(0,c.default)(this).parent().hasClass("zp-html-template")})}},{key:"select_image_elements",get:function(){return(0,c.default)(this.select_image_elements_selector)}},{key:"select_image_elements_selector",get:function(){return"."+this.select_image_elements_class_name}},{key:"select_image_elements_class_name",get:function(){return"zetaprints-images-selector"}},{key:"select_image_button",get:function(){return(0,c.default)("#zp-select-image-button")}},{key:"input_fields",get:function(){return(0,c.default)(this.input_fields_selector)}},{key:"input_fields_selector",get:function(){return".zetaprints-page-input-fields"}},{key:"fancybox",get:function(){return this._fancybox_helper}},{key:"fancybox_close_button",get:function(){return this.fancybox.close_button}},{key:"fancybox_outer",get:function(){return this.fancybox.outer}},{key:"fancybox_content",get:function(){return this.fancybox.content}},{key:"fancybox_wrap",get:function(){return this.fancybox.wrap}},{key:"fancybox_resize",get:function(){return this.fancybox.resize}},{key:"fancybox_overlay",get:function(){return this.fancybox.overlay}},{key:"fancybox_image",get:function(){return this.fancybox.image}},{key:"fancybox_image_selector",get:function(){return this.fancybox.image_selector}}],[{key:"get_name_for_element",value:function(e){return(0,c.default)(e).attr("name").substring(12)}}]),e}();t.default=_,_._instance=null},function(e,t,i){var n,o,r;!function(a){o=[i(0)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(3),s=n(a),l=i(2),c=n(l),u=i(14),d=n(u),p=function(){function t(){o(this,t),t._instance&&s.default.error("An instance of NotificationCenter already exists"),this._listeners={}}return r(t,null,[{key:"instance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),r(t,[{key:"notify",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.default.assertString(t,"event_name"),c.default.assertObject(i,"data"),e(document).trigger(t,i);var n=this._listeners[t];return void 0===n?(s.default.debug("[NotificationCenter] Dispatch notification "+t+": No listeners"),this):(s.default.debug("[NotificationCenter] Dispatch notification "+t+": "+n.length+" listeners"),n.forEach(function(e){if(d.default.environment().debug_mode)e(t,i);else try{e(t,i)}catch(e){s.default.warn("[NotificationCenter] Caught error during notifying "+e)}}),this)}},{key:"register",value:function(e,t){c.default.assertString(e,"event_name"),c.default.assertFunction(t,"listener");var i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].push(t),this}}]),t}();t.default=p,p._instance=null}).call(t,i(0))},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(3),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n(this,e),e._instance&&a.default.error("An instance of Feature already exists"),e._instance=this,this._activated_features=t}return o(e,null,[{key:"instance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),o(e,[{key:"call",value:function(e,t){if("string"!=typeof e)throw new TypeError('Argument feature_name must be of type "string"');if("function"!=typeof t)throw new TypeError('Argument feature_method must be of type "function"');if(this.is_activated(e)){var i=this._get_function_name(""+t);a.default.debug("[Feature] Call '"+i+"' for "+e);for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return t.apply(void 0,o)}a.default.warn("[Feature] "+e+" not activated")}},{key:"is_activated",value:function(e){if("string"!=typeof e)throw new TypeError('Argument feature_name must be of type "string"');return-1!==this._activated_features.indexOf(e)}},{key:"_get_function_name",value:function(e){var t=""+e;return"function ()"===t.substr(0,11)?"anonymous function":t.substring(9,t.indexOf(" {"))}}],[{key:"feature",get:function(){return{dataset:"Dataset",inPreviewEdit:"InPreviewEdit",textFieldEditor:"textFieldEditor",fancybox:{resizing:"Fancybox/Resizing",saveImageButton:"Fancybox/SaveImageButton",selectImage:"Fancybox/SelectImage",updatePreview:"Fancybox/UpdatePreviewButton"}}}}]),e}();t.default=s,s._instance=null},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={USER_DATA_CHANGED:"GlobalEvents.USER_DATA_CHANGED",USER_DATA_SAVED:"GlobalEvents.USER_DATA_SAVED"}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e)}return o(e,[{key:"_assign_properties",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}}]),e}();t.default=r},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(3),l=n(s),c=i(42),u=n(c),d=i(18),p=n(d),f=i(66),h=n(f),g=i(4),_=n(g),m=i(27),v=n(m),b=i(1),y=n(b),w=i(40),k=n(w),x=i(25),C=n(x),E=i(41),T=n(E),z=i(7),O=n(z),P=i(20),j=n(P),S=i(52),A=n(S),D=i(49),M=n(D),I=i(43),N=n(I),R=i(31),H=n(R),L=i(24),B=n(L),W=i(13),F=n(W),q=i(2),G=n(q),U=i(55),$=n(U),Q=i(16),V=n(Q),X=i(6),Y=n(X),K=i(8),Z=n(K),J=i(26),ee=n(J),te=i(21),ie=n(te),ne=i(44),oe=n(ne),re=i(14),ae=n(re),se=i(15),le=n(se),ce=i(71),ue=n(ce),de=i(72),pe=n(de),fe=function(){function e(t){if(o(this,e),1!==arguments.length)throw new TypeError("Invalid number of arguments, expected 1 got "+arguments.length);e.shared_instance=this,l.default.warn("[Web2Print] App version "+e.version);var i=this.data=t,n=this;this._enlarge_editor_click_handler=this._enlarge_editor_click_handler.bind(this),this.add_image_to_gallery=this.add_image_to_gallery.bind(this),i.scroll_strip=this.scroll_strip=this.scroll_strip.bind(this);var r=this._get_add_to_cart_button(),a=new h.default(r);this.shape_repository=new H.default(this);var s=this.preview_controller=new p.default(this,a);this.image_editor=new C.default(this),this.in_preview_edit_controller=new N.default(this),this.image_selection_controller=new ee.default(this),this._select_image=new A.default(s),this.image_manipulation_service=new le.default,this._preview_overlay=null;var c=t.template_details;i.current_page=1;var u=_.default.instance();u.product_image_box.css("position","relative");var d=u.product_image_gallery;this._set_has_image_zoomer(this._detect_initial_has_image_zoomer(d)),u.product_form.modified=V.default.has_changed_fields_on_page(i.current_page),this._register_click_form_button(),this._register_click_enlarge_editor(),i.is_personalization_step&&this.has_image_zoomer&&this.disable_image_zoomer(),this.has_image_zoomer||((0,y.default)(d).empty(),s.add_preview_placeholder()),this._add_hidden_form_fields(c),i.update_first_preview_on_load&&s.update_preview(this.data,[],i.preserve_fields),window.place_preview_image_sharing_link&&(i.preview_sharing_links=new Array(i.template_details.pages_number+1)),this.preview_controller.add_previews(t);var f=t.template_details.pages;this._prepareImageFields(f),y.default.fn.combobox&&this._prepareComboBox(f),u.show("#page-size-page-1"),i.is_fields_hidden=!0,this.has_shapes&&window.place_all_shapes_for_page||u.show("#stock-images-page-1, #input-fields-page-1"),this.has_shapes&&O.default.instance().is_activated(O.default.feature.inPreviewEdit)||(u.show("#stock-images-page-1, #input-fields-page-1"),i.is_fields_hidden=!1,u.hide(u.editor_button),u.hide(u.form_button),u.show(u.enlarge_button)),(0,y.default)("div.zetaprints-image-tabs, div.zetaprints-preview-button").css("display","block"),(0,y.default)("div.zetaprints-image-tabs li:first").addClass("selected"),(0,y.default)("div.tab.user-images").each(function(){var e=(0,y.default)(this);e.find("td").length>1&&e.parents(".selector-content").find("> .tab-buttons > .hidden").removeClass("hidden")}),r.parent().before('<div id="zp-warning-user-data-changed" class="zetaprints-notice">'+window.warning_user_data_changed+"</div>"),V.default.is_all_pages_updated(c)||n._has_updated_pages(c)&&""===c.missed_pages||"include"===c.missed_pages?u.hide("div.zetaprints-notice.to-update-preview"):a.add(void 0!==c.pages[2]),y.default.fn.text_field_resizer&&(0,y.default)("#input-fields-page-1").find(".zetaprints-text-field-wrapper").text_field_resizer(),window.place_preview_image_sharing_link&&this.set_preview_sharing_link_for_page(1,i.preview_sharing_links),new T.default(this).register_click(),O.default.instance().call(O.default.feature.dataset,M.default.zp_dataset_initialise,i),this._patch_product_add_to_cart(),this._add_dynamic_methods_to_data(),this._init_image_upload_buttons(),this._register_window_load(),this._register_click_next_page(),this._register_in_dialog_lightbox(),this._register_click_edit_thumbnail(),this._prepare_text_field_editor(),this._prepareQtip(),this._register_input_field_events(),this._register_delete_button_click(),this._register_image_click(),this._register_palette_change(),this._register_notification_listeners(),this._add_rotate_buttons(),i.has_shapes&&O.default.instance().call(O.default.feature.inPreviewEdit,this.in_preview_edit_controller.add_in_preview_edit_handlers)}return a(e,[{key:"_register_click_enlarge_editor",value:function(){var e=_.default.instance();e.editor_button.on("click",this._enlarge_editor_click_handler),e.enlarge_button.on("click",this._enlarge_editor_click_handler)}},{key:"_register_click_form_button",value:function(){var e=this.data;return _.default.instance().form_button.on("click",function(){var t=(0,y.default)("#input-fields-page-"+e.current_page+", #stock-images-page-"+e.current_page),i=_.default.instance();e.is_fields_hidden=!i.has_hide_class(t),e.is_fields_hidden?t.animate({opacity:0},500,function(){i.hide(t),t.css("opacity",1)}):(t.css("opacity",0),i.show(t),t.animate({opacity:1},500))})}},{key:"add_image_to_gallery",value:function(e,t,i){var n=this,o=this.data,r=(0,y.default)(".tabs-wrapper > .user-images > table > tbody > tr"),a=this._get_edit_thumbnail_click_handler(),s=function(e){if(e.stopPropagation(),e.preventDefault(),confirm(delete_this_image_text)){var t=(0,y.default)(this).parents("td").children("input").val();n._delete_image(o,t)}return!1};r.each(function(){var o=(0,y.default)(this),r=o.children(".zp-html-template"),l=r.clone().removeClass("zp-html-template").insertAfter(r),c=l.children(".zetaprints-field");c.val(e),n.image_selection_controller.register_fields(c),c.each(function(){var e=new ue.default(n,this);new pe.default(n,this).add(),e.add()}),l.children(".image-edit-thumb").click(a);var u=l.children(".image-edit-thumb");u.find("> .buttons-row > .zp-delete-button").click(s);var d=u.children("img").attr("alt",e).attr("src",t);i&&d.load(i)})}},{key:"set_preview_sharing_link_for_page",value:function(e,t){t[e]?((0,y.default)("span.zetaprints-share-link").removeClass("empty"),(0,y.default)("#zetaprints-share-link-input").val(t[e])):((0,y.default)("span.zetaprints-share-link").addClass("empty"),(0,y.default)("#zetaprints-share-link-input").val(""))}},{key:"can_show_next_page_button_for_page",value:function(e,t){var i=t.template_details.pages[e];return!!(e<t.template_details.pages_number&&i["updated-preview-image"])}},{key:"scroll_strip",value:function(e){if((0,y.default)(e).hasClass("images-scroller")){(0,y.default)(e).scrollLeft(0);var t=(0,y.default)("input:checked",e).parents("td").position();t&&(0,y.default)(e).scrollLeft(t.left)}return!0}},{key:"upload_image_by_url",value:function(e){var t=this,i=this.data,n={type:"POST",dataType:"json",data:{url:e},error:function(e,t,i){alert(t+" "+i)},success:function(e){t.add_image_to_gallery(e.guid,e.thumbnail_url),t.image_editor.reload_image(e.guid)}};y.default.ajax(i.url.upload_by_url,n)}},{key:"disable_image_zoomer",value:function(){return!!this.has_image_zoomer&&($.default.disable_zoom(),this._set_has_image_zoomer(!1),!0)}},{key:"show_colorpicker",value:function(e){if(G.default.assertjQuery(e),e.hasClass("color-picker")||e.hasClass("colour-picker")){var t=e.find("input");t.prop("checked")||t.colorpicker("open")}}},{key:"hide_colorpicker",value:function(e){G.default.assertjQuery(e),(e.hasClass("color-picker")||e.hasClass("colour-picker"))&&e.find("input").colorpicker("close",!0)}},{key:"show_user_images",value:function(e){G.default.assertjQuery(e),e.find("input.zetaprints-images").length>0&&e.tabs("option","active",1)}},{key:"input_field_did_change",value:function(e,t){var i=this.data;if(i.has_shapes&&O.default.instance().is_activated(O.default.feature.inPreviewEdit)){var n=i.template_details.pages[i.current_page];if(i.has_shapes&&O.default.instance().is_activated(O.default.feature.inPreviewEdit)){var o=this.in_preview_edit_controller.get_shape_by_name(e,n.shapes);o&&this._shape_update_state(o,!!t)}}O.default.instance().call(O.default.feature.dataset,M.default.zp_dataset_update_state,i,e,!1)}},{key:"update_preview",value:function(){this.preview_controller.update_preview(this.data)}},{key:"_set_has_image_zoomer",value:function(e){this._has_image_zoomer=e}},{key:"_add_dynamic_methods_to_data",value:function(){var e=this,t=this,i=function(e,i,n){return t.preview_controller.update_preview(t.data,i,n),e.preventDefault(),!1};this.data.update_preview=function(){l.default.warn("Called update_preview on ZetaPrints data"),i.apply(this,arguments)},this.data.show_user_images=function(t){return l.default.warn("Called show_user_images on ZetaPrints data"),e.show_user_images(t)},this.data.show_colorpicker=function(t){return l.default.warn("Called show_colorpicker on ZetaPrints data"),e.show_colorpicker(t)},this.data.hide_colorpicker=function(t){return l.default.warn("Called hide_colorpicker on ZetaPrints data"),e.hide_colorpicker(t)}}},{key:"_init_image_upload_buttons",value:function(){var e=this;(0,y.default)("div.button.choose-file").each(function(){new u.default(this,e)})}},{key:"_register_window_load",value:function(){var e=this,t=this.data;(0,y.default)(window).on("load",function(){t.has_shapes&&O.default.instance().call(O.default.feature.inPreviewEdit,N.default.precalculate_shapes,t.template_details),_.default.instance().select_image_elements.each(function(){new k.default(e,this)})})}},{key:"_register_click_next_page",value:function(){var e=this;_.default.instance().next_page_button.on("click",function(){var t=e.current_page+1;return(0,y.default)('div.zetaprints-image-tabs li img[rel="page-'+t+'"]').parent().click(),!1})}},{key:"_register_click_edit_thumbnail",value:function(){(0,y.default)(".image-edit-thumb").on("click",this._get_edit_thumbnail_click_handler())}},{key:"_get_edit_thumbnail_click_handler",value:function(){var e=this.image_editor;return function(t){if(t.preventDefault(),!ae.default.environment().is_image_editing_enabled())return l.default.log("[PersonalizationForm] Image editing is disabled"),!1;var i=(0,y.default)(this),n=i.parent().children("input"),o=_.default.get_name_for_element(n),r=n.val(),a=i.children("img");return e.show(decodeURI(o),r,a),!1}}},{key:"_register_input_field_events",value:function(){new oe.default(this,_.default.instance().input_fields)}},{key:"_register_delete_button_click",value:function(){var e=this,t=this.data;(0,y.default)(".zp-delete-button").on("click",function(i){if(i.stopPropagation(),i.preventDefault(),confirm(delete_this_image_text)){var n=(0,y.default)(this).parents("td").children("input").val();e._delete_image(t,n)}return!1})}},{key:"_add_rotate_buttons",value:function(){var e=this;_.default.instance().select_image_elements_inputs.each(function(){var t=new ue.default(e,this);new pe.default(e,this).add(),t.add()})}},{key:"_register_image_click",value:function(){var e=this;_.default.instance().select_image_elements_inputs.on("click",function(t){var i=(0,y.default)(this),n=e.template_details.pages[e.current_page],o=n.images[_.default.get_name_for_element(i)],r=i.data("metadata");r?(r["img-id"]=i.val(),v.default.replace_metadata(o,r,!1)):v.default.clear_metadata(o,!1)})}},{key:"_register_palette_change",value:function(){var e=this,t=this.data;(0,y.default)(".zetaprints-palettes .zetaprints-field").on("change",function(){var i=(0,y.default)(this),n=i.attr("name").substring(12),o=i.val(),r=t.template_details.pages;e._map_pages(r,function(e){var t=r[e].fields;for(var i in t)if(t.hasOwnProperty(i)){var a=r[e].fields[i];""+a.palette==""+n&&v.default.replace_metadata(a,{"col-f":o})}var s=r[e].images;for(var l in s)if(s.hasOwnProperty(l)){var c=r[e].images[l];""+c.palette==""+n&&v.default.replace_metadata(c,{"col-f":o})}})})}},{key:"_register_in_dialog_lightbox",value:function(){var e=this;if(0!==(0,y.default)("a.in-dialog").length){l.default.debug("[Form] Register fancyBox on a.in-dialog");var t=this,i=t.data,n=new F.default({type:"image",opacity:!0,showOverlay:!1,transitionIn:"elastic",changeSpeed:200,speedIn:500,speedOut:500,showTitle:!1});n.willShow=function(){var t=!1;_.default.instance().update_preview_button.length&&(O.default.instance().call(O.default.feature.fancybox.updatePreview,function(){e.preview_controller._update_preview_button.remove()}),t=!0),_.default.instance().fancybox_resize.length&&O.default.instance().call(O.default.feature.fancybox.resizing,j.default.fancybox_resizing_hide),O.default.instance().call(O.default.feature.fancybox.selectImage,function(){e._select_image.add(i,t)})},O.default.instance().call(O.default.feature.fancybox.selectImage,function(){n.didShow=function(){e._select_image.update()},n.didClose=function(){e._select_image.remove()}});(new B.default).register("a.in-dialog",n)}}},{key:"_delete_image",value:function(e,t){y.default.ajax({url:e.url.image,type:"POST",data:"zetaprints-action=img-delete&zetaprints-ImageID="+t,error:function(e,t){alert(cant_delete_text+": "+t)},success:function(){(0,y.default)('input[value="'+t+'"]').parent().remove()}})}},{key:"_patch_product_add_to_cart",value:function(){var e=this;if("object"===r(window.productAddToCartForm)&&"function"==typeof window.productAddToCartForm.submit){var t=window.productAddToCartForm.submit;window.productAddToCartForm.submit=function(i,n){var o=window.notice_update_preview_after_data_changed,r=e.data.template_details.pages,a=e._page_get_changed(r);if(a.length>0&&confirm(o))return e.preview_controller.update_preview(e.data,a,!1),!1;t(i,n)}}else l.default.warn("Could not patch productAddToCartForm.submit() method")}},{key:"_map_pages",value:function(e,t){if("function"!=typeof t)throw new TypeError('Argument "callback" must be a function');for(var i in e)e.hasOwnProperty(i)&&t(i)}},{key:"_detect_initial_has_image_zoomer",value:function(e){return!(!(0,y.default)(e).hasClass("product-image-zoom")&&!(0,y.default)(e).parent().hasClass("product-image-zoom"))}},{key:"_prepare_text_field_editor",value:function(){if(O.default.instance().is_activated(O.default.feature.textFieldEditor)){var e=this.data;(0,y.default)(_.default.instance().input_fields_selector+" .zetaprints-field").filter(':input:not([type="hidden"])').each(function(){var t=(0,y.default)(this),i=t.parents(_.default.instance().input_fields_selector).attr("id").substring(18),n=e.template_details.pages[i].fields[_.default.get_name_for_element(t)],o=v.default.get_metadata(n,"col-f","");if(v.default.set_metadata(n,"col-f",void 0),"RGB"===n["colour-picker"]){var r=t.parents("dl").children("dt");ie.default.init(t,{button_parent:r,colour:o,change:function(e){var t={"col-f":e.color};v.default.replace_metadata(n,t)}})}})}}},{key:"_prepareQtip",value:function(){if(y.default.fn.qtip){var e=_.default.instance().input_fields_selector;(0,y.default)([e+" input[title]",e+" textarea[title]"].join(", ")).qtip({position:{corner:{target:"bottomLeft"}},show:{delay:1,solo:!0,when:{event:"focus"}},hide:{when:{event:"unfocus"}}}),(0,y.default)("div.zetaprints-page-stock-images select[title]").qtip({position:{corner:{target:"topLeft"},adjust:{y:-30}},show:{delay:1,solo:!0,when:{event:"focus"}},hide:{when:{event:"unfocus"}}})}}},{key:"_add_hidden_form_fields",value:function(e){var t=_.default.instance().product_form,i=V.default.export_previews_to_string(e);t.append((0,y.default)('<input type="hidden" name="zetaprints-previews" value="'+i+'" />'));var n=e.guid;t.append((0,y.default)('<input type="hidden" name="zetaprints-TemplateID" value="'+n+'" />'))}},{key:"_prepareImageFields",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t].images;for(var n in i)i.hasOwnProperty(n)&&i[n].value&&(0,y.default)("#stock-images-page-"+t).children('[title="'+n+'"]').removeClass("no-value")}}},{key:"_prepareComboBox",value:function(e){var t=_.default.instance().input_fields.find("select.zetaprints-field");for(var i in e)if(e.hasOwnProperty(i)){var n=e[i].fields;for(var o in n)n.hasOwnProperty(o)&&n[o].combobox&&t.filter('[name="zetaprints-_'+o+'"]').wrap('<div class="zetaprints-text-field-wrapper" />').combobox()}}},{key:"_enlarge_editor_click_handler",value:function(){var e=this.data.current_page;if(_.default.instance().fancybox_wrap.is(":visible"))y.default.fancybox.close();else{l.default.debug(this.preview_controller.get_preview_for_page_number(e)),this.preview_controller.get_preview_for_page_number(e).open_lightbox();var t=document.getElementById("preview-image-page-"+e);t?(l.default.debug("[Form] Trigger click on Preview Image Page for current page "+e),(0,y.default)(t).click()):l.default.warn("[Form] Preview Image Page for current page "+e+" not found")}}},{key:"_has_updated_pages",value:function(e){var t=void 0,i=e.pages;for(t in i)if(i.hasOwnProperty(t)&&e.pages[t]["updated-preview-image"])return!0;return!1}},{key:"_page_get_changed",value:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&V.default.is_user_data_changed(e[i])&&(t[t.length]=i);return t}},{key:"_prepare_metadata_from_page_number",value:function(e){var t=this.data.template_details.pages[e];return v.default.get_prepared_metadata_from_page(t,e)}},{key:"_get_add_to_cart_button",value:function(){return(0,y.default)("#product-addtocart-button, #zetaprints-add-to-cart-button")}},{key:"_show_image_edit_dialog",value:function(e,t,i){this.image_editor.show(decodeURI(e),t,i)}},{key:"_shape_update_state",value:function(e,t){if(t)return this.in_preview_edit_controller.mark_shape_as_edited(e);var i=e.name.split("; ");if(1===i.length)return this.in_preview_edit_controller.unmark_shape_as_edited(e);for(var n=(0,y.default)("#input-fields-page-"+zp.current_page).find("input, textarea, select").filter("textarea, select, :text, :checked"),o=(0,y.default)("#stock-images-page-"+zp.current_page).find("input").filter(":checked"),r=0;r<i.length;r++){var a=i[r];if(n.filter('[name="zetaprints-_'+a+'"]').val()||o.filter('[name="zetaprints-#'+a+'"]').length)return}this.in_preview_edit_controller.unmark_shape_as_edited(e)}},{key:"_register_notification_listeners",value:function(){var e=this;Y.default.instance().register(Z.default.USER_DATA_CHANGED,function(){e.preview_controller.update_preview(e.data)}).register(Z.default.USER_DATA_SAVED,function(){e.preview_controller.update_preview(e.data)})}},{key:"select_image",get:function(){return this._select_image}},{key:"template_details",get:function(){return this.data.template_details}},{key:"current_page",get:function(){return this.data.current_page}},{key:"is_fields_hidden",get:function(){return this.data.is_fields_hidden}},{key:"preview_sharing_links",get:function(){return this.data.preview_sharing_links}},{key:"is_personalization_step",get:function(){return this.data.is_personalization_step}},{key:"update_first_preview_on_load",get:function(){return this.data.update_first_preview_on_load}},{key:"preserve_fields",get:function(){return this.data.preserve_fields}},{key:"has_shapes",get:function(){return this.data.has_shapes}},{key:"w2p_url",get:function(){return this.data.w2p_url}},{key:"options",get:function(){return this.data.options}},{key:"url",get:function(){return this.data.url}},{key:"image_edit",get:function(){return this.data.image_edit}},{key:"has_image_zoomer",get:function(){return!!this._has_image_zoomer}}]),e}();t.default=fe,fe.shared_instance=null,fe.version="1.1.0"},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(1),c=n(l),u=i(9),d=n(u),p=i(10),f=n(p),h=i(2),g=n(h),_=i(3),m=n(_),v=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.url={},i.image_id="",i.page={width_in:0,height_in:0},i.image={},i.placeholder={},i.upload_image_by_url=function(){},i.shape=void 0,i.has_fit_in_field=!0,i.container={width:0,height:0},i.$selected_thumbnail={},i.$input={},i.save=function(){},i.reload_image=function(){},i._assign_properties(e),i}return a(t,e),s(t,[{key:"get_thumbnail_outlet",value:function(){return this.$selected_thumbnail}},{key:"merge",value:function(e){return new t(Object.assign({},this,e))}}],[{key:"create_from_input",value:function(e,i){g.default.assertInstanceOf(e,f.default),g.default.assertjQueryOrDomElement(i);var n=(0,c.default)(i),o=n.get(0);if(!o.name)throw new ReferenceError('Input element must have the property "name"');if(!o.value)throw new ReferenceError('Input element must have the property "value"');var r=o.name.substr(12),a=o.value;return t.create(e,r,a,n.siblings(".image-edit-thumb"))}},{key:"create",value:function(e,i,n,o){g.default.assertInstanceOf(e,f.default),g.default.assertjQuery(o,"image_thumbnail"),0===o.length&&m.default.warn("[ImageEditingContext] jQuery image thumbnail element is empty");var r=e.data,a=r.template_details.pages[r.current_page],s=new t({url:{image:r.url.image,user_image_template:r.url["user-image-template"]},$selected_thumbnail:o,
//!!! Temp solution
$input:o.parents().children("input.zetaprints-images"),image_id:n,page:{width_in:a["width-in"],height_in:a["height-in"]},placeholder:a.images[i],upload_image_by_url:e.upload_image_by_url});if(a.shapes&&(s.shape=a.shapes[i]),s.has_fit_in_field=!0,r.options["image-edit"]){var l=r.options["image-edit"];s.has_fit_in_field=!l["in-context"]||""+l["in-context"]["@enabled"]!="0"}return s.has_fit_in_field=s.has_fit_in_field&&void 0!==s.shape,s}}]),t}(d.default);t.default=v},function(e,t,i){var n,o,r;/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){var t=0,i=Array.prototype.slice;return e.cleanData=function(t){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{n=e._data(o,"events"),n&&n.remove&&e(o).triggerHandler("remove")}catch(e){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var o,r,a,s={},l=t.split(".")[0];t=t.split(".")[1];var c=l+"-"+t;return n||(n=i,i=e.Widget),e.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],r=e[l][t]=function(e,t){if(!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},e.extend(r,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){if(!e.isFunction(n))return void(s[t]=n);s[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}()}),r.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||t:t},s,{constructor:r,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var n,o,r=i.call(arguments,1),a=0,s=r.length;a<s;a++)for(n in r[a])o=r[a][n],r[a].hasOwnProperty(n)&&void 0!==o&&(e.isPlainObject(o)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],o):e.widget.extend({},o):t[n]=o);return t},e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(r){var a="string"==typeof r,s=i.call(arguments,1),l=this;return a?this.length||"instance"!==r?this.each(function(){var i,n=e.data(this,o);return"instance"===r?(l=n,!1):n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(i=n[r].apply(n,s),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}):l=void 0:(s.length&&(r=e.widget.extend.apply(null,[r].concat(s))),this.each(function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new n(r,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},n=t.split("."),t=n.shift(),n.length){for(o=a[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,o;for(i in t)o=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&o&&o.length&&(n=e(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function i(i,r){var a,s;for(s=0;s<i.length;s++)a=o.classesElementLookup[i[s]]||e(),a=e(t.add?e.unique(a.get().concat(t.element.get())):a.not(t.element).get()),o.classesElementLookup[i[s]]=a,n.push(i[s]),r&&t.classes[i[s]]&&n.push(t.classes[i[s]])}var n=[],o=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,function(n,o){-1!==e.inArray(t.target,o)&&(i.classesElementLookup[n]=e(o.not(t.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof e||null===e,r={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,a){function s(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?r[a]:a).apply(r,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.on(c,u,s):i.on(c,s)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i).off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var o,r,a=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(a)&&!1===a.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var a,s=o?!0===o||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),a=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),a&&e.effects&&e.effects.effect[s]?n[t](o):s!==t&&n[s]?n[s](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}}),e.widget})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(29),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.padding=0,i.type=null,i.href=null,i.autoCenter=!1,i.arrows=!1,i.closeClick=!1,i.showOverlay=!0,i.closeOnOverlayClick=!0,i.showCloseButton=!0,i.showTitle=!1,i._assign_properties(e),i}return r(t,e),t}(s.default);t.default=l},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n(this,e),e._instance)throw new ReferenceError("An instance of Environment was already created");e._instance=this,this._env=t}return o(e,null,[{key:"environment",value:function(){return e._instance||new e(window.WebToPrintEnv||{}),e._instance}}]),o(e,[{key:"is_image_editing_enabled",value:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)>=this.image_editing_min_viewport_width}},{key:"debug_mode",get:function(){return!0}},{key:"image_editing_min_viewport_width",get:function(){return 900}}]),e}();t.default=r,r._instance=null},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),s=n(a),l=i(2),c=n(l),u=i(11),d=n(u),p=i(28),f=n(p),h=i(60),g=n(h),_=function(){},m=function(e,t){return f.default.get_value_by_regexp(e,t)},v=function(){function e(){o(this,e)}return r(e,[{key:"rotate",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_;if(c.default.assertInstanceOf(e,d.default,"context"),c.default.assertFunction(i,"success"),c.default.assertFunction(n,"error"),c.default.assertString(t,"direction"),"left"===t)return this.rotate(e,"l",i,n);if("right"===t)return this.rotate(e,"r",i,n);if("l"!==t&&"r"!==t)throw new RangeError('Direction must be either "l" or "r"');return this._send_request(e,i,n,{"zetaprints-action":"img-rotate","zetaprints-Rotation":t,"zetaprints-ImageID":e.image_id})}},{key:"crop",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_;return c.default.assertInstanceOf(e,d.default,"context"),c.default.assertFunction(i,"success"),c.default.assertFunction(n,"error"),this._send_request(e,i,n,{"zetaprints-CropX1":t.selection.position.left/e.container.factor,"zetaprints-CropY1":t.selection.position.top/e.container.factor,"zetaprints-CropX2":(t.selection.position.left+t.selection.width)/e.container.factor,"zetaprints-CropY2":(t.selection.position.top+t.selection.height)/e.container.factor,"zetaprints-action":"img-crop","zetaprints-ImageID":e.image_id})}},{key:"process_image_details",value:function(e,t){c.default.assertString(t),c.default.assertInstanceOf(e,d.default);var i=new d.default(Object.assign({},e)),n=i.url.user_image_template.replace("image-guid.image-ext",m(t,/Thumb="([^"]*?)"/)),o=this._get_value_by_regexp_as_float_or_false(t,/ThumbWidth="([^"]*?)"/),r=this._get_value_by_regexp_as_float_or_false(t,/ThumbHeight="([^"]*?)"/),a=this._get_value_by_regexp_as_float_or_false(t,/ImageWidth="([^"]*?)"/),s=this._get_value_by_regexp_as_float_or_false(t,/ImageHeight="([^"]*?)"/),l=this._get_value_by_regexp_as_float_or_false(t,/ImageWidthUndo="([^"]*?)"/),u=this._get_value_by_regexp_as_float_or_false(t,/ImageHeightUndo="([^"]*?)"/);if(o&&r&&a&&s){var p=a/e.placeholder.width*e.placeholder.width_in;i.image={width:a,height:s,ratio:a/s,width_in:p,thumb_width:o,thumb_height:r,dpi:Math.round(a/p),placeholder_to_image_factor:e.placeholder.width/a}}return new g.default({context:i,source:n,preview_width:o,preview_height:r,width:a,height:s,undo_width:l,undo_height:u})}},{key:"_get_value_by_regexp_as_float_or_false",value:function(e,t){var i=m(e,t);return!1!==i&&parseFloat(i)}},{key:"_send_request",value:function(e,t,i,n){var o=this,r=e.url.image;return s.default.ajax({url:r,type:"POST",data:n,error:i,success:function(i){var n=o.process_image_details(e,i);t(i,n.context,n)}})}}]),e}();t.default=v},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(6),s=n(a),l=i(8),c=n(l),u=i(2),d=n(u),p=function(){function t(){o(this,t)}return r(t,null,[{key:"has_changed_fields_on_page",value:function(t){var i=e("#input-fields-page-"+t+", #stock-images-page-"+t);if(!i.length)return!1;var n=i.find('*[name^="zetaprints-_"], *[name^="zetaprints-#"]').filter("textarea, select, :text, :checked").filter("*[type!=hidden]"),o=n.length;if(!o)return!1;for(var r=0;r<o;r++)if(e(n[r]).val())return!0;return!1}},{key:"is_all_pages_updated",value:function(e){var t=void 0,i=e.pages;for(t in i)if(i.hasOwnProperty(t)&&!e.pages[t]["updated-preview-image"])return!1;return!0}},{key:"store_user_data",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=void 0,n=e.fields,o=e.images;for(i in n)n.hasOwnProperty(i)&&(n[i].value||(n[i].value=""),n[i].previous_value=n[i].value);for(i in o)o.hasOwnProperty(i)&&(o[i].value||(o[i].value="#"),o[i].previous_value=o[i].value);t&&s.default.instance().notify(c.default.USER_DATA_SAVED,{instance:this,fields:n,images:o,page:e})}},{key:"is_user_data_changed",value:function(e){var t=void 0,i=e.fields,n=e.images;for(t in i)if(i.hasOwnProperty(t)&&void 0!==i[t].previous_value&&i[t].previous_value!==i[t].value)return!0;for(t in n)if(n.hasOwnProperty(t)&&void 0!==n[t].previous_value&&n[t].previous_value!==n[t].value)return!0;return!1}},{key:"page_has_updating",value:function(e){for(var t in e)if(e.hasOwnProperty(t)&&void 0!==e[t].is_updating&&e[t].is_updating)return!0;return!1}},{key:"export_previews_to_string",value:function(e){var t="",i=void 0,n=e.pages;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];o["updated-preview-image"]&&(t+=","+o["updated-preview-image"].split("preview/")[1])}return t.substring(1)}},{key:"serialize_fields_for_page",value:function(t){return d.default.assertNumeric(t,"page_number"),e(["#input-fields-page-"+t,"#stock-images-page-"+t].join(", ")).find(".zetaprints-field").filter(':text, textarea, :checked, select, [type="hidden"]').serializeArray()}}]),t}();t.default=p}).call(t,i(0))},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(11),s=n(a),l=i(2),c=n(l),u=function(){function t(){o(this,t)}return r(t,[{key:"update_images_for_editing_context",value:function(e,t){return c.default.assertInstanceOf(e,s.default,"context"),this.update_images_with_id(e.image_id,t)}},{key:"update_images_with_id",value:function(t,i){var n=e('input[value="'+t+'"]').parent().find("img");return 0===n.length&&(n=e("#img"+t)),n.length>0&&(i.match(/\.jpg/m)?n.attr("src",i.replace(/\.(jpg|gif|png|jpeg|bmp)/i,"_0x100.jpg")):n.attr("src",i)),n}}]),t}();t.default=u}).call(t,i(0))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),s=n(a),l=i(4),c=n(l),u=i(3),d=n(u),p=i(2),f=n(p),h=i(68),g=n(h),_=i(62),m=n(_),v=i(30),b=n(v),y=i(7),w=n(y),k=i(20),x=n(k),C=i(16),E=n(C),T=i(29),z=n(T),O=i(53),P=n(O),j=i(21),S=n(j),A=function(){function e(t,i){o(this,e),this.form_instance=t,this.fake_add_to_cart_button=i,this.$_preview_placeholder=null,this._number_of_failed_updates=0,this._success=this._success.bind(this),this.update_preview=this.update_preview.bind(this),this._update_preview_error=this._update_preview_error.bind(this),this._update_preview_button=new P.default(this),this._preview_elements={}}return r(e,[{key:"get_preview_for_page_number",value:function(e){if(isNaN(parseInt(e,10)))throw new TypeError('Expected argument page_number to be convertible into type "number", "'+e+'" given');return this._preview_elements[""+e]}},{key:"_get_preview_for_page_guid",value:function(e){return f.default.assertString(e),this._preview_elements[e]}},{key:"add_previews",value:function(e){d.default.debug("[PreviewController] Add previews");var t=e.template_details.pages;for(var i in t)if(t.hasOwnProperty(i)){var n=new g.default(e,parseInt(i,10),this,this._get_lightbox_callbacks());this._preview_elements[""+i]=n,n.show()}}},{key:"image_on_load_callback",value:function(e,t,i,n){var o=this,r=c.default.instance(),a=this.form_instance,l=a.has_image_zoomer;this._remove_preview_placeholder();var u=r.next_page_button,d=r.product_image_box,p=r.enlarge_button,f=r.update_preview_form_button,h=r.preview_overlay;h.remove_no_preview(),a.can_show_next_page_button_for_page(e.current_page,e)?u.show():u.hide();var g=e.template_details.pages,_=g[t];if(void 0===_.preview_is_scaled){var m=(0,s.default)(i).clone().css({position:"absolute",left:"-10000px"}).appendTo("body");_.preview_is_scaled=m.width()>d.width(),m.remove()}if(!l){1===t&&1===e.current_page&&c.default.instance().show(this.get_preview_for_page_number(1).element);var v=g[e.current_page];t!==e.current_page||v.preview_is_scaled||c.default.instance().hide(p)}_.is_updating=!1,E.default.page_has_updating(g)||(f.unbind("click"),f.on("click",function(){o.update_preview(o.form_instance.data)}),h.hide())}},{key:"update_preview",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d.default.debug("[PreviewController] Update preview"),f.default.assertObject(e);var o=this.form_instance,r=void 0===i||0===i.length?e.current_page:i.shift();if(void 0===r)return void d.default.warn("[PreviewController] Could not detect current page");var a=c.default.instance();if(a.update_preview_form_button.unbind("click"),a.preview_overlay.show(),w.default.instance().is_activated(w.default.feature.textFieldEditor)){var l=a.input_fields_selector;(0,s.default)([l+" input",l+" textarea"].join(", ")).each(function(){S.default.hide(this)})}var u=e.template_details.pages[r],p=o._prepare_metadata_from_page_number(r);u.is_updating=!0,p[p.length]={name:"zetaprints-TemplateID",value:e.template_details.guid},p[p.length]={name:"zetaprints-From",value:r},n&&(p[p.length]={name:"zetaprints-Preserve",value:"yes"}),s.default.ajax({url:e.url.preview,type:"POST",dataType:"json",data:s.default.param(p),error:function(){t._update_preview_error(u)},success:function(o){t._success(new b.default(u),r,new m.default(o),i,n,e)}})}},{key:"_get_lightbox_callbacks",value:function(){var e=this,t=this.form_instance,i=t.data,n=t.in_preview_edit_controller,o=t.shape_repository,r=t.image_editor,a=function(t){var r=c.default.instance(),a=w.default.instance();if(r.fancybox_image.attr("title",click_to_close_text),
//!!! Needs to be implemented via zp object.
//!!! Page state should be saved in page object.
E.default.has_changed_fields_on_page(i.current_page)?r.fancybox_outer.addClass("modified"):r.fancybox_outer.removeClass("modified"),a.call(w.default.feature.fancybox.resizing,x.default.fancybox_resizing_add,t),a.call(w.default.feature.fancybox.updatePreview,function(){e._update_preview_button.update()}),!1!==(i.has_shapes&&a.is_activated(w.default.feature.inPreviewEdit))){var s=r.fancybox_content;if(n.place_all_shapes_for_page(o.get_shapes_of_current_page(),s,function(e){n.fancy_shape_handler(e)}),i._shape_to_show){var l=o.get_shape(i.current_page,i._shape_to_show);i._shape_to_show=void 0,n.highlight_shape(l,s),n.popup_field_by_name(l.name,void 0,l._fields?l._fields:l.name)}}},l=function(){c.default.instance().select_image_button.length&&w.default.instance().call(w.default.feature.fancybox.selectImage,function(){t.select_image.remove()}),r.save_image_button.button&&w.default.instance().call(w.default.feature.fancybox.saveImageButton,function(){r.save_image_button.remove()}),i.template_details.pages[i.current_page].static||w.default.instance().call(w.default.feature.fancybox.updatePreview,function(){e._update_preview_button.add(i)})},u=function(){w.default.instance().call(w.default.feature.fancybox.updatePreview,function(){e._update_preview_button.remove()}),w.default.instance().call(w.default.feature.fancybox.resizing,x.default.fancybox_resizing_hide)},d=function(){i.has_shapes&&w.default.instance().is_activated(w.default.feature.inPreviewEdit)&&((0,s.default)("div.zetaprints-field-shape",c.default.instance().fancybox_content).removeClass("highlighted"),n.popdown_field_by_name())};return new z.default({willShow:l,willClose:d,didClose:u,didShow:function(){a(this)}})}},{key:"_update_preview_error",value:function(e){var t=this;++this._number_of_failed_updates>=2?(alert(cannot_update_preview_second_time),(0,s.default)("div.zetaprints-notice.to-update-preview").addClass("zp-hidden"),this.fake_add_to_cart_button.remove(),(0,s.default)("div.save-order span").css("display","none")):alert(cannot_update_preview);var i=c.default.instance();i.update_preview_form_button.click(function(){d.default.log("Should update preview"),t.update_preview(t.form_instance.data)}),e.is_updating=!1,i.preview_overlay.hide()}},{key:"_success",value:function(e,t,i,n,o,r){var a=this.form_instance;if(!i)return void this._update_preview_error(e);
//!!! Make code in function to not depend on current page number
//!!! (it's broken way to update preview, user can switch to another
//!!! page while updating preview)
//!!! Go throw template details and update previews which has updated
//!!! preview images (updated-preview-image field)
//!!! Use updated-preview-image and updated-thumb-image instead
//!!! updated-preview-url and updated-preview-url
//!!! Make urls in controller
var l=i.pages,u=this.template_details.pages,d=c.default.instance().fancybox_image;d.length&&(0,s.default)(d).attr("src",l[t]["updated-preview-url"]);for(var p in l)if(l.hasOwnProperty(p)){var f=l[p];this._update_current_data(f,u[p]);var h=f["updated-preview-url"];if(!h)continue;var g=parseInt(p,10);if(isNaN(g))throw new TypeError("Page number could not be converted to int");var _=this._get_preview_for_page_guid(""+p);_&&_.update_url(h),this._update_thumbnails(g,l);var m=f["updated-preview-image"].split("preview/")[1];this.update_preview_sharing_link_for_page(r,g,m)}a.has_image_zoomer&&(a.disable_image_zoomer(),this.add_preview_placeholder()),window.place_preview_image_sharing_link&&a.set_preview_sharing_link_for_page(t,r.preview_sharing_links),this._store_user_data(r,e),void 0!==n&&n.length>0&&this.update_preview(r,n,o)}},{key:"_store_user_data",value:function(e,t){var i=c.default.instance();if(i.product_form.user_data_changed=!1,E.default.is_all_pages_updated(e.template_details)||"include"===e.template_details.missed_pages||""===e.template_details.missed_pages){(0,s.default)('input[name="zetaprints-previews"]').val(E.default.export_previews_to_string(e.template_details)),i.hide((0,s.default)("div.zetaprints-notice.to-update-preview")),this.fake_add_to_cart_button.remove(),(0,s.default)("div.save-order span").css("display","none");var n=e.template_details.pages;for(var o in n)n.hasOwnProperty(o)&&E.default.store_user_data(n[o],!1)}else E.default.store_user_data(t,!1)}},{key:"_update_current_data",value:function(e,t){e["updated-preview-image"]&&(t["updated-preview-image"]=e["updated-preview-image"],t["updated-preview-url"]=e["updated-preview-url"]),e["updated-thumb-image"]&&(t["updated-thumb-image"]=e["updated-thumb-image"],t["updated-thumb-url"]=e["updated-thumb-url"])}},{key:"_update_thumbnails",value:function(e,t){(0,s.default)("div.zetaprints-image-tabs img").filter('[rel="page-'+e+'"]').attr("src",t[e]["updated-thumb-url"])}},{key:"update_preview_sharing_link_for_page",value:function(e,t,i){window.place_preview_image_sharing_link&&(e.preview_sharing_links[t]=preview_image_sharing_link_template+i)}},{key:"_remove_preview_placeholder",value:function(){this.$_preview_placeholder&&this.$_preview_placeholder.remove(),this.$_preview_placeholder=null}},{key:"add_preview_placeholder",value:function(){this.$_preview_placeholder=(0,s.default)('<div id="zp-preview-placeholder" />').appendTo(c.default.instance().product_image_gallery)}},{key:"template_details",get:function(){return this.form_instance.data.template_details}}]),e}();t.default=A},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=i(4),u=n(c),d=i(2),p=n(d),f=i(18),h=n(f),g=i(22),_=n(g),m=i(50),v=n(m),b=function(e){function t(e){o(this,t),p.default.assertInstanceOf(e,h.default);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._close_button=null,i._in_preview=!1,i._on_click=i._on_click.bind(i),i}return a(t,e),s(t,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(this._button)return!1;this._in_preview=t;var r=this._create_button(e,t,n,o);if(void 0===r.jquery)throw new TypeError("The return type of _create_button() must be jQuery element");if(r.click(function(){i._on_click(e)}),t){var a=this._build_get_share_name_callback(e,t,n,o);if("function"!=typeof a)throw new TypeError("The return type of _build_get_shape_name_callback() must be function");this._close_button=new v.default(this._controller,a)}return this._button=r,!0}},{key:"remove",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this._get_outer().removeClass("saved")}},{key:"_create_button",value:function(e,t,i,n){throw new Error("Not implemented")}},{key:"_build_get_share_name_callback",value:function(e,t,i,n){throw new Error("Not implemented")}},{key:"_get_outer",value:function(){return u.default.instance().fancybox_outer}},{key:"_on_click",value:function(e){throw new Error("Not implemented")}}]),t}(_.default);t.default=b},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),s=n(a),l=i(4),c=n(l),u=function(){function e(){o(this,e)}return r(e,null,[{key:"fancybox_resizing_add",value:function(t){var i=(0,s.default)(c.default.instance().fancybox_image_selector),n=i.height(),o=i.width(),r=t.width,a=t.height,l=c.default.instance().fancybox_resize;if(r>o&&"image"===t.type&&!l.length){var u=c.default.instance().fancybox_outer;l=(0,s.default)('<div id="fancybox-resize"><a class="maximize" style="display: none;"></a><a class="restore" style="display: none;"></a></div>'),u.append(l),l.data({height:n,width:o,img_orig_width:r,img_orig_height:a}),c.default.instance().fancybox_close_button.addClass("resizer-tweaks"),(0,s.default)("a",l).each(function(){(0,s.default)(this).hasClass("maximize")&&(0,s.default)(this).show(),(0,s.default)(this).click(function(){var t=(0,s.default)(this);t.hide();var i=c.default.instance().fancybox_resize.data(),n=i.img_orig_width-i.width,o=i.img_orig_height-i.height;t.hasClass("maximize")?(e.fancybox_resizing_resize(n,o),(0,s.default)("a.restore",l).first().show()):t.hasClass("restore")&&(e.fancybox_resizing_resize(-n,-o),(0,s.default)("a.maximize",l).first().show())})})}else l.length>0&&a===n?(l.remove(),c.default.instance().fancybox_close_button.removeClass("resizer-tweaks")):a>n&&(l.data({width:o,height:n,img_orig_width:r,img_orig_height:a}).show(),(0,s.default)("a.restore",l).hide(),(0,s.default)("a.maximize",l).show())}},{key:"fancybox_resizing_hide",value:function(){c.default.instance().fancybox_resize.hide(),c.default.instance().fancybox_close_button.removeClass("resizer-tweaks")}},{key:"fancybox_resizing_resize",value:function(t,i){var n=c.default.instance().fancybox_wrap;n.width(n.width()+t),n.height(n.height()+i);var o=e._fancybox_get_content_container();o.width(o.width()+t),o.height(o.height()+i),"function"==typeof s.default.fancybox.center?s.default.fancybox.center(!0):"function"==typeof s.default.fancybox.reposition&&s.default.fancybox.reposition()}},{key:"_fancybox_get_content_container",value:function(){return(0,s.default)("#fancybox-content, #fancybox-inner",c.default.instance().fancybox_content)}}]),e}();t.default=u},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(2),s=n(a),l=i(73),c=n(l),u=function(){function t(){o(this,t)}return r(t,null,[{key:"move",value:function(t,i){s.default.assertjQueryOrDomElement(t);var n=e(t).data("text-field-editor");n&&n.move(i)}},{key:"hide",value:function(t){s.default.assertjQueryOrDomElement(t);var i=e(t).data("text-field-editor");i&&i.hide()}},{key:"init",value:function(t,i){s.default.assertjQueryOrDomElement(t),s.default.assertObject(i),e(t).data("text-field-editor",new c.default(t,i))}}]),t}();t.default=u}).call(t,i(0))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(3),s=n(a),l=i(2),c=n(l),u=function(){function e(t){o(this,e),c.default.assertObject(t,"controller"),this._controller=t,this._button=null,this._assert_method_exists("add"),this.add=this.add.bind(this),this._assert_method_exists("update"),this.update=this.update.bind(this),this._assert_method_exists("remove"),this.remove=this.remove.bind(this)}return r(e,[{key:"add",value:function(){throw new Error("Not implemented")}},{key:"update",value:function(){throw new Error("Not implemented")}},{key:"remove",value:function(){this._button?(s.default.debug("[AbstractButton] Remove button"),this._button.remove(),this._button=null):s.default.warn("[AbstractButton] Button element does not exist")}},{key:"_assert_method_exists",value:function(e){if("function"!=typeof this[""+e])throw new Error("Missing implementation for method "+e)}},{key:"button",get:function(){return this._button}}]),e}();t.default=u},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),s=n(a),l=i(13),c=n(l);s.default.fancybox.defaults.ajax.headers={};var u=function(){function e(){o(this,e)}return r(e,[{key:"_prepare_options",value:function(t){t instanceof c.default||(t=new c.default(t));var i=e._get_version();if(2===i)return this._prepare_options_for_v2(t);if(1===i)return this._prepare_options_for_v1(t);throw new Error("No matching fancyBox version found")}},{key:"_prepare_options_for_v1",value:function(e){var t=s.default.extend(!0,{},e);return t.centerOnScroll=e.autoCenter,t.showNavArrows=e.arrows,t.hideOnContentClick=e.closeClick,t.overlayShow=e.showOverlay,t.hideOnOverlayClick=e.closeOnOverlayClick,t.titleShow=e.showTitle,t.onStart=e.willShow,t.onComplete=e.didShow,t.onCleanup=e.willClose,t.onClosed=e.didClose,t.showCloseButton=e.showCloseButton,t}},{key:"_prepare_options_for_v2",value:function(e){var t=s.default.extend(!0,{},e);return e.showTitle||(t.helpers=s.default.extend(!0,{},t.helpers,{title:null})),e.closeOnOverlayClick||(t.helpers=s.default.extend(!0,{},t.helpers,{overlay:{closeClick:!1}})),e.showOverlay||(t.helpers=s.default.extend(!0,{},t.helpers,{overlay:null})),t.closeBtn=e.showCloseButton,t.beforeShow=e.willShow,t.afterShow=e.didShow,t.beforeClose=e.willClose,t.afterClose=e.didClose,t}}],[{key:"redraw",value:function(){var t=e._get_version();2===t?s.default.fancybox.update():1===t&&s.default.fancybox.resize()}},{key:"close",value:function(){s.default.fancybox.close()}},{key:"_get_version",value:function(){var e=s.default.fancybox;return"string"==typeof e.version?parseInt(e.version,10):1}}]),e}();t.default=u},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(1),c=n(l),u=i(3),d=n(u),p=i(13),f=n(p),h=i(23),g=n(h),_=function(t){function i(){return o(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return a(i,t),s(i,[{key:"register",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;d.default.debug("[Lightbox] Register",t),e.migrateMute=!0,(0,c.default)(t).fancybox(this._prepare_options(i||new f.default)),e.migrateMute=!1}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;d.default.debug("[Lightbox] Open"),c.default.fancybox(this._prepare_options(e||new f.default))}}]),i}(g.default);t.default=_}).call(t,i(0))},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(3),s=n(a),l=i(39),c=n(l),u=i(11),d=n(u),p=i(7),f=n(p),h=i(51),g=n(h),_=i(20),m=n(_),v=i(67),b=n(v),y=i(4),w=n(y),k=function(){function t(i){if(o(this,t),!i)throw new ReferenceError('Missing argument "personalization_form_instance"');this.personalization_form_instance=i,this.show=this.show.bind(this),this.$=e,this.image_editor=new c.default(this),this._save_image_button=new g.default(i.preview_controller)}return r(t,[{key:"show",value:function(e,t,i){s.default.debug("[ImageEditorController] ImageEditor show",e,t,i),new b.default(this.personalization_form_instance.url["edit-image-template"]+t,this).open(e,t,i)}},{key:"on_fancybox_complete",value:function(e,t,i){s.default.debug("[ImageEditorController] Fancybox complete",e,t,i);var n=this.personalization_form_instance,o=n.data;this._add_buttons(o,e,t);var r=d.default.create(n,e,t,i);o.image_edit=r,this.image_editor.load(r)}},{key:"_add_buttons",value:function(e,t,i){var n=this;w.default.instance().fancybox_overlay.css("z-index",1103);var o=!1;w.default.instance().update_preview_button.length&&(f.default.instance().call(f.default.feature.fancybox.updatePreview,function(){n.personalization_form_instance.preview_controller._update_preview_button.remove()}),o=!0),w.default.instance().fancybox_resize.length&&f.default.instance().call(f.default.feature.fancybox.resizing,m.default.fancybox_resizing_hide),f.default.instance().call(f.default.feature.fancybox.saveImageButton,function(){n._save_image_button.add(e,o,t,i)})}},{key:"save_image_button",get:function(){return this._save_image_button}}]),t}();t.default=k}).call(t,i(0))},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(4),s=n(a),l=i(3),c=n(l),u=i(7),d=n(u),p=i(10),f=n(p),h=i(2),g=n(h),_=i(6),m=n(_),v=i(8),b=n(v),y=function(){function t(e){o(this,t),g.default.assertInstanceOf(e,f.default,"personalization_form"),this._controller=e}return r(t,[{key:"register_fields",value:function(t){var i=this;g.default.assertjQueryOrDomElement(t);var n=t,o=this.constructor.name?this.constructor.name+" extends ImageSelectionController":"ImageSelectionController (subclass)";return c.default.log("["+o+"] Register "+n.length+" fields"),n.on("change",function(t){c.default.log("["+o+"] Change"),i._handle_image_selection_change(e(t.target))}),this}},{key:"_handle_image_selection_change",value:function(e){var t=this,i=s.default.get_name_for_element(e),n=e.val(),o=!!n.length,r=s.default.instance().product_form,a=this._controller.data,l=a.template_details.pages[a.current_page],u=l.images[i];u?(u.value=n,void 0!==u.previous_value&&(r.user_data_changed=u.previous_value!==n)):c.default.warn("[ImageSelector] No image data for image key "+i);var p=this._get_selector_for_target(e),f=s.default.instance().fancybox_outer;o?(p.removeClass("no-value"),f.addClass("modified"),r.modified=!0,d.default.instance().call(d.default.feature.inPreviewEdit,function(){t._get_in_preview_edit_controller().mark_shape_as_edited(l.shapes[i])})):(p.addClass("no-value"),f.removeClass("modified"),d.default.instance().call(d.default.feature.inPreviewEdit,function(){t._get_in_preview_edit_controller().unmark_shape_as_edited(l.shapes[i])})),m.default.instance().notify(b.default.USER_DATA_CHANGED,{instance:this,image:u})}},{key:"_get_selector_for_target",value:function(e){var t=e.parents(s.default.instance().select_image_elements_selector);if(0<t.length)return t;var i=e.parents(".selector-content").data("in-preview-edit");if(!i)throw new ReferenceError("Could not detect selector element");return i.parent}},{key:"_get_in_preview_edit_controller",value:function(){return this._controller.in_preview_edit_controller}}]),t}();t.default=y}).call(t,i(0))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),l=n(s),c=i(16),u=n(c),d=i(6),p=n(d),f=i(8),h=n(f),g=function(){function e(){o(this,e)}return a(e,null,[{key:"set_metadata",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return l.default.assertObject(t,"field"),i?"object"===(void 0===i?"undefined":r(i))?void e.replace_metadata(t,i,o):(t.metadata||(t.metadata={}),t.metadata[i]=n,void(o&&p.default.instance().notify(h.default.USER_DATA_CHANGED,{field:t,key:i,value:n||i}))):void e.clear_metadata(t,o)}},{key:"replace_metadata",value:function(t,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(l.default.assertObject(t,"field"),!i)return void e.clear_metadata(t,n);l.default.assertObject(i,"metadata"),"object"===(void 0===i?"undefined":r(i))&&(t.metadata=i),n&&p.default.instance().notify(h.default.USER_DATA_CHANGED,{field:t,metadata:i})}},{key:"get_metadata",value:function(e,t,i){return l.default.assertObject(e,"field"),e.metadata&&e.metadata[t]?e.metadata[t]:i}},{key:"clear_metadata",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l.default.assertObject(e,"field"),e.metadata=void 0,t&&p.default.instance().notify(h.default.USER_DATA_CHANGED,{field:e})}},{key:"get_prepared_metadata_from_page",value:function(t,i){return l.default.assertNumeric(i,"page_number"),e._prepare_metadata_from_page(t,e._prepare_post_data_for_php(u.default.serialize_fields_for_page(i)))}},{key:"_convert_metadata_to_string",value:function(e){l.default.assertObject(e,"field");var t=e.metadata;if(!t)return null;var i=[];for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&i.push(n+"="+t[n]);return i.join(";")}},{key:"_prepare_string_for_php",value:function(e){return e.replace(/\./g,"\n")}},{key:"_prepare_post_data_for_php",value:function(t){for(var i=0,n=t.length;i<n;i++)t[i].name=e._prepare_string_for_php(t[i].name);return t}},{key:"_prepare_metadata_from_page",value:function(t,i){var n=void 0,o=void 0,r=i.length,a=t.images;for(o in a)a.hasOwnProperty(o)&&(n=e._convert_metadata_to_string(a[o]))&&(i[r++]={name:"zetaprints-*#"+e._prepare_string_for_php(o),value:n});var s=t.fields;for(o in s)s.hasOwnProperty(o)&&(n=e._convert_metadata_to_string(s[o]))&&(i[r++]={name:"zetaprints-*_"+e._prepare_string_for_php(o),value:n});return i}}]),e}();t.default=g},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e)}return o(e,null,[{key:"get_value_by_regexp",value:function(e,t){var i=e.match(t);return null!==i&&(i.length>2?i:i[1])}}]),e}();t.default=r},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(9),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=function(){};return i.willShow=r,i.didShow=r,i.willClose=r,i.didClose=r,i._assign_properties(e),i}return r(t,e),t}(s.default);t.default=l},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(61),c=n(l),u=i(9),d=n(u),p=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.name=void 0,i.fields=void 0,i.static=void 0,i.is_updating=void 0,i.preview_is_scaled=void 0,i["preview-image"]=void 0,i["thumb-image"]=void 0,i["width-in"]=void 0,i["height-in"]=void 0,i["width-cm"]=void 0,i["height-cm"]=void 0,i["preview-url"]=void 0,i["thumb-url"]=void 0,i.shapes=void 0,i.images=void 0,void 0!==e.shapes&&(e.shapes=i._transform_shapes(e.shapes)),i._assign_properties(e),i}return a(t,e),s(t,[{key:"_transform_shapes",value:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=new c.default(e[i]));return t}}]),t}(d.default);t.default=p},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.personalisation_form=t}return r(e,[{key:"get_shapes",value:function(e){if(isNaN(parseInt(e,10)))throw new TypeError('Argument "page_number" must be of type "number"');var t=this.personalisation_form.data.template_details.pages;if("object"===o(t[e]))return t[e].shapes}},{key:"get_shapes_of_current_page",value:function(){var e=this.personalisation_form.data.current_page;if(e)return this.get_shapes(e)}},{key:"get_shape",value:function(e,t){if("string"!=typeof t)throw new TypeError('Argument "name" must be of type "string"');var i=this.get_shapes(e);if(i)return i[t]}}]),e}();t.default=a},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=i(22),u=n(c),d=i(2),p=n(d),f=i(11),h=n(f),g=i(10),_=n(g),m=i(15),v=n(m),b=i(17),y=n(b),w=i(6),k=n(w),x=i(8),C=n(x),E=function(t){function i(e,t){o(this,i),p.default.assertInstanceOf(e,_.default);var n=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return p.default.assertjQueryOrDomElement(t),n._controller=e,n._image_editing_context=h.default.create_from_input(e,t),n._image_manipulation_service=new v.default,n._image_thumbnail_service=new y.default,n._on_click=n._on_click.bind(n),n}return a(i,t),s(i,[{key:"add",value:function(){var e=this;if(this._button)return!1;var t=this._create_button();if(void 0===t.jquery)throw new TypeError("The return type of _create_button() must be jQuery element");return t.click(function(t){e._on_click(t)}),t.appendTo(this._get_parent()),this._button=t,!0}},{key:"remove",value:function(){l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"remove",this).call(this)}},{key:"_create_button",value:function(){return e('<div class="zp-button zp-rotate-button '+this._get_class_name()+'" title="'+this._get_title()+'">'+this._get_text()+"</div>")}},{key:"_get_parent",value:function(){return this._image_editing_context.get_thumbnail_outlet().children(".buttons-row")}},{key:"_on_click",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this._image_manipulation_service.rotate(this._image_editing_context,this._get_direction(),function(e,i,n){t._image_editing_context=i,t._image_thumbnail_service.update_images_for_editing_context(i,n.source),k.default.instance().notify(C.default.USER_DATA_CHANGED,{image_editing_context:i}),k.default.instance().notify(C.default.USER_DATA_SAVED,{image_editing_context:i})})}},{key:"_get_title",value:function(){throw new Error("Not implemented")}},{key:"_get_text",value:function(){throw new Error("Not implemented")}},{key:"_get_class_name",value:function(){throw new Error("Not implemented")}},{key:"_get_direction",value:function(){throw new Error("Not implemented")}}]),i}(u.default);t.default=E}).call(t,i(0))},function(e,t,i){var n,o,r;!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.ui.plugin={add:function(t,i,n){var o,r=e.ui[t].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(e,t,i,n){var o,r=e.plugins[t];if(r&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,i)}}})},function(e,t,i){var n,o,r;!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}})},function(e,t,i){var n,o,r;/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(79),i(5),i(12)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,r=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,i.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})},function(e,t,i){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var i=arguments[t];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e})},function(e,t,i){(function(e){/*!
 * jQuery UI Touch Punch 0.2.3w - WPXP Edition
 *
 * Copyright 2011â2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * WPXP Edition - by Manuel Gumpinger
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(e){function t(t,i){if(!(t.originalEvent.touches.length>1)){var n=t.originalEvent.changedTouches[0],o=document.createEvent("MouseEvents");o.initMouseEvent(i,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e(n.target).is("input")||e(n.target).is("textarea")||e(n.target).is("p")?t.stopPropagation():(t.preventDefault(),t.target.dispatchEvent(o))}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,n,o,r,a=e.ui.mouse.prototype,s=a._mouseInit,l=a._mouseDestroy;a._touchStart=function(e){var a=this;!o&&a._mouseCapture(e.originalEvent.changedTouches[0])&&(o=!0,r=!1,i=e.originalEvent.touches[0].screenX,n=e.originalEvent.touches[0].screenY,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},a._touchMove=function(e){if(o){var a=e.originalEvent.touches[0].screenX,s=e.originalEvent.touches[0].screenY;if(i>=a-2&&i<=a+2&&n>=s-2&&n<=s+2)return void(r=!1);r=!0,t(e,"mousemove")}},a._touchEnd=function(e){o&&(t(e,"mouseup"),t(e,"mouseout"),r||t(e,"click"),o=!1)},a._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),s.call(t)},a._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),l.call(t)}}}(e)}).call(t,i(0))},function(e,t,i){var n,o;/*!
 * jQuery Browser Plugin 0.1.0
 * https://github.com/gabceb/jquery-browser-plugin
 *
 * Original jquery-browser code Copyright 2005, 2015 jQuery Foundation, Inc. and other contributors
 * http://jquery.org/license
 *
 * Modifications Copyright 2015 Gabriel Cebrian
 * https://github.com/gabceb
 *
 * Released under the MIT license
 *
 * Date: 05-07-2015
 */
!function(r){n=[i(0)],void 0!==(o=function(e){return r(e)}.apply(t,n))&&(e.exports=o)}(function(e){"use strict";function t(e){void 0===e&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],i=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],n={},o={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:i[0]||""};if(o.browser&&(n[o.browser]=!0,n.version=o.version,n.versionNumber=parseInt(o.versionNumber,10)),o.platform&&(n[o.platform]=!0),(n.android||n.bb||n.blackberry||n.ipad||n.iphone||n.ipod||n.kindle||n.playbook||n.silk||n["windows phone"])&&(n.mobile=!0),(n.cros||n.mac||n.linux||n.win)&&(n.desktop=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),n.rv||n.iemobile){o.browser="msie",n.msie=!0}if(n.edge){delete n.edge;o.browser="msedge",n.msedge=!0}if(n.safari&&n.blackberry){o.browser="blackberry",n.blackberry=!0}if(n.safari&&n.playbook){o.browser="playbook",n.playbook=!0}if(n.bb){var r="blackberry";o.browser=r,n[r]=!0}if(n.opr){o.browser="opera",n.opera=!0}if(n.safari&&n.android){o.browser="android",n.android=!0}if(n.safari&&n.kindle){o.browser="kindle",n.kindle=!0}if(n.safari&&n.silk){o.browser="silk",n.silk=!0}return n.name=o.browser,n.platform=o.platform,n}return window.jQBrowser=t(window.navigator.userAgent),window.jQBrowser.uaMatch=t,e&&(e.browser=window.jQBrowser),window.jQBrowser})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(3),s=n(a),l=i(1),c=n(l),u=i(57),d=n(u),p=i(7),f=n(p),h=i(58),g=n(h),_=i(4),m=n(_),v=i(6),b=n(v),y=i(27),w=n(y),k=i(2),x=n(k),C=i(25),E=n(C),T=i(15),z=n(T),O=i(11),P=n(O),j=i(28),S=(n(j),i(17)),A=n(S),D=function(){s.default.log("[ImageEditor] fancybox show activity");var e=c.default.fancybox;"function"==typeof e.showLoading?e.showLoading():"function"==typeof e.showActivity?e.showActivity():s.default.error("[ImageEditor] No method found to show the fancyBox activity")},M=function(){s.default.log("[ImageEditor] fancybox hide activity");var e=c.default.fancybox;"function"==typeof e.hideLoading?e.hideLoading():"function"==typeof e.hideActivity?e.hideActivity():s.default.error("[ImageEditor] No method found to hide the fancyBox activity")},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1103;m.default.instance().fancybox_overlay.css("z-index",e)},N=function(){function e(t){o(this,e),x.default.assertInstanceOf(t,E.default,"controller"),this._controller=t,this._context=null,this._user_image=null,this._cropping_callback=this._cropping_callback.bind(this),this._image_manipulation_service=new z.default,this._image_thumbnail_service=new A.default}return r(e,[{key:"load",value:function(e){var t=this;this.set_current_context(e);var i=this._container=(0,c.default)(".zetaprints-image-edit");this._show_activity(),this._load_image(e.image_id),this._initialize_info_bar(e),e.has_fit_in_field?this._prepare_fit_into_buttons(e):i.addClass("no-dpi").children(".zetaprints-image-edit-menu").children(".fit-to-field-button-wrapper, .note").hide();var n=(0,c.default)("#zetaprints-image-edit-container");this._user_image=(0,c.default)("#zetaprints-image-edit-user-image"),this._user_image.on("load",function(){i.hasClass("crop-mode")||!e.has_fit_in_field?t._crop_button_click_handler():i.hasClass("fit-to-field-mode")?t._fit_to_field_button_click_handler():i.hasClass("editor-mode")&&t._show_image_editor(),t._hide_activity()}),e.container={width:n.width()-2,height:n.height()-2},(0,c.default)("#crop-button").click(function(){t._crop_button_click_handler()}),(0,c.default)("#fit-to-field-button").click(function(){t._fit_to_field_button_click_handler()}),(0,c.default)("#undo-button").click(function(){t._restore_image()}),(0,c.default)("#zp-image-edit-action-cancel").click(function(){i.hasClass("changed")&&i.hasClass("crop-mode")?t._crop_button_click_handler():t._fit_to_field_button_click_handler(!0)}),(0,c.default)("#rotate-right-button").click(function(){t._server_side_rotation("r")}),(0,c.default)("#rotate-left-button").click(function(){t._server_side_rotation("l")}),(0,c.default)("#delete-button").click(function(){t._delete_image()}),(0,c.default)("#image-editor-button").click(function(){t._image_editor_button_handler()}),e.save=function(){s.default.debug("Invoked save on _context"),t.save()},e.reload_image=function(e){s.default.debug("Invoked reload_image on _context"),t.reload_image(e)}}},{key:"set_current_context",value:function(e){return x.default.assertInstanceOf(e,P.default),s.default.debug("[ImageEditor] Set current context",e),e.image&&0!==Object.keys(e.image).length||s.default.warn("[ImageEditor] Current context has no image property",e),this._context=e,this}},{key:"update_current_context",value:function(e){var t=this._context.merge(e);return this.set_current_context(t),t}},{key:"reload_image",value:function(e){s.default.log("[ImageEditor] Reload image #"+e+" "+this._context.url.image),this._load_image(e)}},{key:"close",value:function(){b.default.instance().notify(e.Events.CLOSE,{instance:this}),e._image_editor&&e._image_editor.close()}},{key:"save",value:function(){var t=this._container,i=this._user_image,n=b.default.instance();return t.hasClass("crop-mode")?(this._show_activity(),this._server_side_cropping(i.power_crop("state")),void n.notify(e.Events.SAVE,{instance:this})):t.hasClass("fit-to-field-mode")?(this._save_metadata(i.power_crop("state")),void n.notify(e.Events.SAVE,{instance:this})):void(t.hasClass("editor-mode")&&e._image_editor&&e._image_editor.save())}},{key:"_load_image",value:function(t){var i=this,n=this._context,o=n.url.image;c.default.ajax({url:o,type:"POST",datatype:"XML",data:{"zetaprints-action":"img","zetaprints-ImageID":t},error:function(e,t,n){var o=window.cant_load_image_text||"Can not load image";i._handle_ajax_error(o,t,n)},success:function(n){b.default.instance().notify(e.Events.IMAGE_LOADED,{instance:i,data:n}),i._process_image_details(n,i._context.merge({image_id:t}))}})}},{key:"_initialize_info_bar",value:function(e){this.info_bar=this._container.find("div.info-bar"),this.info_bar_elements={current:{width:(0,c.default)("#current-width"),height:(0,c.default)("#current-height"),dpi:(0,c.default)("#current-dpi")},recommended:{width:(0,c.default)("#recommended-width"),height:(0,c.default)("#recommended-height"),dpi:(0,c.default)("#recommended-dpi")}},this._set_info_bar_value("recommended","width",e.placeholder.width),this._set_info_bar_value("recommended","height",e.placeholder.height)}},{key:"_prepare_fit_into_buttons",value:function(e){var t=this;e.shape.width=e.shape.x2-e.shape.x1,e.shape.height=e.shape.y2-e.shape.y1,e.placeholder.width_in=e.page.width_in*e.shape.width,e.placeholder.dpi=e.placeholder.width/e.placeholder.width_in,e.placeholder.ratio=e.placeholder.width/e.placeholder.height,this._set_info_bar_value("recommended","dpi",Math.round(e.placeholder.dpi));var i=function(e,i){if("string"!=typeof e&&void 0===e.jquery)throw new TypeError('Argument "selector" must be either a jQuery object or a selector');if("function"!=typeof i)throw new TypeError('Argument "get_crop_data_callback" must be of type function');(0,c.default)(e).click(function(){t._clear_editor();var e=i();if(void 0===e)throw new TypeError("The get_crop_data_callback must return a value");t._set_container_changed(!0),t._show_crop(e)})};i("#zp-image-edit-action-fit-image",function(){var e=t._context,i=t._fit_image_into_placeholder(e.image,e.placeholder);return i.ratio=e.image.ratio,t._fit_into_container(i,e.placeholder,e.container)}),i("#zp-image-edit-action-fill-field",function(){var e=t._context,i=t._fill_placeholder_with_image(e.image,e.placeholder);return i.ratio=e.placeholder.ratio,t._fit_into_container(e.image,i,e.container)}),i("#zp-image-edit-action-fit-width",function(){var e=t._context,i=t._fit_image_into_placeholder_by_width(e.image,e.placeholder);return i.ratio=e.image.ratio,t._fit_into_container(i,e.placeholder,e.container)}),i("#zp-image-edit-action-fit-height",function(){var e=t._context,i=t._fit_image_into_placeholder_by_height(e.image,e.placeholder);return i.ratio=e.image.ratio,t._fit_into_container(i,e.placeholder,e.container)})}},{key:"_set_info_bar_value",value:function(e,t,i){this.info_bar_elements[e][t].html(i)}},{key:"_cropping_callback",value:function(e){var t=this._context,i=e.selection.width/e.image.width,n=e.selection.height/e.image.height;this._set_info_bar_value("current","width",Math.round(t.image.width*i)),this._set_info_bar_value("current","height",Math.round(t.image.height*n)),1!==i||1!==n?(this._set_info_bar_state("cropped",!0),this._set_container_changed(!0),this._update_save_image_button(!0)):(this._set_info_bar_state(),this._set_container_changed(!1),this._update_save_image_button())}},{key:"_update_save_image_button",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;f.default.instance().call(f.default.feature.fancybox.saveImageButton,function(){e._controller._save_image_button;e._controller._save_image_button.update(t)})}},{key:"_fit_in_field_callback",value:function(e){this._update_save_image_button(!0),this._set_container_changed(!0),this._update_info_bar_values(e)}},{key:"_update_info_bar_values",value:function(e){var t=this._context,i=e.selection.width/e.image.width,n=i*t.image.dpi/t.placeholder_to_image_factor;n<t.placeholder.dpi?this._set_info_bar_warning("low-cropped-resolution-warning"):this._set_info_bar_warning(),this._set_info_bar_value("current","dpi",Math.round(n));var o=this._limit_a_to_b(e.selection.position.left,e.selection.width,e.image.position.left,e.image.width),r=this._limit_a_to_b(e.image.position.top,e.image.height,e.selection.position.top,e.selection.height),a=0,s=0;if(r===e.image.height&&o===e.image.width||0===o||0===r)a=t.image.width,s=t.image.height,this._set_info_bar_state();else{var l=o/e.image.width;a=t.image.width*l,s=a/t.placeholder.ratio,this._set_info_bar_state("cropped",!0)}this._set_info_bar_value("current","width",Math.round(a)),this._set_info_bar_value("current","height",Math.round(s))}},{key:"_update_editor_state",value:function(e){this._update_save_image_button(!0),this._update_info_bar_values(e)}},{key:"_save_metadata",value:function(e){var t=this._context,i=e.image.position;i.width=e.image.width,i.height=e.image.height,i.right=i.left+i.width,i.bottom=i.top+i.height;var n=e.selection.position;n.width=e.selection.width,n.height=e.selection.height,n.right=n.left+n.width,n.bottom=n.top+n.height;var o=0,r=0,a=0,s=0;if(n.left<i.left){var l=(i.left-n.left)/n.width;o=t.shape.x1+t.shape.width*l,n.left=i.left}else o=t.shape.x1;if(n.top<i.top){var c=(i.top-n.top)/n.height;r=t.shape.y1+t.shape.height*c,n.top=i.top}else r=t.shape.y1;if(n.right>i.right){var u=(i.right-n.right)/n.width;a=t.shape.x2+t.shape.width*u,n.right=i.right}else a=t.shape.x2;if(n.bottom>i.bottom){var d=(i.bottom-n.bottom)/n.height;s=t.shape.y2+t.shape.height*d,n.bottom=i.bottom}else s=t.shape.y2;var p=new g.default({"cr-x1":(n.left-i.left)/i.width,"cr-x2":(n.right-i.left)/i.width,"cr-y1":(n.top-i.top)/i.height,"cr-y2":(n.bottom-i.top)/i.height,"abs-x1":o,"abs-y1":r,"abs-x2":a,"abs-y2":s});t.$input.data("metadata",p),this._forward_save_metadata(p),this._hide_cropped_area_on_thumb(),this._show_cropped_area_on_thumb(p)}},{key:"_clear_metadata",value:function(){var e=this._context;e.$input.removeData("metadata"),this._forward_save_metadata(),this._hide_cropped_area_on_thumb(),this._set_info_bar_value("current","width",e.image.width),this._set_info_bar_value("current","height",e.image.height),this._set_info_bar_value("current","dpi",e.image.dpi)}},{key:"_forward_save_metadata",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this._context,i=t.$input;i.length&&(e?(e["img-id"]=i.val(),w.default.replace_metadata(t.placeholder,e)):w.default.clear_metadata(t.placeholder))}},{key:"_server_side_cropping",value:function(e){var t=this;this._image_manipulation_service.crop(this._context,e,function(e,i,n){t._clear_metadata(),t._clear_editor(),t._update_ui(n,i)},function(e,i,n){t._handle_ajax_error(cant_crop_image_text,i,n)})}},{key:"_server_side_rotation",value:function(e){var t=this;this._clear_editor(),this._clear_metadata(),this._show_activity(),this._image_manipulation_service.rotate(this._context,e,function(e,i,n){t._update_ui(n,i)},function(e,i,n){t._handle_ajax_error(cant_rotate_image_text,i,n)})}},{key:"_process_image_details",value:function(e,t){var i=this._image_manipulation_service.process_image_details(t,e);this._update_ui(i,i.context)}},{key:"_update_ui",value:function(e,t){s.default.debug("[ImageEditor] Update UI",e),this.set_current_context(t);var i=e.source,n=e.preview_width,o=e.preview_height,r=e.width,a=e.height,l=e.undo_width,u=e.undo_height,d=(0,c.default)("#undo-button").parent();if(l&&u?d.removeClass("hidden").end().attr("title",undo_all_changes_text+". "+original_size_text+": "+l+" x "+u+" "+px_text):d.addClass("hidden"),!(n&&o&&r&&a))return alert(unknown_error_occured_text),s.default.error(unknown_error_occured_text),void this._hide_activity();this._set_info_bar_value("current","width",t.image.width),this._set_info_bar_value("current","height",t.image.height),this._set_info_bar_value("current","dpi",t.image.dpi),this._user_image.addClass("zetaprints-hidden").attr("src",i),this._image_thumbnail_service.update_images_for_editing_context(t,i)}},{key:"_delete_image",value:function(){var e=this,t=this._context;confirm(delete_this_image_text)&&c.default.ajax({url:t.url.image,type:"POST",data:{"zetaprints-action":"img-delete","zetaprints-ImageID":t.image_id},error:function(t,i,n){e._handle_ajax_error(cant_delete_text,i,n)},success:function(){e._clear_editor(),e._clear_metadata(),(0,c.default)('input[value="'+t.image_id+'"]').parent().remove(),(0,c.default)("#"+t.image_id).remove(),c.default.fancybox.close()}})}},{key:"_set_info_bar_warning",value:function(e){e?this.info_bar.addClass("warning "+e):this.info_bar.removeClass("warning low-resolution-warning low-cropped-resolution-warning low-full-resolution-warning small-image-warning")}},{key:"_set_info_bar_state",value:function(e,t){e||this.info_bar.removeClass("cropped-state"),t?this.info_bar.addClass(e+"-state"):this.info_bar.removeClass(e+"-state")}},{key:"_get_factor_a_to_b",value:function(e,t,i,n){var o=e/i,r=t/n;return o<r?o:r}},{key:"_fit_image_into_placeholder",value:function(e,t){var i=this._get_factor_a_to_b(t.width,t.height,e.width,e.height);return{width:e.width*i,height:e.height*i}}},{key:"_fill_placeholder_with_image",value:function(e,t){var i=this._get_factor_a_to_b(e.width,e.height,t.width,t.height);return{width:t.width*i,height:t.height*i}}},{key:"_fit_image_into_placeholder_by_width",value:function(e,t){var i=t.width/e.width;return{width:t.width,height:e.height*i}}},{key:"_fit_image_into_placeholder_by_height",value:function(e,t){var i=t.height/e.height;return{width:e.width*i,height:t.height}}},{key:"_fit_into_container_for_crop",value:function(e,t){t.factor=this._get_factor_a_to_b(t.width,t.height,e.thumb_width,e.thumb_height);var i=this._get_factor_a_to_b(t.width,t.height,e.width,e.height),n=e.width*i,o=n/e.ratio,r=t.width/2-n/2,a=t.height/2-o/2;return new d.default({selection:{position:{top:0,left:0},width:n,height:o},image:{position:{top:0,left:0},width:n,height:o},container:{top:a,left:r,width:n,height:o}})}},{key:"_clear_editor",value:function(){(this._container.hasClass("crop-mode")||this._container.hasClass("fit-to-field-mode"))&&this._user_image.power_crop("destroy"),this._container.hasClass("editor-mode")&&e._image_editor&&e._image_editor.close(),this._set_container_changed(!1),this._set_info_bar_warning(),this._set_info_bar_state(),this._update_save_image_button()}},{key:"_crop_button_click_handler",value:function(){var e=this._context;this._clear_editor(),this._container.removeClass("fit-to-field-mode editor-mode").addClass("crop-mode");var t=this._fit_into_container_for_crop(e.image,e.container);this._show_crop(t,!0)}},{key:"_fit_to_field_button_click_handler",value:function(e){var t=this._context;this._clear_editor(),this._container.removeClass("crop-mode editor-mode").addClass("fit-to-field-mode");var i=t.$input.data("metadata"),n=null;!i||e?n=this._fit_into_container(t.image,t.placeholder,t.container):(n=this._fit_into_container_using_metadata(t.image,t.placeholder,t.shape,t.container,i),this._set_container_changed(!0)),this._show_crop(n),this._update_save_image_button(!i||e)}},{key:"_image_editor_button_handler",value:function(){this._container.hasClass("editor-mode")||(this._clear_editor(),this._clear_metadata(),this._container.removeClass("crop-mode fit-to-field-mode").addClass("editor-mode"),this._show_image_editor())}},{key:"_show_image_editor",value:function(){var t=this;s.default.warn("_show_image_editor",arguments);var i=this._context,n=(0,c.default)("#zetaprints-image-edit-container"),o=c.default.fancybox.center;if(c.default.fancybox.center=function(){o();var t=n.offset();e._image_editor_wrapper.css({top:t.top,left:t.left})},e._image_editor){var r=n.offset();e._image_editor_wrapper.css({display:"block",top:r.top,left:r.left}),e._image_editor.launch({image:"zetaprints-image-edit-user-image",url:this._user_image.attr("src")})}else this._show_activity(),e._image_editor_wrapper=(0,c.default)('<div id="zp-image-edit-editor-wrapper" />').appendTo("body"),e._image_editor_wrapper.css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(),height:n.outerHeight()}),e._image_editor=new Aviary.Feather({image:"zetaprints-image-edit-user-image",apiVersion:2,appendTo:"zp-image-edit-editor-wrapper",language:(0,c.default)("html").attr("lang"),url:this._user_image.attr("src"),minimumStyling:!0,noCloseButton:!0,jpgQuality:100,maxSize:600,onSave:function(e,t){return i.upload_image_by_url(t),!1},onLoad:function(){e._image_editor.launch(),t._hide_activity()},onReady:function(){t._set_container_changed(!0),t._update_save_image_button(!0)},onClose:function(){e._image_editor_wrapper.css("display","none")}})}},{key:"_set_container_changed",value:function(e){e?this._container.addClass("changed"):this._container.removeClass("changed")}},{key:"_show_cropped_area_on_thumb",value:function(e){var t=this._context,i=100*e["cr-x1"],n=100*e["cr-y1"],o=100*(e["cr-x2"]-e["cr-x1"]),r=100*(e["cr-y2"]-e["cr-y1"]),a=t.$selected_thumbnail.clone(),s=a.wrap('<div class="top-image-wrapper" />').parent().css({left:i+"%",top:n+"%",width:o+"%",height:r+"%"}).wrap('<div class="thumb-shadow" />').parent().insertAfter(t.$selected_thumbnail).end().end().position();a.css({left:-s.left,top:-s.top})}},{key:"_hide_cropped_area_on_thumb",value:function(){this._context.$selected_thumbnail.parent().children(".thumb-shadow").remove()}},{key:"_restore_image",value:function(){var e=this,t=this._context;this._show_activity(),this._clear_editor(),this._clear_metadata(),c.default.ajax({url:t.url.image,type:"POST",data:{"zetaprints-action":"img-restore","zetaprints-ImageID":t.image_id},error:function(t,i,n){e._handle_ajax_error(cant_restore_image_text,i,n)},success:function(i){e._process_image_details(i,t)}})}},{key:"_handle_ajax_error",value:function(e,t,i){s.default.error(t,i),this._hide_activity(),alert(e+": "+t)}},{key:"_limit_a_to_b",value:function(e,t,i,n){if(0===parseInt(t,10))return 0;var o=e+t,r=i+n;return e>=r||o<=i?0:(e<i&&(e=i),o>r&&(o=r),o-e)}},{key:"_fit_into_container",value:function(e,t,i){var n=new d.default({selection:{position:{top:0,left:0}},image:{position:{top:0,left:0}}});t.width>=e.width&&t.height>=e.height?i.factor=this._get_factor_a_to_b(i.width,i.height,t.width,t.height):i.factor=this._get_factor_a_to_b(i.width,i.height,e.width,e.height),n.selection.width=Math.round(t.width*i.factor),n.selection.height=n.selection.width/t.ratio,n.image.width=Math.round(e.width*i.factor),n.image.height=n.image.width/e.ratio;var o=i.width/2,r=i.height/2;return n.selection.position.left=o-n.selection.width/2,n.selection.position.top=r-n.selection.height/2,n.image.position.left=o-n.image.width/2,n.image.position.top=r-n.image.height/2,n}},{key:"_fit_into_container_using_metadata",value:function(e,t,i,n,o){var r=new d.default({selection:{position:{top:0,left:0},width:t.width,height:t.height},image:{position:{top:0,left:0},width:e.width,height:e.height}});o["abs-x1"]<=i.x1&&o["abs-x2"]>=i.x2&&o["abs-y1"]<=i.y1&&o["abs-y2"]>=i.y2?(r.selection.position.left=o["cr-x1"]*e.width,r.selection.position.top=o["cr-y1"]*e.height,r.selection.width=(o["cr-x2"]-o["cr-x1"])*e.width,r.selection.height=r.selection.width/t.ratio):(r.image.position.left=t.width*(o["abs-x1"]-i.x1)/i.width,r.image.position.top=t.height*(o["abs-y1"]-i.y1)/i.height,r.image.width=t.width*(o["abs-x2"]-o["abs-x1"])/i.width*(1+o["cr-x1"]/(1-o["cr-x1"])+(1-o["cr-x2"])/o["cr-x2"]),r.image.height=r.image.width/e.ratio,r.selection.position.left=r.image.width*o["cr-x1"],r.selection.position.top=r.image.height*o["cr-y1"]);var a=r.selection.position.left<r.image.position.left?r.selection.position.left:r.image.position.left,s=r.selection.position.top<r.image.position.top?r.selection.position.top:r.image.position.top;r.selection.position.right=r.selection.position.left+r.selection.width,r.image.position.right=r.image.position.left+r.image.width;var l=r.selection.position.right>r.image.position.right?r.selection.position.right:r.image.position.right;r.selection.position.bottom=r.selection.position.top+r.selection.height,r.image.position.bottom=r.image.position.top+r.image.height;var c=r.selection.position.bottom>r.image.position.bottom?r.selection.position.bottom:r.image.position.bottom,u=l-a,p=c-s;n.factor=this._get_factor_a_to_b(n.width,n.height,u,p),r.selection.width*=n.factor,r.selection.height*=n.factor,r.selection.position.left*=n.factor,r.selection.position.top*=n.factor,r.image.width*=n.factor,r.image.height=r.image.width/e.ratio,r.image.position.left*=n.factor,r.image.position.top*=n.factor;var f=(n.width-u*n.factor)/2,h=(n.height-p*n.factor)/2;return r.selection.position.left+=f,r.selection.position.top+=h,r.image.position.left+=f,r.image.position.top+=h,r}},{key:"_show_crop",value:function(e,t){var i=this;if(c.default.fn.power_crop){var n=t?function(e){return i._cropping_callback(e)}:function(e){return i._fit_in_field_callback(e)},o=this._user_image;o.power_crop({simple:!!t,data:e,crop:n}),t||(e=o.power_crop("state"),this._update_editor_state(e))}}},{key:"_show_activity",value:function(){I(1103),D()}},{key:"_hide_activity",value:function(){I(1100),M()}},{key:"context",set:function(e){this.set_current_context(e)}}]),e}();t.default=N,N._image_editor=null,N._image_editor_wrapper=null,N.Events={SAVE:"ImageEditor.Events.SAVE",CLOSE:"ImageEditor.Events.CLOSE",IMAGE_LOADED:"ImageEditor.Events.IMAGE_LOADED"}},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(65),c=n(l),u=i(10),d=n(u),p=i(2),f=n(p),h=i(26),g=n(h),_=function(t){function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;o(this,i);var a=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return f.default.assertDomElement(n,"element"),f.default.assertInstanceOf(t,d.default,"personalization_form"),a._controller=t,a._element=e(n),a._initialize(),a}return a(i,t),s(i,[{key:"_initialize",value:function(){var t=this,i=e(this._element),n=i.children(".head"),o=this._get_content();this._initialize_tabs(),this.register_fields(o.find(".zetaprints-field")),n.on("click",function(e){return e.preventDefault(),t._handle_head_click(),!1});var r=i.position().left-e("div.product-img-box").position().left,a=r+i.outerWidth();n.children(".collapse-expand").on("click",function(e){return e.preventDefault(),t._handle_collapse_and_expand(r,a),!1}),this._initialize_color_pickers()}},{key:"_initialize_tabs",value:function(){var t=this,i=this._get_content(),n=i.children(".tab-buttons"),o=0;n.children(".hidden").length||(o=1),i.tabs({active:o}).bind("tabsshow",function(i,n){var o=t._controller;o.show_colorpicker(e(n.panel)),o.scroll_strip(n.panel)})}},{key:"_initialize_color_pickers",value:function(){var e=this._element,t=this._get_panels().filter(".color-picker").add(e.find(".colour-picker"));t.length&&new c.default(t,e)}},{key:"_get_content",value:function(){return this._element.children(".selector-content")}},{key:"_get_panels",value:function(){return this._element.children(".selector-content").find("> .tabs-wrapper > .tab")}},{key:"_handle_collapse_and_expand",value:function(e,t){var i=this._element,n=this._controller,o=this._get_panels().not(".ui-tabs-hide");i.hasClass("expanded")?i.removeClass("expanded").removeAttr("style"):(i.addClass("expanded").css({left:-e,width:t}),i.hasClass("minimized")&&(i.removeClass("minimized"),n.show_colorpicker(o))),n.scroll_strip(o)}},{key:"_handle_head_click",value:function(){var e=this._element,t=e.hasClass("zetaprints-palette")?this._get_content():this._get_panels().not(".ui-tabs-hide");e.hasClass("minimized")?(e.removeClass("minimized"),this._controller.show_colorpicker(t),this._controller.scroll_strip(t)):(this._controller.hide_colorpicker(t),e.addClass("minimized").removeClass("expanded").css("width","100%"))}}]),i}(g.default);t.default=_}).call(t,i(0))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(4),s=n(a),l=i(1),c=n(l),u=i(2),d=n(u),p=i(7),f=n(p),h=i(30),g=n(h),_=i(16),m=n(_),v=function(){function e(t){o(this,e),this.personalization_form=t}return r(e,[{key:"register_click",value:function(){var e=this;this._get_tab_buttons().on("click",function(){e._handle_click(this)})}},{key:"_handle_click",value:function(e){var t=this.personalization_form,i=t.data,n=s.default.instance(),o=n.product_form;this._get_tab_buttons().removeClass("selected"),n.hide(["a.zetaprints-template-preview","div.zetaprints-page-stock-images",s.default.instance().input_fields,"div.zetaprints-preview-placeholder",".page-size-table-body"]),i.has_shapes&&f.default.instance().call(f.default.feature.inPreviewEdit,t.in_preview_edit_controller.add_in_preview_edit_handlers),(0,c.default)(e).addClass("selected");var r=(0,c.default)("img",e).attr("rel");t.disable_image_zoomer(),i.is_fields_hidden||n.show(["#stock-images-"+r,"#input-fields-"+r]),n.show(["#preview-image-"+r,"#zp-placeholder-for-preview-"+r,"#page-size-"+r]),c.default.fn.text_field_resizer&&(0,c.default)("#input-fields-"+r+" .zetaprints-text-field-wrapper").text_field_resizer(),i.current_page=parseInt(r.split("-")[1],10),o.modified=m.default.has_changed_fields_on_page(i.current_page);var a=i.has_shapes&&f.default.instance().is_activated(f.default.feature.inPreviewEdit),l=new g.default(i.template_details.pages[i.current_page]);!l.preview_is_scaled||a?n.hide(n.enlarge_button):n.show(n.enlarge_button),this._toggle_buttons(l,a),window.place_preview_image_sharing_link&&t.set_preview_sharing_link_for_page(i.current_page,i.preview_sharing_links),(0,c.default)("#zp-dataset-page-"+i.current_page).length?(0,c.default)("#zp-dataset-button").removeClass("hidden"):(0,c.default)("#zp-dataset-button").addClass("hidden"),o.user_data_changed=m.default.is_user_data_changed(l),t.can_show_next_page_button_for_page(i.current_page,i)?n.next_page_button.show():n.next_page_button.hide()}},{key:"_get_tab_buttons",value:function(){return(0,c.default)("div.zetaprints-image-tabs li")}},{key:"_toggle_buttons",value:function(e,t){d.default.assertInstanceOf(e,g.default);var i=s.default.instance();e.static?(i.hide(i.update_preview_form_button),i.hide(i.form_button),i.hide(i.editor_button)):(i.show(i.update_preview_form_button),
//!!! Check if page is passive
t&&(i.show(i.editor_button),i.show(i.form_button)))}}]),e}();t.default=v},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),s=n(a),l=i(6),c=n(l),u=i(8),d=n(u),p=i(2),f=n(p);i(45);var h=function(){function e(t,i){o(this,e),f.default.assertDomElement(t),this.personalization_form=i,this._button=(0,s.default)(t),this._on_image_added=this._on_image_added.bind(this),this._upload_complete=this._upload_complete.bind(this),this._enable=this._enable.bind(this),this._initialize()}return r(e,[{key:"_initialize",value:function(){var e=this,t=this._button,i=new AjaxUpload(t,{name:"customer-image",action:this.personalization_form.data.url.upload,responseType:"json",autoSubmit:!0,onChange:function(e){t.parents(".upload").find("input.file-name").val(e)},onSubmit:function(t,i,n){e._set_upload_active(n)},onComplete:function(t,i,n){e._upload_complete(t,i,n)},onError:function(t,i,n){e._enable_and_hide_spinner(n)}}),n=this;(0,s.default)("div.button.cancel-upload",t.parent()).on("click",function(){(0,s.default)(this).hasClass("disabled")||(i.cancel(),n._enable_and_hide_spinner(i))})}},{key:"_set_upload_active",value:function(e){this._button.addClass("disabled").next().removeClass("disabled").next().show(),e.disable()}},{key:"_enable_and_hide_spinner",value:function(e){this._enable(e).hide()}},{key:"_enable",value:function(e){e.enable();var t=this._button.removeClass("disabled"),i=t.next().addClass("disabled");return t.parents(".upload").find("input.file-name").val(""),i.next()}},{key:"_upload_complete",value:function(t,i,n){var o=this._on_image_added,r=this._enable(n);if(""+i=="Error"||void 0!==i.error)return r.hide(),void alert(uploading_image_error_text);var a=this._button.parents(".upload"),s={instance:this,file:t,response:i,uploadDiv:a};c.default.instance().notify(AjaxUpload.Events.UPLOAD_COMPLETE,s),c.default.instance().notify(e.Events.UPLOAD_COMPLETE,s),c.default.instance().notify(d.default.USER_DATA_CHANGED,s);var l=a.parents(".selector-content"),u=l.attr("id"),p=l.find(".tab.user-images table tr");this.number_of_loaded_imgs=0,this.personalization_form.add_image_to_gallery(i.guid,i.thumbnail,function(){o(this,u,p,a,r,l)})}},{key:"_on_image_added",value:function(e,t,i,n,o,r){var a=(0,s.default)(e).parents("td");if(""+a.parents(".selector-content").attr("id")!=""+t){var l=a.parents(".images-scroller");l.scrollLeft(l.scrollLeft()+a.outerWidth())}else a.children(".zetaprints-images").click();if(++this.number_of_loaded_imgs===i.length){var c=n.next();o.hide(),a.closest("form").find(".tab-buttons > .hidden").removeClass("hidden"),this.personalization_form.scroll_strip(c),r.tabs("option","active",1)}}}]),e}();t.default=h,h.Events={UPLOAD_COMPLETE:"ImageUpload.Events.UPLOAD_COMPLETE"}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),s=n(a),l=i(31),c=n(l),u=i(4),d=n(u),p=i(3),f=n(p),h=i(7),g=n(h),_=i(21),m=n(_),v=function(){function e(t){if(o(this,e),!t)throw new ReferenceError('Missing argument "personalization_form_instance"');this.personalization_form_instance=t,this.shape_repository=new c.default(t),this.add_in_preview_edit_handlers=this.add_in_preview_edit_handlers.bind(this)}return r(e,[{key:"mark_shape_as_edited",value:function(e){(0,s.default)('div.zetaprints-field-shape[title="'+e.name+'"]').addClass("edited"),e["has-value"]=!0}},{key:"unmark_shape_as_edited",value:function(e){(0,s.default)('div.zetaprints-field-shape[title="'+e.name+'"]').removeClass("edited"),e["has-value"]=!1}},{key:"place_all_shapes_for_page",value:function(e,t,i){if("function"!=typeof i)throw new TypeError('Argument shape_handler must be of type "function"');if(e)for(var n in e)e.hasOwnProperty(n)&&!e[n].hidden&&this._place_shape(e[n],t,i)}},{key:"remove_all_shapes",value:function(e){(0,s.default)("div.zetaprints-field-shape",e).remove()}},{key:"highlight_shape",value:function(e,t){t.find('.zetaprints-field-shape[title="'+e.name+'"]').addClass("highlighted")}},{key:"dehighlight_shape",value:function(e,t){t.find('.zetaprints-field-shape[title="'+e.name+'"]').removeClass("highlighted")}},{key:"highlight_field_by_name",value:function(e){for(var t=e.split("; "),i=0;i<t.length;i++){var n=t[i],o=(0,s.default)('*[name="zetaprints-_'+n+'"], div.'+d.default.instance().select_image_elements_class_name+'[title="'+n+'"] div.head'),r=o.parents(".zetaprints-text-field-wrapper");r.length&&(o=r),o.addClass("highlighted")}}},{key:"dehighlight_field_by_name",value:function(){(0,s.default)([d.default.instance().input_fields_selector+" .highlighted",".zetaprints-page-stock-images .highlighted"].join(", ")).removeClass("highlighted")}},{key:"toggle_field_by_name",value:function(){this.popup_field_by_name(this.popdown_field_by_name())}},{key:"popup_field_by_name",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this.personalization_form_instance.data,o=(0,s.default)('<div class="fieldbox-tabs fieldbox-wrapper"><a class="fieldbox-button" href="#" /><ul class="fieldbox-head"/></div>'),r=o.children("ul"),a=d.default.instance().fancybox_content.find('.zetaprints-field-shape[title="'+e+'"]'),l=n.template_details.pages[n.current_page],c=void 0,u="auto",p=a.outerWidth();p<=150&&(p=150);var h={};i=[].concat(i);var g=i.length;if(0===g)return void f.default.debug("[InPreviewEditController] No shapes selected");for(var _=0;_<g;_++){var m=i[_],v=m.length<=5?m:m.substring(0,5)+"&hellip;",b=this._popup_field_by_name_create_li(m,_,v).appendTo(r),y=null;if(l.fields&&l.fields[m]){var w=this._popup_field_by_name_for_text_field(n,m,e,l,b);y=w.$field,c=w.full_name}else{if(!l.images||!l.images[m]){f.default.error("[InPreviewEditController] Shape named "+m+" is neither in the page's fields nor in it's images ");continue}var k=this._popup_field_by_name_for_images(n,m,h,e,b);y=k.$field,c=k.full_name,h=k.selected_buttons,u=p<400?400:p}y.data("in-preview-edit",{style:y.attr("style"),parent:y.parent()}).detach().removeAttr("style").wrap('<div id="fieldbox-tab-'+_+'" class="fieldbox-field" />').parent().appendTo(o)}r.append('<div class="last" />'),a.append('<input type="hidden" name="field" value="'+c+'" />'),"auto"===u&&s.default.browser&&s.default.browser.msie&&"7.0"===s.default.browser.version&&(u=p);var x=this._box=this._popup_field_by_name_build_box(e,o,u,p).appendTo("body");this._popup_field_by_name_apply_tabs_ie7_workaround(h,r,o),this._popup_field_by_name_register_box_click(x),this._popup_field_by_name_prepare_draggable_box(x,s.default.extend(!0,{},t),a),this._popup_field_by_name_prepare_tabs(o)}},{key:"popdown_field_by_name",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.personalization_form_instance,i=e?(0,s.default)('*[value="'+e+'"]',d.default.instance().fancybox_content):(0,s.default)(":input",d.default.instance().fancybox_content);if(!i.length)return f.default.debug("[InPreviewEditController] Early return in popdown_field_by_name()"),"";e||(e=(0,s.default)(i).val());var n=e.substring(12),o=(0,s.default)('.fieldbox[title="'+n+'"]');return 0===o.length&&this._box&&(o=this._box),o.find(".fieldbox-field").children().each(function(){var e=(0,s.default)(this),i=e.hasClass("zetaprints-text-field-wrapper")?e.find(".zetaprints-field"):e;s.default.fn.colorpicker&&e.hasClass("selector-content")&&e.find("> .tabs-wrapper > .tab").filter(".colour-picker, .color-picker").each(function(){t.hide_colorpicker((0,s.default)(this))});var n=e.data("in-preview-edit"),o=e.find(":checked");
//!!! Following code checks back initially selected radio button
//!!! Don't know why it happens
e.detach().appendTo(n.parent),void 0===n.style?e.removeAttr("style"):e.attr("style",n.style),
//!!! Stupid work around for stupid IE7
o.change().prop("checked",!0),g.default.instance().call(g.default.feature.textFieldEditor,function(){m.default.move(i,n.parent.parents("dl").children("dt"))});var r=d.default.instance().select_image_elements_class_name;n.parent.hasClass(r)&&t.scroll_strip((0,s.default)(e.find("ul.tab-buttons li.ui-tabs-selected a").attr("href")))}),o.remove(),(0,s.default)(i).remove(),(0,s.default)("#current-shape").attr("id",""),n}},{key:"shape_handler",value:function(e){e.preventDefault();var t=this.personalization_form_instance.data,i=(0,s.default)(e.target).parent();if(s.default.fn.draggable&&s.default.fn.tabs&&"click"===e.type){var n=void 0;if(e.pageX&&e.pageY){var o=this._glob_to_rel_coords(e.pageX,e.pageY,e.data.container);n=this._get_shapes_by_coords(o),i.data("selected-shapes",n)}else n=i.data("selected-shapes"),i.data("selected-shapes",void 0);for(var r=0;r<n.length;r++)e.data.container.find('.zetaprints-field-shape.bottom[title="'+n[r].name+'"]').addClass("zetaprints-shape-selected");(0,s.default)("#current-shape").attr("id",""),(0,s.default)(i).attr("id","current-shape"),this.personalization_form_instance.preview_controller.get_preview_for_page_number(t.current_page).open_lightbox()}else"mouseover"===e.type?((0,s.default)("#zetaprints-preview-image-container > div.zetaprints-field-shape.bottom").removeClass("highlighted"),(0,s.default)(i).addClass("highlighted"),this.highlight_field_by_name((0,s.default)(i).attr("title"))):((0,s.default)(i).removeClass("highlighted"),this.dehighlight_field_by_name((0,s.default)(i).attr("title")))}},{key:"fancy_shape_handler",value:function(e){var t=this.personalization_form_instance.data,i=(0,s.default)(e.target).parent();if(s.default.fn.draggable&&s.default.fn.tabs&&"click"===e.type){if((0,s.default)(i).children().length>1)return!1;d.default.instance().fancybox_content.find("div.zetaprints-field-shape.highlighted").removeClass("highlighted"),i.addClass("highlighted"),this.popdown_field_by_name();var n=i.attr("title"),o=t.template_details.pages[t.current_page].shapes[n],r=[];if(!o._selected_shape_names){for(var a=this._glob_to_rel_coords(e.pageX,e.pageY,e.data.container.children(d.default.instance().fancybox_image_selector)),l=this._get_shapes_by_coords(a).reverse(),c=0;c<l.length;c++)r=r.concat(l[c].name.split("; "));o._fields=r}return this.popup_field_by_name(n,{top:e.pageY,left:e.pageX},r),!1}if("mouseover"===e.type){var u=d.default.instance().fancybox_content.children("div.zetaprints-field-shape.highlighted");(0,s.default)(u).children().length<=1&&(0,s.default)(u).removeClass("highlighted"),(0,s.default)(i).addClass("highlighted")}else(0,s.default)(i).children().length<=1&&(0,s.default)(i).removeClass("highlighted")}},{key:"add_in_preview_edit_handlers",value:function(){var e=this,t=this,i=this.personalization_form_instance.data;this._register_text_field_handler(),this._register_image_selector_handler(i,t),(0,s.default)(document).on("click",d.default.instance().fancybox_image_selector,function(){(0,s.default)("div.zetaprints-field-shape.bottom",d.default.instance().fancybox_content).removeClass("highlighted"),e.popdown_field_by_name()}),this._patch_fancybox_method()}},{key:"get_shape_by_name",value:function(e,t){for(var i in t)if(t.hasOwnProperty(i))for(var n=i.split("; "),o=0;o<n.length;o++)if(n[o]===e)return t[i];return null}},{key:"_place_shape",value:function(e,t,i){if("function"!=typeof i)throw new TypeError('Argument shape_handler must be of type "function"');var n=e["has-value"]?" edited":"";(0,s.default)('<div class="zetaprints-field-shape bottom hide'+n+'" title="'+e.name+'"><div class="zetaprints-field-shape top" /></div>').css({top:e.top+"%",left:e.left+"%",width:e.visual_width+"%",height:e.visual_height+"%"}).appendTo(t).children().bind("click mouseover mouseout",{container:t},i)}},{key:"_popup_field_by_name_build_box",value:function(e,t,i,n){return(0,s.default)('<div class="fieldbox" title="'+e+'" />').append(t).css({width:i,minWidth:n})}},{key:"_popup_field_by_name_apply_tabs_ie7_workaround",value:function(e,t,i){
//!!! Stupid work around for stupid IE7
for(var n in e){var o=t.children('[title="'+n+'"]').find(" > .fieldbox-tab-inner > a").attr("href").split("#");i.find(" > #"+o[1]+" > .selector-content").find('input[value="'+e[n]+'"]').change().prop("checked",!0)}}},{key:"_popup_field_by_name_create_li",value:function(e,t,i){return(0,s.default)('<li title="'+e+'"><div class="fieldbox-tab-inner"><a href="#fieldbox-tab-'+t+'"><div class="fieldbox-tab-icon" />'+i+'</a><div class="zp-clear" /></div></li>')}},{key:"_popup_field_by_name_register_box_click",value:function(e){var t=this;e.find(".fieldbox-button").click(function(){return t.popdown_field_by_name(),!1})}},{key:"_popup_field_by_name_prepare_draggable_box",value:function(e,t,i){var n=e.outerHeight(),o=e.outerWidth();t||(t=i.offset(),t.top+=i.outerHeight()-10,t.left+=10);var r=(0,s.default)(window).height()+(0,s.default)(window).scrollTop();t.top+n>r&&(t.top-=t.top+n-r);var a=(0,s.default)(window).width();t.left+o>a&&(t.left-=t.left+o-a),e.css({visibility:"visible",left:t.left,top:t.top}).draggable({handle:".fieldbox-head"})}},{key:"_popup_field_by_name_prepare_tabs",value:function(e){var t=this.personalization_form_instance;e.tabs({activate:function(e,i){var n=(0,s.default)(i.newPanel);
//!!!TODO: rework it after upgrading to jQuery UI 1.9+
n.click();var o=n.find(n.find("ul.tab-buttons li.ui-tabs-selected a").attr("href"));o.length&&(t.show_user_images(o),t.scroll_strip(o),t.show_colorpicker(o))}})}},{key:"_popup_field_by_name_for_images",value:function(e,t,i,n,o){var r=(0,s.default)("#stock-images-page-"+e.current_page).find('*[title="'+t+'"]').removeClass("minimized"),a=r.children(".selector-content");i[t]=a.find(":checked").val();var l="zetaprints-#"+n;return o.addClass("image-field"),{$field:a,full_name:l,selected_buttons:i}}},{key:"_popup_field_by_name_for_text_field",value:function(e,t,i,n,o){var r=(0,s.default)("#input-fields-page-"+e.current_page).find('*[name="zetaprints-_'+t+'"]').not('[type="hidden"]'),a=r,l=r.parents(".zetaprints-text-field-wrapper");l.length&&(r=l);var c="zetaprints-_"+i;return g.default.instance().call(g.default.feature.textFieldEditor,function(){"RGB"===n.fields[t]["colour-picker"]&&m.default.move(a,o.find(".fieldbox-tab-inner"))}),o.addClass("text-field"),{$field:r,full_name:c}}},{key:"_get_current_shapes_container",value:function(){var e=d.default.instance().fancybox_content;return e.length>0&&e.is(":visible")?e:(0,s.default)("div.product-img-box")}},{key:"_glob_to_rel_coords",value:function(e,t,i){var n=i.offset();return e-=n.left,t-=n.top,{x:e/i.width(),y:t/i.height()}}},{key:"_get_shapes_by_coords",value:function(e){var t=this.personalization_form_instance.data,i=t.template_details.pages[t.current_page],n=[],o=i.shapes;for(var r in o)if(o.hasOwnProperty(r)){var a=o[r];a.x1<=e.x&&e.x<=a.x2&&a.y1<=e.y&&e.y<=a.y2&&n.push(a)}return n}},{key:"_patch_fancybox_method",value:function(){var e=this,t="";if(void 0!==s.default.fancybox.center?t="center":void 0!==s.default.fancybox.reposition&&(t="reposition"),t){var i=s.default.fancybox[t];s.default.fancybox[t]=function(){var t=d.default.instance().fancybox_wrap,n=t.position();i();var o=t.position();n.top===o.top&&n.left===o.left||e.toggle_field_by_name()}}}},{key:"_register_image_selector_handler",value:function(){var e=this;(0,s.default)(d.default.instance().select_image_elements_selector).mouseover(function(){var t=e.shape_repository.get_shapes_of_current_page(),i=(0,s.default)(this).attr("title"),n=e.get_shape_by_name(i,t);e.highlight_shape(n,e._get_current_shapes_container())}).mouseout(function(){if(!(0,s.default)(this).children("div.fieldbox").length){var t=e.shape_repository.get_shapes_of_current_page(),i=(0,s.default)(this).attr("title"),n=e.get_shape_by_name(i,t);e.dehighlight_shape(n,e._get_current_shapes_container())}})}},{key:"_register_text_field_handler",value:function(){var e=this;d.default.instance().input_fields.find("dd").find("input, textarea, select").mouseover(function(){var t=e.shape_repository.get_shapes_of_current_page(),i=d.default.get_name_for_element(this),n=e.get_shape_by_name(i,t);e.highlight_shape(n,e._get_current_shapes_container())}).mouseout(function(){var t=e.shape_repository.get_shapes_of_current_page(),i=d.default.get_name_for_element(this),n=e.get_shape_by_name(i,t);e.dehighlight_shape(n,e._get_current_shapes_container())})}}],[{key:"precalculate_shapes",value:function(e){var t=e.pages;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i].shapes;for(var o in n)if(n.hasOwnProperty(o)){var r=n[o];r.left=100*r.x1,r.top=100*r.y1,r.visual_width=100*(r.x2-r.x1),r.visual_height=100*(r.y2-r.y1)}}}}]),e}();t.default=v},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(10),s=n(a),l=i(2),c=n(l),u=i(7),d=n(u),p=i(4),f=n(p),h=i(6),g=n(h),_=i(8),m=n(_),v=function(){function t(e,i){o(this,t),c.default.assertInstanceOf(e,s.default),this._personalization_form_instance=e,this._ignore_enter=this._ignore_enter.bind(this);var n=this._on_change=this._on_change.bind(this),r=this._on_click=this._on_click.bind(this);i.find("input.input-text").on("keypress",this._ignore_enter);var a=i.find(".zetaprints-field").filter("textarea, :text");a.on("keyup",function(){n(this,!1)}).on("change",function(){n(this,!0)}),a.filter("[readonly]").on("click",function(e){r(e,this)}),i.find(".zetaprints-field").filter("select, :checkbox").on("change",function(){n(this,!0)})}return r(t,[{key:"_on_change",value:function(t,i){var n=e(t),o=f.default.get_name_for_element(n),r=n.is(":checkbox")?n.is(":checked"):n.val(),a=!!r,s=this._personalization_form_instance.data,l=s.template_details.pages[s.current_page],c=l.fields[o],u=f.default.instance().product_form;c&&(c.value=r,void 0!==c.previous_value&&(u.user_data_changed=c.previous_value!==r)),a?(f.default.instance().fancybox_outer.addClass("modified"),u.modified=!0):f.default.instance().fancybox_outer.removeClass("modified"),i&&g.default.instance().notify(m.default.USER_DATA_SAVED,{instance:this,value:r,field:c}),s.has_shapes&&d.default.instance().is_activated(d.default.feature.inPreviewEdit)&&this._personalization_form_instance.input_field_did_change(o,r)}},{key:"_on_click",value:function(t,i){if("INPUT"!==i.nodeName)throw new TypeError('Argument "element" must be a HTMLInputElement');var n=f.default.get_name_for_element(i),o=this._personalization_form_instance.data;if(o.template_details.pages[o.current_page].fields[n].dataset)e("#zp-dataset-button").click();else if(e(i).unbind(t).val("").prop("readonly",!1),i.createTextRange){var r=i.createTextRange();r.collapse(!0),r.move("character",0),r.select()}}},{key:"_ignore_enter",value:function(e){if(13===e.keyCode)return e.preventDefault(),!1}}]),t}();t.default=v}).call(t,i(0))},function(module,exports,__webpack_require__){"use strict";(function(__webpack_provided_window_dot_jQuery,jQuery){!function(){function log(){"undefined"!=typeof console&&"function"==typeof console.log&&(Array.prototype.unshift.call(arguments,"[Ajax Upload]"),console.log(Array.prototype.join.call(arguments," ")))}function addEvent(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else{if(!e.attachEvent)throw new Error("not supported or DOM not loaded");e.attachEvent("on"+t,function(){i.call(e)})}}function addResizeEvent(e){var t;addEvent(window,"resize",function(){t&&clearTimeout(t),t=setTimeout(e,100)})}function getBox(e){var t,i,n,o,r=getOffset(e);return t=r.left,n=r.top,i=t+e.offsetWidth,o=n+e.offsetHeight,{left:t,right:i,top:n,bottom:o}}function addStyles(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])}function copyLayout(e,t){var i=getBox(e);addStyles(t,{position:"absolute",left:i.left+"px",top:i.top+"px",width:e.offsetWidth+"px",height:e.offsetHeight+"px"})}function fileFromPath(e){return e.replace(/.*(\/|\\)/,"")}function getExt(e){return-1!==e.indexOf(".")?e.replace(/.*[.]/,""):""}function hasClass(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)}function addClass(e,t){hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){var i=new RegExp("\\b"+t+"\\b");e.className=e.className.replace(i,"")}function removeNode(e){e.parentNode.removeChild(e)}if(document.documentElement.getBoundingClientRect)var getOffset=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,n=i.body,o=i.documentElement,r=o.clientTop||n.clientTop||0,a=o.clientLeft||n.clientLeft||0,s=1;if(n.getBoundingClientRect){var l=n.getBoundingClientRect();s=(l.right-l.left)/n.clientWidth}return s>1&&(r=0,a=0),{top:t.top/s+(window.pageYOffset||o&&o.scrollTop/s||n.scrollTop/s)-r,left:t.left/s+(window.pageXOffset||o&&o.scrollLeft/s||n.scrollLeft/s)-a}};else var getOffset=function(e){var t=0,i=0;do{t+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent}while(e);return{left:i,top:t}};var toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var i=e.firstChild;return e.removeChild(i)}}(),getUID=function(){var e=0;return function(){return"ValumsAjaxUpload"+e++}}();window.AjaxUpload=function(e,t){this._settings={action:"upload.php",name:"userfile",data:{},autoSubmit:!0,responseType:!1,hoverClass:"hover",disabledClass:"disabled",onChange:function(e,t,i){},onSubmit:function(e,t,i){},onComplete:function(e,t,i){},onError:function(e,t,i){}};for(var i in t)t.hasOwnProperty(i)&&(this._settings[i]=t[i]);if(e.jquery?e=e[0]:"string"==typeof e&&(/^#.*/.test(e)&&(e=e.slice(1)),e=document.getElementById(e)),!e||1!==e.nodeType)throw new Error("Please make sure that you're passing a valid element");"A"==e.nodeName.toUpperCase()&&addEvent(e,"click",function(e){e&&e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1)}),this._button=e,this._input=null,this._disabled=!1,this.enable(),this._rerouteClicks()},AjaxUpload.Events={UPLOAD_COMPLETE:"ajax_upload:complete"},AjaxUpload.prototype={setData:function(e){this._settings.data=e},disable:function(){addClass(this._button,this._settings.disabledClass),this._disabled=!0;var e=this._button.nodeName.toUpperCase();"INPUT"!=e&&"BUTTON"!=e||this._button.setAttribute("disabled","disabled"),this._input&&(this._input.parentNode.style.visibility="hidden")},enable:function(){removeClass(this._button,this._settings.disabledClass),this._button.removeAttribute("disabled"),this._disabled=!1},_createInput:function(){var e=this,t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("name",this._settings.name),addStyles(t,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",cursor:"pointer"});var i=document.createElement("div");if(addStyles(i,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:2147483583}),"0"!==i.style.opacity){if(void 0===i.filters)throw new Error("Opacity not supported by the browser");i.style.filter="alpha(opacity=0)"}addEvent(t,"change",function(){if(t&&""!==t.value){var i=fileFromPath(t.value);if(!1===e._settings.onChange.call(e,i,getExt(i),e))return void e._clearInput();e._settings.autoSubmit&&e.submit()}}),addEvent(t,"mouseover",function(){addClass(e._button,e._settings.hoverClass)}),addEvent(t,"mouseout",function(){removeClass(e._button,e._settings.hoverClass),t.parentNode&&(t.parentNode.style.visibility="hidden")}),i.appendChild(t),document.body.appendChild(i),this._input=t},_clearInput:function(){this._input&&(removeNode(this._input.parentNode),this._input=null,this._createInput(),removeClass(this._button,this._settings.hoverClass))},_rerouteClicks:function(){var e=this;addEvent(e._button,"mouseover",function(){if(!e._disabled){e._input||e._createInput();var t=e._input.parentNode;copyLayout(e._button,t),t.style.visibility="visible"}})},_createIframe:function(){var e=getUID(),t=toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(e){var t=this._settings,i=toElement('<form method="post" enctype="multipart/form-data"></form>');i.setAttribute("action",t.action),i.setAttribute("target",e.name),i.style.display="none",document.body.appendChild(i);for(var n in t.data)if(t.data.hasOwnProperty(n)){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",n),o.setAttribute("value",t.data[n]),i.appendChild(o)}return i},_getResponse:function _getResponse(iframe,file){var toDeleteFlag=!1,self=this,settings=this._settings;addEvent(iframe,"load",function(){if("javascript:'%3Chtml%3E%3C/html%3E';"==iframe.src||"javascript:'<html></html>';"==iframe.src)return void(toDeleteFlag&&setTimeout(function(){removeNode(iframe)},0));try{var doc=iframe.contentDocument?iframe.contentDocument:window.frames[iframe.id].document}catch(e){return void settings.onError.call(self,file,null,self)}if(!(doc.readyState&&"complete"!=doc.readyState||doc.body&&"false"==doc.body.innerHTML)){var response;doc.XMLDocument?response=doc.XMLDocument:doc.body?(response=doc.body.innerHTML,settings.responseType&&"json"==settings.responseType.toLowerCase()&&(doc.body.firstChild&&"PRE"==doc.body.firstChild.nodeName.toUpperCase()&&(response=doc.body.firstChild.firstChild.nodeValue),response=response?eval("("+response+")"):{})):response=doc,__webpack_provided_window_dot_jQuery&&jQuery(document).trigger(AjaxUpload.Events.UPLOAD_COMPLETE,{instance:self,file:file,response:response,iframe:iframe}),settings.onComplete.call(self,file,response,self),toDeleteFlag=!0,iframe.src="javascript:'<html></html>';"}})},submit:function(){var e=this,t=this._settings;if(this._input&&""!==this._input.value){var i=fileFromPath(this._input.value);if(!1===t.onSubmit.call(this,i,getExt(i),this))return void this._clearInput();var n=this._createIframe(),o=this._createForm(n);this._settings._iframe=n,removeNode(this._input.parentNode),removeClass(e._button,e._settings.hoverClass),o.appendChild(this._input),o.submit(),removeNode(o),o=null,removeNode(this._input),this._input=null,this._getResponse(n,i),this._createInput()}},cancel:function(){this._settings._iframe.src="javascript:'<html></html>';"}}}()}).call(exports,__webpack_require__(0),__webpack_require__(0))},function(e,t,i){"use strict";(function(e){!function(e){var t=0,i=function(e){var t=Math.floor(e).toString(16);return 1===t.length&&(t="0"+t),t.toLowerCase()},n=function(t){var i,n;return n=/^#?([a-fA-F0-9]{1,6})$/.exec(t),n?(i=parseInt(n[1],16),new e.colorpicker.Color((i>>16&255)/255,(i>>8&255)/255,(255&i)/255)):new e.colorpicker.Color},o=function(t,i){var n,o,r,a,s,l,c,u,d,p,f,h,g,_;for(t.sort(function(e,t){return e.pos[1]===t.pos[1]?e.pos[0]-t.pos[0]:e.pos[1]-t.pos[1]}),a=0,s=0,e.each(t,function(e,t){a=Math.max(a,t.pos[0]+t.pos[2]),s=Math.max(s,t.pos[1]+t.pos[3])}),n=[],o=0;o<a;++o)n.push([]);for(c=[],l=[],e.each(t,function(e,t){for(o=0;o<t.pos[2];o+=1)l[t.pos[0]+o]=!0;for(r=0;r<t.pos[3];r+=1)c[t.pos[1]+r]=!0}),p="",d=t[u=0],r=0;r<s;++r){for(p+="<tr>",o=0;o<a;)if(void 0!==d&&o===d.pos[0]&&r===d.pos[1]){for(p+=i(d,o,r),h=0;h<d.pos[3];h+=1)for(f=0;f<d.pos[2];f+=1)n[o+f][r+h]=!0;o+=d.pos[2],d=t[++u]}else{for(g=0,_=!1;o<a&&void 0===n[o][r]&&(void 0===d||r<d.pos[1]||r===d.pos[1]&&o<d.pos[0]);)!0===l[o]&&(g+=1),_=!0,o+=1;g>0?p+='<td colspan="'+g+'"></td>':_||(o+=1)}p+="</tr>"}return'<table cellspacing="0" cellpadding="0" border="0"><tbody>'+p+"</tbody></table>"};e.colorpicker=new function(){this.regional={"":{ok:"OK",cancel:"Cancel",none:"None",button:"Color",title:"Pick a color",transparent:"Transparent",hsvH:"H",hsvS:"S",hsvV:"V",rgbR:"R",rgbG:"G",rgbB:"B",labL:"L",labA:"a",labB:"b",hslH:"H",hslS:"S",hslL:"L",cmykC:"C",cmykM:"M",cmykY:"Y",cmykK:"K",alphaA:"A"}},this.swatches={html:[{name:"black",r:0,g:0,b:0},{name:"dimgray",r:.4117647058823529,g:.4117647058823529,b:.4117647058823529},{name:"gray",r:.5019607843137255,g:.5019607843137255,b:.5019607843137255},{name:"darkgray",r:.6627450980392157,g:.6627450980392157,b:.6627450980392157},{name:"silver",r:.7529411764705882,g:.7529411764705882,b:.7529411764705882},{name:"lightgrey",r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},{name:"gainsboro",r:.8627450980392157,g:.8627450980392157,b:.8627450980392157},{name:"whitesmoke",r:.9607843137254902,g:.9607843137254902,b:.9607843137254902},{name:"white",r:1,g:1,b:1},{name:"rosybrown",r:.7372549019607844,g:.5607843137254902,b:.5607843137254902},{name:"indianred",r:.803921568627451,g:.3607843137254902,b:.3607843137254902},{name:"brown",r:.6470588235294118,g:.16470588235294117,b:.16470588235294117},{name:"firebrick",r:.6980392156862745,g:.13333333333333333,b:.13333333333333333},{name:"lightcoral",r:.9411764705882353,g:.5019607843137255,b:.5019607843137255},{name:"maroon",r:.5019607843137255,g:0,b:0},{name:"darkred",r:.5450980392156862,g:0,b:0},{name:"red",r:1,g:0,b:0},{name:"snow",r:1,g:.9803921568627451,b:.9803921568627451},{name:"salmon",r:.9803921568627451,g:.5019607843137255,b:.4470588235294118},{name:"mistyrose",r:1,g:.8941176470588236,b:.8823529411764706},{name:"tomato",r:1,g:.38823529411764707,b:.2784313725490196},{name:"darksalmon",r:.9137254901960784,g:.5882352941176471,b:.47843137254901963},{name:"orangered",r:1,g:.27058823529411763,b:0},{name:"coral",r:1,g:.4980392156862745,b:.3137254901960784},{name:"lightsalmon",r:1,g:.6274509803921569,b:.47843137254901963},{name:"sienna",r:.6274509803921569,g:.3215686274509804,b:.17647058823529413},{name:"seashell",r:1,g:.9607843137254902,b:.9333333333333333},{name:"chocolate",r:.8235294117647058,g:.4117647058823529,b:.11764705882352941},{name:"saddlebrown",r:.5450980392156862,g:.27058823529411763,b:.07450980392156863},{name:"sandybrown",r:.9568627450980393,g:.6431372549019608,b:.3764705882352941},{name:"peachpuff",r:1,g:.8549019607843137,b:.7254901960784313},{name:"peru",r:.803921568627451,g:.5215686274509804,b:.24705882352941178},{name:"linen",r:.9803921568627451,g:.9411764705882353,b:.9019607843137255},{name:"darkorange",r:1,g:.5490196078431373,b:0},{name:"bisque",r:1,g:.8941176470588236,b:.7686274509803922},{name:"burlywood",r:.8705882352941177,g:.7215686274509804,b:.5294117647058824},{name:"tan",r:.8235294117647058,g:.7058823529411765,b:.5490196078431373},{name:"antiquewhite",r:.9803921568627451,g:.9215686274509803,b:.8431372549019608},{name:"navajowhite",r:1,g:.8705882352941177,b:.6784313725490196},{name:"blanchedalmond",r:1,g:.9215686274509803,b:.803921568627451},{name:"papayawhip",r:1,g:.9372549019607843,b:.8352941176470589},{name:"orange",r:1,g:.6470588235294118,b:0},{name:"moccasin",r:1,g:.8941176470588236,b:.7098039215686275},{name:"wheat",r:.9607843137254902,g:.8705882352941177,b:.7019607843137254},{name:"oldlace",r:.9921568627450981,g:.9607843137254902,b:.9019607843137255},{name:"floralwhite",r:1,g:.9803921568627451,b:.9411764705882353},{name:"goldenrod",r:.8549019607843137,g:.6470588235294118,b:.12549019607843137},{name:"darkgoldenrod",r:.7215686274509804,g:.5254901960784314,b:.043137254901960784},{name:"cornsilk",r:1,g:.9725490196078431,b:.8627450980392157},{name:"gold",r:1,g:.8431372549019608,b:0},{name:"palegoldenrod",r:.9333333333333333,g:.9098039215686274,b:.6666666666666666},{name:"khaki",r:.9411764705882353,g:.9019607843137255,b:.5490196078431373},{name:"lemonchiffon",r:1,g:.9803921568627451,b:.803921568627451},{name:"darkkhaki",r:.7411764705882353,g:.7176470588235294,b:.4196078431372549},{name:"beige",r:.9607843137254902,g:.9607843137254902,b:.8627450980392157},{name:"lightgoldenrodyellow",r:.9803921568627451,g:.9803921568627451,b:.8235294117647058},{name:"olive",r:.5019607843137255,g:.5019607843137255,b:0},{name:"yellow",r:1,g:1,b:0},{name:"lightyellow",r:1,g:1,b:.8784313725490196},{name:"ivory",r:1,g:1,b:.9411764705882353},{name:"olivedrab",r:.4196078431372549,g:.5568627450980392,b:.13725490196078433},{name:"yellowgreen",r:.6039215686274509,g:.803921568627451,b:.19607843137254902},{name:"darkolivegreen",r:.3333333333333333,g:.4196078431372549,b:.1843137254901961},{name:"greenyellow",r:.6784313725490196,g:1,b:.1843137254901961},{name:"lawngreen",r:.48627450980392156,g:.9882352941176471,b:0},{name:"chartreuse",r:.4980392156862745,g:1,b:0},{name:"darkseagreen",r:.5607843137254902,g:.7372549019607844,b:.5607843137254902},{name:"forestgreen",r:.13333333333333333,g:.5450980392156862,b:.13333333333333333},{name:"limegreen",r:.19607843137254902,g:.803921568627451,b:.19607843137254902},{name:"lightgreen",r:.5647058823529412,g:.9333333333333333,b:.5647058823529412},{name:"palegreen",r:.596078431372549,g:.984313725490196,b:.596078431372549},{name:"darkgreen",r:0,g:.39215686274509803,b:0},{name:"green",r:0,g:.5019607843137255,b:0},{name:"lime",r:0,g:1,b:0},{name:"honeydew",r:.9411764705882353,g:1,b:.9411764705882353},{name:"mediumseagreen",r:.23529411764705882,g:.7019607843137254,b:.44313725490196076},{name:"seagreen",r:.1803921568627451,g:.5450980392156862,b:.3411764705882353},{name:"springgreen",r:0,g:1,b:.4980392156862745},{name:"mintcream",r:.9607843137254902,g:1,b:.9803921568627451},{name:"mediumspringgreen",r:0,g:.9803921568627451,b:.6039215686274509},{name:"mediumaquamarine",r:.4,g:.803921568627451,b:.6666666666666666},{name:"aquamarine",r:.4980392156862745,g:1,b:.8313725490196079},{name:"turquoise",r:.25098039215686274,g:.8784313725490196,b:.8156862745098039},{name:"lightseagreen",r:.12549019607843137,g:.6980392156862745,b:.6666666666666666},{name:"mediumturquoise",r:.2823529411764706,g:.8196078431372549,b:.8},{name:"darkslategray",r:.1843137254901961,g:.30980392156862746,b:.30980392156862746},{name:"paleturquoise",r:.6862745098039216,g:.9333333333333333,b:.9333333333333333},{name:"teal",r:0,g:.5019607843137255,b:.5019607843137255},{name:"darkcyan",r:0,g:.5450980392156862,b:.5450980392156862},{name:"darkturquoise",r:0,g:.807843137254902,b:.8196078431372549},{name:"aqua",r:0,g:1,b:1},{name:"cyan",r:0,g:1,b:1},{name:"lightcyan",r:.8784313725490196,g:1,b:1},{name:"azure",r:.9411764705882353,g:1,b:1},{name:"cadetblue",r:.37254901960784315,g:.6196078431372549,b:.6274509803921569},{name:"powderblue",r:.6901960784313725,g:.8784313725490196,b:.9019607843137255},{name:"lightblue",r:.6784313725490196,g:.8470588235294118,b:.9019607843137255},{name:"deepskyblue",r:0,g:.7490196078431373,b:1},{name:"skyblue",r:.5294117647058824,g:.807843137254902,b:.9215686274509803},{name:"lightskyblue",r:.5294117647058824,g:.807843137254902,b:.9803921568627451},{name:"steelblue",r:.27450980392156865,g:.5098039215686274,b:.7058823529411765},{name:"aliceblue",r:.9411764705882353,g:.9725490196078431,b:1},{name:"dodgerblue",r:.11764705882352941,g:.5647058823529412,b:1},{name:"slategray",r:.4392156862745098,g:.5019607843137255,b:.5647058823529412},{name:"lightslategray",r:.4666666666666667,g:.5333333333333333,b:.6},{name:"lightsteelblue",r:.6901960784313725,g:.7686274509803922,b:.8705882352941177},{name:"cornflowerblue",r:.39215686274509803,g:.5843137254901961,b:.9294117647058824},{name:"royalblue",r:.2549019607843137,g:.4117647058823529,b:.8823529411764706},{name:"midnightblue",r:.09803921568627451,g:.09803921568627451,b:.4392156862745098},{name:"lavender",r:.9019607843137255,g:.9019607843137255,b:.9803921568627451},{name:"navy",r:0,g:0,b:.5019607843137255},{name:"darkblue",r:0,g:0,b:.5450980392156862},{name:"mediumblue",r:0,g:0,b:.803921568627451},{name:"blue",r:0,g:0,b:1},{name:"ghostwhite",r:.9725490196078431,g:.9725490196078431,b:1},{name:"darkslateblue",r:.2823529411764706,g:.23921568627450981,b:.5450980392156862},{name:"slateblue",r:.41568627450980394,g:.35294117647058826,b:.803921568627451},{name:"mediumslateblue",r:.4823529411764706,g:.40784313725490196,b:.9333333333333333},{name:"mediumpurple",r:.5764705882352941,g:.4392156862745098,b:.8588235294117647},{name:"blueviolet",r:.5411764705882353,g:.16862745098039217,b:.8862745098039215},{name:"indigo",r:.29411764705882354,g:0,b:.5098039215686274},{name:"darkorchid",r:.6,g:.19607843137254902,b:.8},{name:"darkviolet",r:.5803921568627451,g:0,b:.8274509803921568},{name:"mediumorchid",r:.7294117647058823,g:.3333333333333333,b:.8274509803921568},{name:"thistle",r:.8470588235294118,g:.7490196078431373,b:.8470588235294118},{name:"plum",r:.8666666666666667,g:.6274509803921569,b:.8666666666666667},{name:"violet",r:.9333333333333333,g:.5098039215686274,b:.9333333333333333},{name:"purple",r:.5019607843137255,g:0,b:.5019607843137255},{name:"darkmagenta",r:.5450980392156862,g:0,b:.5450980392156862},{name:"magenta",r:1,g:0,b:1},{name:"fuchsia",r:1,g:0,b:1},{name:"orchid",r:.8549019607843137,g:.4392156862745098,b:.8392156862745098},{name:"mediumvioletred",r:.7803921568627451,g:.08235294117647059,b:.5215686274509804},{name:"deeppink",r:1,g:.0784313725490196,b:.5764705882352941},{name:"hotpink",r:1,g:.4117647058823529,b:.7058823529411765},{name:"palevioletred",r:.8588235294117647,g:.4392156862745098,b:.5764705882352941},{name:"lavenderblush",r:1,g:.9411764705882353,b:.9607843137254902},{name:"crimson",r:.8627450980392157,g:.0784313725490196,b:.23529411764705882},{name:"pink",r:1,g:.7529411764705882,b:.796078431372549},{name:"lightpink",r:1,g:.7137254901960784,b:.7568627450980392}]},this.writers={"#HEX":function(e,t){return t._formatColor("#rxgxbx",e)},"#HEX3":function(t,i){var n=e.colorpicker.writers.HEX3(t);return!1!==n&&"#"+n},HEX:function(e,t){return t._formatColor("rxgxbx",e)},HEX3:function(e,t){var i=e.getRGB(),n=Math.floor(255*i.r),o=Math.floor(255*i.g),r=Math.floor(255*i.b);return n>>>4==(n&=15)&&o>>>4==(o&=15)&&r>>>4==(r&=15)&&n.toString(16)+o.toString(16)+r.toString(16)},RGB:function(e,t){return e.getAlpha()>=1&&t._formatColor("rgb(rd,gd,bd)",e)},RGBA:function(e,t){return t._formatColor("rgba(rd,gd,bd,af)",e)},"RGB%":function(e,t){return e.getAlpha()>=1&&t._formatColor("rgb(rp%,gp%,bp%)",e)},"RGBA%":function(e,t){return t._formatColor("rgba(rp%,gp%,bp%,af)",e)},HSL:function(e,t){return e.getAlpha()>=1&&t._formatColor("hsl(hd,sd,vd)",e)},HSLA:function(e,t){return t._formatColor("hsla(hd,sd,vd,af)",e)},"HSL%":function(e,t){return e.getAlpha()>=1&&t._formatColor("hsl(hp%,sp%,vp%)",e)},"HSLA%":function(e,t){return t._formatColor("hsla(hp%,sp%,vp%,af)",e)},NAME:function(e,t){return t._closestName(e)},EXACT:function(e,t){return t._exactName(e)}},this.parsers={"":function(t){if(""===t)return new e.colorpicker.Color},NAME:function(t,i){var n=i._getSwatch(e.trim(t));if(n)return new e.colorpicker.Color(n.r,n.g,n.b)},RGBA:function(t){var i=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t);if(i)return new e.colorpicker.Color(i[1]/255,i[2]/255,i[3]/255,parseFloat(i[4]))},"RGBA%":function(t){var i=/^rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t);if(i)return new e.colorpicker.Color(i[1]/100,i[2]/100,i[3]/100,i[4]/100)},HSLA:function(t){var i=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t);if(i)return(new e.colorpicker.Color).setHSL(i[1]/255,i[2]/255,i[3]/255).setAlpha(parseFloat(i[4]))},"HSLA%":function(t){var i=/^hsla?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t);if(i)return(new e.colorpicker.Color).setHSL(i[1]/100,i[2]/100,i[3]/100).setAlpha(i[4]/100)},"#HEX":function(t){var i=/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(t);if(i)return new e.colorpicker.Color(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255)},"#HEX3":function(t){var i=/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(t);if(i)return new e.colorpicker.Color(parseInt(String(i[1])+i[1],16)/255,parseInt(String(i[2])+i[2],16)/255,parseInt(String(i[3])+i[3],16)/255)},HEX:function(t){var i=/^([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(t);if(i)return new e.colorpicker.Color(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255)},HEX3:function(t){var i=/^([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(t);if(i)return new e.colorpicker.Color(parseInt(String(i[1])+i[1],16)/255,parseInt(String(i[2])+i[2],16)/255,parseInt(String(i[3])+i[3],16)/255)}},this.partslists={full:["header","map","bar","hex","hsv","rgb","alpha","lab","cmyk","preview","swatches","footer"],popup:["map","bar","hex","hsv","rgb","alpha","preview","footer"],draggable:["header","map","bar","hex","hsv","rgb","alpha","preview","footer"],inline:["map","bar","hex","hsv","rgb","alpha","preview"]},this.limits={websafe:function(e){e.limit(6)},nibble:function(e){e.limit(16)},binary:function(e){e.limit(2)},name:function(e,t){var i=t._getSwatch(t._closestName(e));e.setRGB(i.r,i.g,i.b)}},this.parts={header:function(t){var i=null,n=function(){var e=t.options.title||t._getRegional("title"),i='<span class="ui-dialog-title">'+e+"</span>";return!t.inline&&t.options.showCloseButton&&(i+='<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a>'),'<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">'+i+"</div>"};this.init=function(){i=e(n()).prependTo(t.dialog);var o=e(".ui-dialog-titlebar-close",i);if(t._hoverable(o),t._focusable(o),o.click(function(e){e.preventDefault(),t.close(t.options.revert)}),!t.inline&&t.options.draggable){var r={handle:i};t.options.containment&&(r.containment=t.options.containment),t.dialog.draggable(r)}}},map:function(t){var i,n,o,r,a=this,s=null;i=function(r){if(t.opened){var a=e(".ui-colorpicker-map-layer-pointer",s),l=a.offset(),c=a.width(),u=a.height(),d=r.pageX-l.left,p=r.pageY-l.top;d>=0&&d<c&&p>=0&&p<u&&(r.stopImmediatePropagation(),r.preventDefault(),s.unbind("mousedown",i),e(document).bind("mouseup",n),e(document).bind("mousemove",o),o(r))}},n=function(t){t.stopImmediatePropagation(),t.preventDefault(),e(document).unbind("mouseup",n),e(document).unbind("mousemove",o),s.bind("mousedown",i)},o=function(i){if(i.stopImmediatePropagation(),i.preventDefault(),i.pageX!==a.x||i.pageY!==a.y){a.x=i.pageX,a.y=i.pageY;var n=e(".ui-colorpicker-map-layer-pointer",s),o=n.offset(),r=n.width(),l=n.height(),c=i.pageX-o.left,u=i.pageY-o.top;switch(c=Math.max(0,Math.min(c/r,1)),u=Math.max(0,Math.min(u/l,1)),t.mode){case"h":t.color.setHSV(null,c,1-u);break;case"s":case"a":t.color.setHSV(c,null,1-u);break;case"v":t.color.setHSV(c,1-u,null);break;case"r":t.color.setRGB(null,1-u,c);break;case"g":t.color.setRGB(1-u,null,c);break;case"b":t.color.setRGB(c,1-u,null)}t._change()}},r=function(){return'<div class="ui-colorpicker-map ui-colorpicker-map-'+(t.options.part.map.size||256)+' ui-colorpicker-border"><span class="ui-colorpicker-map-layer-1">&nbsp;</span><span class="ui-colorpicker-map-layer-2">&nbsp;</span>'+(t.options.alpha?'<span class="ui-colorpicker-map-layer-alpha">&nbsp;</span>':"")+'<span class="ui-colorpicker-map-layer-pointer"><span class="ui-colorpicker-map-pointer"></span></span></div>'},this.update=function(){var i=65*(t.options.part.map.size||256)/64;switch(t.mode){case"h":e(".ui-colorpicker-map-layer-1",s).css({"background-position":"0 0",opacity:""}).show(),e(".ui-colorpicker-map-layer-2",s).hide();break;case"s":case"a":e(".ui-colorpicker-map-layer-1",s).css({"background-position":"0 "+-i+"px",opacity:""}).show(),e(".ui-colorpicker-map-layer-2",s).css({"background-position":"0 "+2*-i+"px",opacity:""}).show();break;case"v":e(s).css("background-color","black"),e(".ui-colorpicker-map-layer-1",s).css({"background-position":"0 "+3*-i+"px",opacity:""}).show(),e(".ui-colorpicker-map-layer-2",s).hide();break;case"r":e(".ui-colorpicker-map-layer-1",s).css({"background-position":"0 "+4*-i+"px",opacity:""}).show(),e(".ui-colorpicker-map-layer-2",s).css({"background-position":"0 "+5*-i+"px",opacity:""}).show();break;case"g":e(".ui-colorpicker-map-layer-1",s).css({"background-position":"0 "+6*-i+"px",opacity:""}).show(),e(".ui-colorpicker-map-layer-2",s).css({"background-position":"0 "+7*-i+"px",opacity:""}).show();break;case"b":e(".ui-colorpicker-map-layer-1",s).css({"background-position":"0 "+8*-i+"px",opacity:""}).show(),e(".ui-colorpicker-map-layer-2",s).css({"background-position":"0 "+9*-i+"px",opacity:""}).show()}a.repaint()},this.repaint=function(){var i=e(".ui-colorpicker-map-layer-pointer",s),n=0,o=0;switch(t.mode){case"h":n=t.color.getHSV().s*i.width(),o=(1-t.color.getHSV().v)*i.width(),e(s).css("background-color",t.color.copy().setHSV(null,1,1).toCSS());break;case"s":case"a":n=t.color.getHSV().h*i.width(),o=(1-t.color.getHSV().v)*i.width(),e(".ui-colorpicker-map-layer-2",s).css("opacity",1-t.color.getHSV().s);break;case"v":n=t.color.getHSV().h*i.width(),o=(1-t.color.getHSV().s)*i.width(),e(".ui-colorpicker-map-layer-1",s).css("opacity",t.color.getHSV().v);break;case"r":n=t.color.getRGB().b*i.width(),o=(1-t.color.getRGB().g)*i.width(),e(".ui-colorpicker-map-layer-2",s).css("opacity",t.color.getRGB().r);break;case"g":n=t.color.getRGB().b*i.width(),o=(1-t.color.getRGB().r)*i.width(),e(".ui-colorpicker-map-layer-2",s).css("opacity",t.color.getRGB().g);break;case"b":n=t.color.getRGB().r*i.width(),o=(1-t.color.getRGB().g)*i.width(),e(".ui-colorpicker-map-layer-2",s).css("opacity",t.color.getRGB().b)}t.options.alpha&&e(".ui-colorpicker-map-layer-alpha",s).css("opacity",1-t.color.getAlpha()),e(".ui-colorpicker-map-pointer",s).css({left:n-7,top:o-7})},this.init=function(){s=e(r()).appendTo(e(".ui-colorpicker-map-container",t.dialog)),s.bind("mousedown",i)}},bar:function(t){var i,n,o,r,a=this,s=null;i=function(r){if(t.opened){var a=e(".ui-colorpicker-bar-layer-pointer",s),l=a.offset(),c=a.width(),u=a.height(),d=r.pageX-l.left,p=r.pageY-l.top;d>=0&&d<c&&p>=0&&p<u&&(r.stopImmediatePropagation(),r.preventDefault(),s.unbind("mousedown",i),e(document).bind("mouseup",n),e(document).bind("mousemove",o),o(r))}},n=function(t){t.stopImmediatePropagation(),t.preventDefault(),e(document).unbind("mouseup",n),e(document).unbind("mousemove",o),s.bind("mousedown",i)},o=function(i){if(i.stopImmediatePropagation(),i.preventDefault(),i.pageY!==a.y){a.y=i.pageY;var n=e(".ui-colorpicker-bar-layer-pointer",s),o=n.offset(),r=n.height(),l=i.pageY-o.top;switch(l=Math.max(0,Math.min(l/r,1)),t.mode){case"h":t.color.setHSV(1-l,null,null);break;case"s":t.color.setHSV(null,1-l,null);break;case"v":t.color.setHSV(null,null,1-l);break;case"r":t.color.setRGB(1-l,null,null);break;case"g":t.color.setRGB(null,1-l,null);break;case"b":t.color.setRGB(null,null,1-l);break;case"a":t.color.setAlpha(1-l)}t._change()}},r=function(){var e='<div class="ui-colorpicker-bar ui-colorpicker-bar-'+(t.options.part.bar.size||256)+'  ui-colorpicker-border"><span class="ui-colorpicker-bar-layer-1">&nbsp;</span><span class="ui-colorpicker-bar-layer-2">&nbsp;</span><span class="ui-colorpicker-bar-layer-3">&nbsp;</span><span class="ui-colorpicker-bar-layer-4">&nbsp;</span>';return t.options.alpha&&(e+='<span class="ui-colorpicker-bar-layer-alpha">&nbsp;</span><span class="ui-colorpicker-bar-layer-alphabar">&nbsp;</span>'),e+='<span class="ui-colorpicker-bar-layer-pointer"><span class="ui-colorpicker-bar-pointer"></span></span></div>'},this.update=function(){var i=65*(t.options.part.bar.size||256)/64;switch(t.mode){case"h":case"s":case"v":case"r":case"g":case"b":e(".ui-colorpicker-bar-layer-alpha",s).show(),e(".ui-colorpicker-bar-layer-alphabar",s).hide();break;case"a":e(".ui-colorpicker-bar-layer-alpha",s).hide(),e(".ui-colorpicker-bar-layer-alphabar",s).show()}switch(t.mode){case"h":e(".ui-colorpicker-bar-layer-1",s).css({"background-position":"0 0",opacity:""}).show(),e(".ui-colorpicker-bar-layer-2",s).hide(),e(".ui-colorpicker-bar-layer-3",s).hide(),e(".ui-colorpicker-bar-layer-4",s).hide();break;case"s":e(".ui-colorpicker-bar-layer-1",s).css({"background-position":"0 "+-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-2",s).css({"background-position":"0 "+2*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-3",s).hide(),e(".ui-colorpicker-bar-layer-4",s).hide();break;case"v":e(".ui-colorpicker-bar-layer-1",s).css({"background-position":"0 "+2*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-2",s).hide(),e(".ui-colorpicker-bar-layer-3",s).hide(),e(".ui-colorpicker-bar-layer-4",s).hide();break;case"r":e(".ui-colorpicker-bar-layer-1",s).css({"background-position":"0 "+6*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-2",s).css({"background-position":"0 "+5*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-3",s).css({"background-position":"0 "+3*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-4",s).css({"background-position":"0 "+4*-i+"px",opacity:""}).show();break;case"g":e(".ui-colorpicker-bar-layer-1",s).css({"background-position":"0 "+10*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-2",s).css({"background-position":"0 "+9*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-3",s).css({"background-position":"0 "+7*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-4",s).css({"background-position":"0 "+8*-i+"px",opacity:""}).show();break;case"b":e(".ui-colorpicker-bar-layer-1",s).css({"background-position":"0 "+14*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-2",s).css({"background-position":"0 "+13*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-3",s).css({"background-position":"0 "+11*-i+"px",opacity:""}).show(),e(".ui-colorpicker-bar-layer-4",s).css({"background-position":"0 "+12*-i+"px",opacity:""}).show();break;case"a":e(".ui-colorpicker-bar-layer-1",s).hide(),e(".ui-colorpicker-bar-layer-2",s).hide(),e(".ui-colorpicker-bar-layer-3",s).hide(),e(".ui-colorpicker-bar-layer-4",s).hide()}a.repaint()},this.repaint=function(){var i=e(".ui-colorpicker-bar-layer-pointer",s),n=0;switch(t.mode){case"h":n=(1-t.color.getHSV().h)*i.height();break;case"s":n=(1-t.color.getHSV().s)*i.height(),e(".ui-colorpicker-bar-layer-2",s).css("opacity",1-t.color.getHSV().v),e(s).css("background-color",t.color.copy().setHSV(null,1,null).toCSS());break;case"v":n=(1-t.color.getHSV().v)*i.height(),e(s).css("background-color",t.color.copy().setHSV(null,null,1).toCSS());break;case"r":n=(1-t.color.getRGB().r)*i.height(),e(".ui-colorpicker-bar-layer-2",s).css("opacity",Math.max(0,t.color.getRGB().b-t.color.getRGB().g)),e(".ui-colorpicker-bar-layer-3",s).css("opacity",Math.max(0,t.color.getRGB().g-t.color.getRGB().b)),e(".ui-colorpicker-bar-layer-4",s).css("opacity",Math.min(t.color.getRGB().b,t.color.getRGB().g));break;case"g":n=(1-t.color.getRGB().g)*i.height(),e(".ui-colorpicker-bar-layer-2",s).css("opacity",Math.max(0,t.color.getRGB().b-t.color.getRGB().r)),e(".ui-colorpicker-bar-layer-3",s).css("opacity",Math.max(0,t.color.getRGB().r-t.color.getRGB().b)),e(".ui-colorpicker-bar-layer-4",s).css("opacity",Math.min(t.color.getRGB().r,t.color.getRGB().b));break;case"b":n=(1-t.color.getRGB().b)*i.height(),e(".ui-colorpicker-bar-layer-2",s).css("opacity",Math.max(0,t.color.getRGB().r-t.color.getRGB().g)),e(".ui-colorpicker-bar-layer-3",s).css("opacity",Math.max(0,t.color.getRGB().g-t.color.getRGB().r)),e(".ui-colorpicker-bar-layer-4",s).css("opacity",Math.min(t.color.getRGB().r,t.color.getRGB().g));break;case"a":n=(1-t.color.getAlpha())*i.height(),e(s).css("background-color",t.color.copy().toCSS())}"a"!==t.mode&&e(".ui-colorpicker-bar-layer-alpha",s).css("opacity",1-t.color.getAlpha()),e(".ui-colorpicker-bar-pointer",s).css("top",n-3)},this.init=function(){s=e(r()).appendTo(e(".ui-colorpicker-bar-container",t.dialog)),s.bind("mousedown",i)}},preview:function(t){var i,n=null;i=function(){return'<div class="ui-colorpicker-preview ui-colorpicker-border"><div class="ui-colorpicker-preview-initial"><div class="ui-colorpicker-preview-initial-alpha"></div></div><div class="ui-colorpicker-preview-current"><div class="ui-colorpicker-preview-current-alpha"></div></div></div>'},this.init=function(){n=e(i()).appendTo(e(".ui-colorpicker-preview-container",t.dialog)),e(".ui-colorpicker-preview-initial",n).click(function(){t.color=t.currentColor.copy(),t._change()})},this.update=function(){t.options.alpha?e(".ui-colorpicker-preview-initial-alpha, .ui-colorpicker-preview-current-alpha",n).show():e(".ui-colorpicker-preview-initial-alpha, .ui-colorpicker-preview-current-alpha",n).hide(),this.repaint()},this.repaint=function(){e(".ui-colorpicker-preview-initial",n).css("background-color",t.currentColor.set?t.currentColor.toCSS():"").attr("title",t.currentColor.set?t.currentColor.toCSS():""),e(".ui-colorpicker-preview-initial-alpha",n).css("opacity",1-t.currentColor.getAlpha()),e(".ui-colorpicker-preview-current",n).css("background-color",t.color.set?t.color.toCSS():"").attr("title",t.color.set?t.color.toCSS():""),e(".ui-colorpicker-preview-current-alpha",n).css("opacity",1-t.color.getAlpha())}},hsv:function(t){var i,n=null;i=function(){var e="";return t.options.hsv&&(e+='<div class="ui-colorpicker-hsv-h"><input class="ui-colorpicker-mode" type="radio" value="h"/><label>'+t._getRegional("hsvH")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="360" size="10"/><span class="ui-colorpicker-unit">&deg;</span></div><div class="ui-colorpicker-hsv-s"><input class="ui-colorpicker-mode" type="radio" value="s"/><label>'+t._getRegional("hsvS")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%</span></div><div class="ui-colorpicker-hsv-v"><input class="ui-colorpicker-mode" type="radio" value="v"/><label>'+t._getRegional("hsvV")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%</span></div>'),'<div class="ui-colorpicker-hsv">'+e+"</div>"},this.init=function(){n=e(i()).appendTo(e(".ui-colorpicker-hsv-container",t.dialog)),e(".ui-colorpicker-mode",n).click(function(){t.mode=e(this).val(),t._updateAllParts()}),e(".ui-colorpicker-number",n).bind("change keyup",function(){t.color.setHSV(e(".ui-colorpicker-hsv-h .ui-colorpicker-number",n).val()/360,e(".ui-colorpicker-hsv-s .ui-colorpicker-number",n).val()/100,e(".ui-colorpicker-hsv-v .ui-colorpicker-number",n).val()/100),t._change()})},this.repaint=function(){var i=t.color.getHSV();i.h*=360,i.s*=100,i.v*=100,e.each(i,function(t,i){var o=e(".ui-colorpicker-hsv-"+t+" .ui-colorpicker-number",n);i=Math.round(i),parseInt(o.val(),10)!==i&&o.val(i)})},this.update=function(){e(".ui-colorpicker-mode",n).each(function(){e(this).attr("checked",e(this).val()===t.mode)}),this.repaint()}},rgb:function(t){var i,n=null;i=function(){var e="";return t.options.rgb&&(e+='<div class="ui-colorpicker-rgb-r"><input class="ui-colorpicker-mode" type="radio" value="r"/><label>'+t._getRegional("rgbR")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="255"/></div><div class="ui-colorpicker-rgb-g"><input class="ui-colorpicker-mode" type="radio" value="g"/><label>'+t._getRegional("rgbG")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="255"/></div><div class="ui-colorpicker-rgb-b"><input class="ui-colorpicker-mode" type="radio" value="b"/><label>'+t._getRegional("rgbB")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="255"/></div>'),'<div class="ui-colorpicker-rgb">'+e+"</div>"},this.init=function(){n=e(i()).appendTo(e(".ui-colorpicker-rgb-container",t.dialog)),e(".ui-colorpicker-mode",n).click(function(){t.mode=e(this).val(),t._updateAllParts()}),e(".ui-colorpicker-number",n).bind("change keyup",function(){e(".ui-colorpicker-rgb-r .ui-colorpicker-number",n).val();t.color.setRGB(e(".ui-colorpicker-rgb-r .ui-colorpicker-number",n).val()/255,e(".ui-colorpicker-rgb-g .ui-colorpicker-number",n).val()/255,e(".ui-colorpicker-rgb-b .ui-colorpicker-number",n).val()/255),t._change()})},this.repaint=function(){e.each(t.color.getRGB(),function(t,i){var o=e(".ui-colorpicker-rgb-"+t+" .ui-colorpicker-number",n);i=Math.floor(255*i),parseInt(o.val(),10)!==i&&o.val(i)})},this.update=function(){e(".ui-colorpicker-mode",n).each(function(){e(this).attr("checked",e(this).val()===t.mode)}),this.repaint()}},lab:function(t){var i=null,n=function(){var e="";return t.options.hsv&&(e+='<div class="ui-colorpicker-lab-l"><label>'+t._getRegional("labL")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/></div><div class="ui-colorpicker-lab-a"><label>'+t._getRegional("labA")+'</label><input class="ui-colorpicker-number" type="number" min="-128" max="127"/></div><div class="ui-colorpicker-lab-b"><label>'+t._getRegional("labB")+'</label><input class="ui-colorpicker-number" type="number" min="-128" max="127"/></div>'),'<div class="ui-colorpicker-lab">'+e+"</div>"};this.init=function(){i=e(n()).appendTo(e(".ui-colorpicker-lab-container",t.dialog)),e(".ui-colorpicker-number",i).bind("change keyup",function(n){t.color.setLAB(parseInt(e(".ui-colorpicker-lab-l .ui-colorpicker-number",i).val(),10)/100,(parseInt(e(".ui-colorpicker-lab-a .ui-colorpicker-number",i).val(),10)+128)/255,(parseInt(e(".ui-colorpicker-lab-b .ui-colorpicker-number",i).val(),10)+128)/255),t._change()})},this.repaint=function(){var n=t.color.getLAB();n.l*=100,n.a=255*n.a-128,n.b=255*n.b-128,e.each(n,function(t,n){var o=e(".ui-colorpicker-lab-"+t+" .ui-colorpicker-number",i);n=Math.round(n),parseInt(o.val(),10)!==n&&o.val(n)})},this.update=function(){this.repaint()}},cmyk:function(t){var i=null,n=function(){var e="";return t.options.hsv&&(e+='<div class="ui-colorpicker-cmyk-c"><label>'+t._getRegional("cmykC")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div><div class="ui-colorpicker-cmyk-m"><label>'+t._getRegional("cmykM")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div><div class="ui-colorpicker-cmyk-y"><label>'+t._getRegional("cmykY")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div><div class="ui-colorpicker-cmyk-k"><label>'+t._getRegional("cmykK")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div>'),'<div class="ui-colorpicker-cmyk">'+e+"</div>"};this.init=function(){i=e(n()).appendTo(e(".ui-colorpicker-cmyk-container",t.dialog)),e(".ui-colorpicker-number",i).bind("change keyup",function(n){t.color.setCMYK(parseInt(e(".ui-colorpicker-cmyk-c .ui-colorpicker-number",i).val(),10)/100,parseInt(e(".ui-colorpicker-cmyk-m .ui-colorpicker-number",i).val(),10)/100,parseInt(e(".ui-colorpicker-cmyk-y .ui-colorpicker-number",i).val(),10)/100,parseInt(e(".ui-colorpicker-cmyk-k .ui-colorpicker-number",i).val(),10)/100),t._change()})},this.repaint=function(){e.each(t.color.getCMYK(),function(t,n){var o=e(".ui-colorpicker-cmyk-"+t+" .ui-colorpicker-number",i);n=Math.round(100*n),parseInt(o.val(),10,10)!==n&&o.val(n)})},this.update=function(){this.repaint()}},alpha:function(t){var i,n=null;i=function(){var e="";return t.options.alpha&&(e+='<div class="ui-colorpicker-a"><input class="ui-colorpicker-mode" name="mode" type="radio" value="a"/><label>'+t._getRegional("alphaA")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div>'),'<div class="ui-colorpicker-alpha">'+e+"</div>"},this.init=function(){n=e(i()).appendTo(e(".ui-colorpicker-alpha-container",t.dialog)),e(".ui-colorpicker-mode",n).click(function(){t.mode=e(this).val(),t._updateAllParts()}),e(".ui-colorpicker-number",n).bind("change keyup",function(){t.color.setAlpha(e(".ui-colorpicker-a .ui-colorpicker-number",n).val()/100),t._change()})},this.update=function(){e(".ui-colorpicker-mode",n).each(function(){e(this).attr("checked",e(this).val()===t.mode)}),this.repaint()},this.repaint=function(){var i=e(".ui-colorpicker-a .ui-colorpicker-number",n),o=Math.round(100*t.color.getAlpha());parseInt(i.val(),10)!==o&&i.val(o)}},hex:function(t){var o,r=null;o=function(){var e="";return t.options.alpha&&(e+='<input class="ui-colorpicker-hex-alpha" type="text" maxlength="2" size="2"/>'),'<div class="ui-colorpicker-hex"><label>#</label>'+(e+='<input class="ui-colorpicker-hex-input" type="text" maxlength="6" size="6"/>')+"</div>"},this.init=function(){r=e(o()).appendTo(e(".ui-colorpicker-hex-container",t.dialog)),e(".ui-colorpicker-hex-input",r).bind("change keydown keyup",function(t,i,n){/[^a-fA-F0-9]/.test(e(this).val())&&e(this).val(e(this).val().replace(/[^a-fA-F0-9]/,""))}),e(".ui-colorpicker-hex-input",r).bind("change keyup",function(){t.color=n(e(this).val()).setAlpha(t.color.getAlpha()),t._change()}),e(".ui-colorpicker-hex-alpha",r).bind("change keydown keyup",function(){/[^a-fA-F0-9]/.test(e(this).val())&&e(this).val(e(this).val().replace(/[^a-fA-F0-9]/,""))}),e(".ui-colorpicker-hex-alpha",r).bind("change keyup",function(){t.color.setAlpha(parseInt(e(".ui-colorpicker-hex-alpha",r).val(),16)/255),t._change()})},this.update=function(){this.repaint()},this.repaint=function(){e(".ui-colorpicker-hex-input",r).is(":focus")||e(".ui-colorpicker-hex-input",r).val(t.color.toHex(!0)),e(".ui-colorpicker-hex-alpha",r).is(":focus")||e(".ui-colorpicker-hex-alpha",r).val(i(255*t.color.getAlpha()))}},swatches:function(t){var i=null,n=function(){var i="";return t._eachSwatch(function(t,n){var o=new e.colorpicker.Color(n.r,n.g,n.b),r=o.toCSS();i+='<div class="ui-colorpicker-swatch" style="background-color:'+r+'" title="'+t+'"></div>'}),'<div class="ui-colorpicker-swatches ui-colorpicker-border" style="width:'+t.options.swatchesWidth+'px">'+i+"</div>"};this.init=function(){i=e(n()).appendTo(e(".ui-colorpicker-swatches-container",t.dialog)),e(".ui-colorpicker-swatch",i).click(function(){t.color=t._parseColor(e(this).css("background-color")),t._change()})}},footer:function(i){var n=null,o="ui-colorpicker-special-transparent-"+t,r="ui-colorpicker-special-none-"+t,a=function(){var e="";return(i.options.alpha||!i.inline&&i.options.showNoneButton)&&(e+='<div class="ui-colorpicker-buttonset">',i.options.alpha&&(e+='<input type="radio" name="ui-colorpicker-special" id="'+o+'" class="ui-colorpicker-special-transparent"/><label for="'+o+'">'+i._getRegional("transparent")+"</label>"),!i.inline&&i.options.showNoneButton&&(e+='<input type="radio" name="ui-colorpicker-special" id="'+r+'" class="ui-colorpicker-special-none"><label for="'+r+'">'+i._getRegional("none")+"</label>"),e+="</div>"),i.inline||(e+='<div class="ui-dialog-buttonset">',i.options.showCancelButton&&(e+='<button class="ui-colorpicker-cancel">'+i._getRegional("cancel")+"</button>"),e+='<button class="ui-colorpicker-ok">'+i._getRegional("ok")+"</button>",e+="</div>"),'<div class="ui-dialog-buttonpane ui-widget-content">'+e+"</div>"};this.init=function(){n=e(a()).appendTo(i.dialog),e(".ui-colorpicker-ok",n).button().click(function(){i.close()}),e(".ui-colorpicker-cancel",n).button().click(function(){i.close(!0)}),e(".ui-colorpicker-buttonset",n).buttonset(),e(".ui-colorpicker-special-color",n).click(function(){i._change()}),e("#"+r,n).click(function(){i.color.set=!1,i._change()}),e("#"+o,n).click(function(){i.color.setAlpha(0),i._change()})},this.repaint=function(){i.color.set?0===i.color.getAlpha()?e(".ui-colorpicker-special-transparent",n).attr("checked",!0).button("refresh"):e("input",n).attr("checked",!1).button("refresh"):e(".ui-colorpicker-special-none",n).attr("checked",!0).button("refresh")},this.update=function(){}}},this.Color=function(){var t={rgb:{r:0,g:0,b:0},hsv:{h:0,s:0,v:0},hsl:{h:0,s:0,l:0},lab:{l:0,a:0,b:0},cmyk:{c:0,m:0,y:0,k:1}},i=1,n=[.9504285,1,1.0889],o=arguments,r=function(e){return isNaN(e)||null===e?0:("string"==typeof e&&(e=parseInt(e,10)),Math.max(0,Math.min(e,1)))},a=function(e){var t="0123456789abcdef",i=e%16,n=(e-i)/16;return t.charAt(n)+t.charAt(i)},s=function(e){var t=e.r>.04045?Math.pow((e.r+.055)/1.055,2.4):e.r/12.92,i=e.g>.04045?Math.pow((e.g+.055)/1.055,2.4):e.g/12.92,n=e.b>.04045?Math.pow((e.b+.055)/1.055,2.4):e.b/12.92;return{x:.4124*t+.3576*i+.1805*n,y:.2126*t+.7152*i+.0722*n,z:.0193*t+.1192*i+.9505*n}},l=function(e){var t={r:3.2406*e.x+-1.5372*e.y+-.4986*e.z,g:-.9689*e.x+1.8758*e.y+.0415*e.z,b:.0557*e.x+-.204*e.y+1.057*e.z};return t.r=t.r>.0031308?1.055*Math.pow(t.r,1/2.4)-.055:12.92*t.r,t.g=t.g>.0031308?1.055*Math.pow(t.g,1/2.4)-.055:12.92*t.g,t.b=t.b>.0031308?1.055*Math.pow(t.b,1/2.4)-.055:12.92*t.b,t},c=function(e){var t,i,n,o=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),a=r-o,s={h:0,s:0,v:r};return 0===a?(s.h=0,s.s=0):(s.s=a/r,t=((r-e.r)/6+a/2)/a,i=((r-e.g)/6+a/2)/a,n=((r-e.b)/6+a/2)/a,e.r===r?s.h=n-i:e.g===r?s.h=1/3+t-n:e.b===r&&(s.h=2/3+i-t),s.h<0?s.h+=1:s.h>1&&(s.h-=1)),s},u=function(e){var t,i,n,o,r,a={r:0,g:0,b:0};return 0===e.s?a.r=a.g=a.b=e.v:(t=1===e.h?0:6*e.h,i=Math.floor(t),n=e.v*(1-e.s),o=e.v*(1-e.s*(t-i)),r=e.v*(1-e.s*(1-(t-i))),0===i?(a.r=e.v,a.g=r,a.b=n):1===i?(a.r=o,a.g=e.v,a.b=n):2===i?(a.r=n,a.g=e.v,a.b=r):3===i?(a.r=n,a.g=o,a.b=e.v):4===i?(a.r=r,a.g=n,a.b=e.v):(a.r=e.v,a.g=n,a.b=o)),a},d=function(e){var t,i,n,o=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),a=r-o,s={h:0,s:0,l:(r+o)/2};return 0===a?(s.h=0,s.s=0):(s.s=s.l<.5?a/(r+o):a/(2-r-o),t=((r-e.r)/6+a/2)/a,i=((r-e.g)/6+a/2)/a,n=((r-e.b)/6+a/2)/a,e.r===r?s.h=n-i:e.g===r?s.h=1/3+t-n:e.b===r&&(s.h=2/3+i-t),s.h<0?s.h+=1:s.h>1&&(s.h-=1)),s},p=function(e){var t,i,n=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),6*i<1?e+6*(t-e)*i:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e};return 0===e.s?{r:e.l,g:e.l,b:e.l}:(i=e.l<.5?e.l*(1+e.s):e.l+e.s-e.s*e.l,t=2*e.l-i,{r:n(t,i,e.h+1/3),g:n(t,i,e.h),b:n(t,i,e.h-1/3)})},f=function(e){var t=e.x/n[0],i=e.y/n[1],o=e.z/n[2];return t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,{l:(116*i-16)/100,a:(500*(t-i)+128)/255,b:(200*(i-o)+128)/255}},h=function(e){var t={l:100*e.l,a:255*e.a-128,b:255*e.b-128},i={x:0,y:(t.l+16)/116,z:0};return i.x=t.a/500+i.y,i.z=i.y-t.b/200,i.x=Math.pow(i.x,3)>.008856?Math.pow(i.x,3):(i.x-16/116)/7.787,i.y=Math.pow(i.y,3)>.008856?Math.pow(i.y,3):(i.y-16/116)/7.787,i.z=Math.pow(i.z,3)>.008856?Math.pow(i.z,3):(i.z-16/116)/7.787,i.x*=n[0],i.y*=n[1],i.z*=n[2],i},g=function(e){return{c:1-e.r,m:1-e.g,y:1-e.b}},_=function(e){return{r:1-e.c,g:1-e.m,b:1-e.y}},m=function(e){var t=1;return e.c<t&&(t=e.c),e.m<t&&(t=e.m),e.y<t&&(t=e.y),1===t?{c:0,m:0,y:0,k:1}:{c:(e.c-t)/(1-t),m:(e.m-t)/(1-t),y:(e.y-t)/(1-t),k:t}},v=function(e){return{c:e.c*(1-e.k)+e.k,m:e.m*(1-e.k)+e.k,y:e.y*(1-e.k)+e.k}};this.set=!1,this.setAlpha=function(e){return null!==e&&(i=r(e)),this.set=!0,this},this.getAlpha=function(){return i},this.setRGB=function(e,i,n){return t={rgb:this.getRGB()},null!==e&&(t.rgb.r=r(e)),null!==i&&(t.rgb.g=r(i)),null!==n&&(t.rgb.b=r(n)),this.set=!0,this},this.setHSV=function(e,i,n){return t={hsv:this.getHSV()},null!==e&&(t.hsv.h=r(e)),null!==i&&(t.hsv.s=r(i)),null!==n&&(t.hsv.v=r(n)),this.set=!0,this},this.setHSL=function(e,i,n){return t={hsl:this.getHSL()},null!==e&&(t.hsl.h=r(e)),null!==i&&(t.hsl.s=r(i)),null!==n&&(t.hsl.l=r(n)),this.set=!0,this},this.setLAB=function(e,i,n){return t={lab:this.getLAB()},null!==e&&(t.lab.l=r(e)),null!==i&&(t.lab.a=r(i)),null!==n&&(t.lab.b=r(n)),this.set=!0,this},this.setCMYK=function(e,i,n,o){return t={cmyk:this.getCMYK()},null!==e&&(t.cmyk.c=r(e)),null!==i&&(t.cmyk.m=r(i)),null!==n&&(t.cmyk.y=r(n)),null!==o&&(t.cmyk.k=r(o)),this.set=!0,this},this.getRGB=function(){return t.rgb||(t.rgb=t.lab?l(h(t.lab)):t.hsv?u(t.hsv):t.hsl?p(t.hsl):t.cmyk?_(v(t.cmyk)):{r:0,g:0,b:0},t.rgb.r=r(t.rgb.r),t.rgb.g=r(t.rgb.g),t.rgb.b=r(t.rgb.b)),e.extend({},t.rgb)},this.getHSV=function(){return t.hsv||(t.hsv=t.lab?c(this.getRGB()):t.rgb?c(t.rgb):t.hsl?c(this.getRGB()):t.cmyk?c(this.getRGB()):{h:0,s:0,v:0},t.hsv.h=r(t.hsv.h),t.hsv.s=r(t.hsv.s),t.hsv.v=r(t.hsv.v)),e.extend({},t.hsv)},this.getHSL=function(){return t.hsl||(t.hsl=t.rgb?d(t.rgb):t.hsv?d(this.getRGB()):t.cmyk?d(this.getRGB()):t.hsv?d(this.getRGB()):{h:0,s:0,l:0},t.hsl.h=r(t.hsl.h),t.hsl.s=r(t.hsl.s),t.hsl.l=r(t.hsl.l)),e.extend({},t.hsl)},this.getCMYK=function(){return t.cmyk||(t.cmyk=t.rgb?m(g(t.rgb)):t.hsv?m(g(this.getRGB())):t.hsl?m(g(this.getRGB())):t.lab?m(g(this.getRGB())):{c:0,m:0,y:0,k:1},t.cmyk.c=r(t.cmyk.c),t.cmyk.m=r(t.cmyk.m),t.cmyk.y=r(t.cmyk.y),t.cmyk.k=r(t.cmyk.k)),e.extend({},t.cmyk)},this.getLAB=function(){return t.lab||(t.lab=t.rgb?f(s(t.rgb)):t.hsv?f(s(this.getRGB())):t.hsl?f(s(this.getRGB())):t.cmyk?f(s(this.getRGB())):{l:0,a:0,b:0},t.lab.l=r(t.lab.l),t.lab.a=r(t.lab.a),t.lab.b=r(t.lab.b)),e.extend({},t.lab)},this.getChannels=function(){return{r:this.getRGB().r,g:this.getRGB().g,b:this.getRGB().b,a:this.getAlpha(),h:this.getHSV().h,s:this.getHSV().s,v:this.getHSV().v,c:this.getCMYK().c,m:this.getCMYK().m,y:this.getCMYK().y,k:this.getCMYK().k,L:this.getLAB().l,A:this.getLAB().a,B:this.getLAB().b}},this.getSpaces=function(){return e.extend(!0,{},t)},this.distance=function(e){var t,i="lab",n="get"+i.toUpperCase(),o=this[n](),r=e[n](),a=0;for(t in o)a+=Math.pow(o[t]-r[t],2);return a},this.equals=function(e){var t=this.getRGB(),i=e.getRGB();return this.getAlpha()===e.getAlpha()&&t.r===i.r&&t.g===i.g&&t.b===i.b},this.limit=function(e){e-=1;var t=this.getRGB();this.setRGB(Math.round(t.r*e)/e,Math.round(t.g*e)/e,Math.round(t.b*e)/e)},this.toHex=function(){var e=this.getRGB();return a(255*e.r)+a(255*e.g)+a(255*e.b)},this.toCSS=function(){return"#"+this.toHex()},this.copy=function(){var t=new e.colorpicker.Color(this.getSpaces(),this.getAlpha());return t.set=this.set,t},2===o.length&&(t=o[0],this.setAlpha(0===o[1]?0:o[1]||1),this.set=!0),o.length>2&&(this.setRGB(o[0],o[1],o[2]),this.setAlpha(0===o[3]?0:o[3]||1),this.set=!0)}},e.widget("vanderlee.colorpicker",{options:{alpha:!1,altAlpha:!0,altField:"",altOnChange:!0,altProperties:"background-color",autoOpen:!1,buttonClass:null,buttonColorize:!1,buttonImage:"images/ui-colorpicker.png",buttonImageOnly:!1,buttonText:null,closeOnEscape:!0,closeOnOutside:!0,color:"#00FF00",colorFormat:"HEX",draggable:!0,containment:null,duration:"fast",hsv:!0,inline:!0,inlineFrame:!0,layout:{map:[0,0,1,5],bar:[1,0,1,5],preview:[2,0,1,1],hsv:[2,1,1,1],rgb:[2,2,1,1],alpha:[2,3,1,1],hex:[2,4,1,1],lab:[3,1,1,1],cmyk:[3,2,1,2],swatches:[4,0,1,5]},limit:"",modal:!1,mode:"h",okOnEnter:!1,parts:"",part:{map:{size:256},bar:{size:256}},regional:"",revert:!1,rgb:!0,showAnim:"fadeIn",showCancelButton:!0,showNoneButton:!1,showCloseButton:!0,showOn:"focus click alt",showOptions:{},swatches:null,swatchesWidth:84,title:null,cancel:null,close:null,init:null,select:null,ok:null,open:null},_create:function(){var i,n=this;return++t,n.widgetEventPrefix="colorpicker",n.opened=!1,n.generated=!1,n.inline=!1,n.changed=!1,n.dialog=null,n.button=null,n.image=null,n.overlay=null,n.mode=n.options.mode,n.element.is("input")||!1===n.options.inline?(n._setColor(n.element.is("input")?n.element.val():n.options.color),n._callback("init"),/\bfocus|both\b/.test(n.options.showOn)&&n.element.bind("focus",function(){n.open()}),/\bclick|both\b/.test(n.options.showOn)&&n.element.bind("click",function(){n.open()}),/\bbutton|both\b/.test(n.options.showOn)&&(""!==n.options.buttonImage&&(i=n.options.buttonText||n._getRegional("button"),n.image=e("<img/>").attr({src:n.options.buttonImage,alt:i,title:i}),n.options.buttonClass&&n.image.attr("class",n.options.buttonClass),n._setImageBackground()),n.options.buttonImageOnly&&n.image?n.button=n.image:(n.button=e('<button type="button"></button>').html(n.image||n.options.buttonText).button(),n.image=n.image?e("img",n.button).first():null),n.button.insertAfter(n.element).click(function(){n[n.opened?"close":"open"]()})),/\balt|both\b/.test(n.options.showOn)&&e(n.options.altField).bind("click",function(){n.open()}),n.options.autoOpen&&n.open()):(n.inline=!0,n._generate(),n.opened=!0),this},_setOption:function(t,i){var n=this;switch(t){case"disabled":i?n.dialog.addClass("ui-colorpicker-disabled"):n.dialog.removeClass("ui-colorpicker-disabled")}e.Widget.prototype._setOption.apply(n,arguments)},_setImageBackground:function(){this.image&&this.options.buttonColorize&&this.image.css("background-color",this.color.set?this._formatColor("RGBA",this.color):"")},_setAltField:function(){if(this.options.altOnChange&&this.options.altField&&this.options.altProperties){var t,i,n=this.options.altProperties.split(",");for(t=0;t<=n.length;++t)switch(i=e.trim(n[t])){case"color":case"fill":case"stroke":case"background-color":case"backgroundColor":case"outline-color":case"border-color":e(this.options.altField).css(i,this.color.set?this.color.toCSS():"")}this.options.altAlpha&&e(this.options.altField).css("opacity",this.color.set?this.color.getAlpha():"")}},_setColor:function(e){this.color=this._parseColor(e),this.currentColor=this.color.copy(),this._setImageBackground(),this._setAltField()},setColor:function(e){this._setColor(e),this._change()},getColor:function(e){return this._formatColor(e||this.options.colorFormat,this.color)},_generateInline:function(){var t=this;e(t.element).html(t.options.inlineFrame?'<div class="ui-colorpicker ui-colorpicker-inline ui-dialog ui-widget ui-widget-content ui-corner-all"></div>':'<div class="ui-colorpicker ui-colorpicker-inline"></div>'),t.dialog=e(".ui-colorpicker",t.element)},_generatePopup:function(){var t=this;e("body").append('<div class="ui-colorpicker ui-colorpicker-dialog ui-dialog ui-widget ui-widget-content ui-corner-all" style="display: none;"></div>'),t.dialog=e(".ui-colorpicker:last"),e(document).delegate("html","touchstart click",function(i){if(t.opened&&i.target!==t.element[0]&&!t.overlay){if(t.dialog.is(i.target)||t.dialog.has(i.target).length>0)return void t.element.blur();var n,o=e(i.target).parents();for(o.push(i.target),n=0;n<=o.length;++n){if(null!==t.button&&o[n]===t.button[0])return;if(/\balt|both\b/.test(t.options.showOn)&&e(t.options.altField).is(o[n]))return}t.options.closeOnOutside&&t.close(t.options.revert)}}),e(document).keydown(function(e){t.opened&&27===e.keyCode&&t.options.closeOnEscape&&t.close(t.options.revert),t.opened&&13===e.keyCode&&t.options.okOnEnter&&t.close()}),t.element.keydown(function(e){9===e.keyCode&&t.close()}).keyup(function(e){var i=t._parseColor(t.element.val());t.color.equals(i)||(t.color=i,t._change())})},_generate:function(){var t,i,n,r,a=this;a._setColor(a.inline||!a.element.is("input")?a.options.color:a.element.val()),a[a.inline?"_generateInline":"_generatePopup"](),t="string"==typeof a.options.parts?e.colorpicker.partslists[a.options.parts]?e.colorpicker.partslists[a.options.parts]:e.colorpicker.partslists[a.inline?"inline":"popup"]:a.options.parts,a.parts={},e.each(t,function(t,i){e.colorpicker.parts[i]&&(a.parts[i]=new e.colorpicker.parts[i](a))}),a.generated||(i=[],e.each(a.options.layout,function(e,t){a.parts[e]&&i.push({part:e,pos:t})}),n=e(o(i,function(e,t,i){return r=["ui-colorpicker-"+e.part+"-container"],t>0&&r.push("ui-colorpicker-padding-left"),i>0&&r.push("ui-colorpicker-padding-top"),'<td  class="'+r.join(" ")+'"'+(e.pos[2]>1?' colspan="'+e.pos[2]+'"':"")+(e.pos[3]>1?' rowspan="'+e.pos[3]+'"':"")+' valign="top"></td>'})).appendTo(a.dialog),a.options.inlineFrame&&n.addClass("ui-dialog-content ui-widget-content"),a._initAllParts(),a._updateAllParts(),a.generated=!0)},_effectGeneric:function(t,i,n,o,r){var a=this;e.effects&&e.effects[a.options.showAnim]?t[i](a.options.showAnim,a.options.showOptions,a.options.duration,r):(t["slideDown"===a.options.showAnim?n:"fadeIn"===a.options.showAnim?o:i](a.options.showAnim?a.options.duration:null,r),a.options.showAnim&&a.options.duration||r())},_effectShow:function(e,t){this._effectGeneric(e,"show","slideDown","fadeIn",t)},_effectHide:function(e,t){this._effectGeneric(e,"hide","slideUp","fadeOut",t)},open:function(){var t,i,n,o,r,a,s,l,c,u=this;if(!u.opened){if(u._generate(),u.element.is(":hidden")?(c=e("<div/>").insertBefore(u.element),t=c.offset(),c.remove()):t=u.element.offset(),i=e(window).height()+e(window).scrollTop(),n=e(window).width()+e(window).scrollLeft(),o=u.dialog.outerHeight(!1),r=u.dialog.outerWidth(),a=t.left,s=t.top+u.element.outerHeight(!1),a+r>n&&(a=Math.max(0,n-r)),s+o>i&&(s=t.top-o>=e(window).scrollTop()?t.top-o:Math.max(0,i-o)),u.dialog.css({left:a,top:s}),l=0,e(u.element[0]).parents().each(function(){var t=e(this).css("z-index");if("number"!=typeof t&&"string"!=typeof t||""===t||isNaN(t))e(this).siblings().each(function(){var t=e(this).css("z-index");"number"!=typeof t&&"string"!=typeof t||""===t||isNaN(t)||t>l&&(l=parseInt(t,10))});else if(t>l)return l=parseInt(t,10),!1}),u.dialog.css("z-index",l+=2),u.overlay=u.options.modal?new e.ui.dialog.overlay(u):null,null!==u.overlay){var d=u.overlay.$el.css("z-index");"number"!=typeof d&&"string"!=typeof d||""===d||isNaN(d)||u.dialog.css("z-index",l+d+2)}u._effectShow(this.dialog),u.opened=!0,u._callback("open",!0),e(function(){u._repaintAllParts()})}},close:function(e){var t=this;t.opened&&(e?(t.color=t.currentColor.copy(),t._change(),t._callback("cancel",!0)):(t.currentColor=t.color.copy(),t._callback("ok",!0)),t.changed=!1,t._effectHide(t.dialog,function(){t.dialog.remove(),t.dialog=null,t.generated=!1,t.opened=!1,t._callback("close",!0)}),t.overlay&&t.overlay.destroy())},destroy:function(){this.element.unbind(),null!==this.image&&this.image.remove(),null!==this.button&&this.button.remove(),null!==this.dialog&&this.dialog.remove(),this.overlay&&this.overlay.destroy()},_callback:function(e,t){var i,n,o=this;return o.color.set?(i={formatted:o._formatColor(o.options.colorFormat,o.color),colorPicker:o},n=o.color.getLAB(),n.a=2*n.a-1,n.b=2*n.b-1,!0===t&&(i.a=o.color.getAlpha(),i.rgb=o.color.getRGB(),i.hsv=o.color.getHSV(),i.cmyk=o.color.getCMYK(),i.hsl=o.color.getHSL(),i.lab=n),o._trigger(e,null,i)):o._trigger(e,null,{formatted:"",colorPicker:o})},_initAllParts:function(){e.each(this.parts,function(e,t){t.init&&t.init()})},_updateAllParts:function(){e.each(this.parts,function(e,t){t.update&&t.update()})},_repaintAllParts:function(){e.each(this.parts,function(e,t){t.repaint&&t.repaint()})},_change:function(){this.changed=!0,this.options.limit&&e.colorpicker.limits[this.options.limit]&&e.colorpicker.limits[this.options.limit](this.color,this),this.inline||(this.color.set?this.color.equals(this._parseColor(this.element.val()))||this.element.val(this._formatColor(this.options.colorFormat,this.color)):this.element.val(""),this._setImageBackground(),this._setAltField()),this.options.color=this.color.set?this.color.toCSS():"",this.opened&&this._repaintAllParts(),this._callback("select")},_hoverable:function(e){e.hover(function(){e.addClass("ui-state-hover")},function(){e.removeClass("ui-state-hover")})},_focusable:function(e){e.focus(function(){e.addClass("ui-state-focus")}).blur(function(){e.removeClass("ui-state-focus")})},_getRegional:function(t){return void 0!==e.colorpicker.regional[this.options.regional][t]?e.colorpicker.regional[this.options.regional][t]:e.colorpicker.regional[""][t]},_getSwatches:function(){return"string"==typeof this.options.swatches?e.colorpicker.swatches[this.options.swatches]:e.isPlainObject(this.options.swatches)?this.colorpicker.swatches:e.colorpicker.swatches.html},_eachSwatch:function(t){var i,n=this._getSwatches();e.each(n,function(o,r){i=e.isArray(n)?r.name:o,t(i,r)})},_getSwatch:function(e){var t=!1;return this._eachSwatch(function(i,n){return i.toLowerCase()!=e.toLowerCase()||(t=n,!1)}),t},_parseColor:function(t){var i,n=this;return e.each(e.colorpicker.parsers,function(e,o){if(i=o(t,n))return!1}),i||new e.colorpicker.Color},_exactName:function(t){var i=!1;return this._eachSwatch(function(n,o){return!t.equals(new e.colorpicker.Color(o.r,o.g,o.b))||(i=n,!1)}),i},_closestName:function(t){var i,n=(t.getRGB(),null),o=!1;return this._eachSwatch(function(r,a){if((i=t.distance(new e.colorpicker.Color(a.r,a.g,a.b)))<n||null===n){if(o=r,0===i)return!1;n=i}return!0}),o},_formatColor:function(t,n){var o=this,r=null,a={x:function(e){return i(255*e)},d:function(e){return Math.floor(255*e)},f:function(e){return e},p:function(e){return 100*e}},s=n.getChannels();return e.isArray(t)||(t=[t]),e.each(t,function(t,i){return e.colorpicker.writers[i]?!1===(r=e.colorpicker.writers[i](n,o)):(r=i.replace(/\\?[argbhsvcmykLAB][xdfp]/g,function(e){return e.match(/^\\/)?e.slice(1):a[e.charAt(1)](s[e.charAt(0)])}),!1)}),r}})}(e)}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e(function(e){e.colorpicker.parts.switcher=function(t){this.init=function(){var i=t.dialog,n=e('<div class="ui-colorpicker-switcher-rgb">RGB</div>'),o=e('<div class="ui-colorpicker-switcher-cmyk">CMYK</div>');t.element.val(t._formatColor("#HEX",t.color)),i.addClass("ui-colorpicker-mode-rgb"),e('<div class="ui-colorpicker-switcher"/>').append(n,o).appendTo(i),e(n).on("click",function(){i.hasClass("ui-colorpicker-mode-rgb")||(t.options.colorFormat="#HEX",t.element.val(t._formatColor("#HEX",t.color)),i.removeClass("ui-colorpicker-mode-cmyk").addClass("ui-colorpicker-mode-rgb"))}),e(o).on("click",function(){i.hasClass("ui-colorpicker-mode-cmyk")||(t.options.colorFormat="#CMYK",t.element.val(t._formatColor("#CMYK",t.color)),t.mode="h",t._updateAllParts(),i.removeClass("ui-colorpicker-mode-rgb").addClass("ui-colorpicker-mode-cmyk"))})}},e.colorpicker.writers["#CMYK"]=function(e,t){var i=e.getCMYK();return"#"+("00"+Math.floor(255*i.c)).slice(-3)+("00"+Math.floor(255*i.m)).slice(-3)+("00"+Math.floor(255*i.y)).slice(-3)+("00"+Math.floor(255*i.k)).slice(-3)},e.colorpicker.parsers["#CMYK"]=function(t){var i=/^#(\d{3})(\d{3})(\d{3})(\d{3})$/.exec(t);if(i)return(new e.colorpicker.Color).setCMYK(i[1]/255,i[2]/255,i[3]/255,i[4]/255)}})}).call(t,i(0))},function(e,t,i){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function i(t,i,n){var o="";e.trim(i)&&(o+=i),e.trim(n)&&(o&&(o+="<br/>"),o+="<small>"+n+"</small>"),o&&t.qtip({content:o,position:{corner:{target:"topLeft",tooltip:"bottomLeft"}},show:{delay:1,solo:!0,when:{event:"focus"}},hide:{when:{event:"unfocus"}}})}var n={select:function(e){this.find(" > .zp-combobox-input-wrapper > input").val(this.data("options")[e])}};e.fn.combobox=function(o){var r={select:function(e,t){}};if(n[o])return n[o].apply(this,Array.prototype.slice.call(arguments,1));"object"!==(void 0===o?"undefined":t(o))&&o?e.error("Method "+o+" does not exist on jQuery.power_crop"):e.extend(r,o);var a=e(this),s=a.children(":selected"),l=[];a.children("option").each(function(){l.push(e(this).text())});var c=a.parent().data("options",l);i(c,a.attr("title"),"(Select or enter a value)");var u=e("<input />").attr("id",a.attr("id")).attr("name",a.attr("name")).attr("class","input-text "+a.attr("class")).insertAfter(a).val(s.text()?s.text():"").autocomplete({appendTo:c,delay:0,minLength:0,position:{my:"left top",offset:"0",at:"left bottom",of:c,collision:"none"},source:l,open:function(e,t){u.parent().parent().addClass("z-index-1"),d.addClass("opened")},select:function(e,t){for(var i=0;i<l.length&&l[i]!=t.item.value;i++);return t.item.index=i,r.select.apply(this,[e,t])},close:function(e,t){u.parent().parent().removeClass("z-index-1"),d.removeClass("opened")}}).wrap('<div class="zp-combobox-input-wrapper"/>');a.remove();var d=e('<div class="zp-combobox-button"><div class="zp-combobox-icon-wrapper"><div class="zp-combobox-button-icon" /></div></div>').click(function(){u.autocomplete("widget").is(":visible")?u.autocomplete("close").focus():u.autocomplete("search","").focus()}).appendTo(c);return u}}(e)}).call(t,i(0))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(24),s=n(a),l=i(1),c=n(l),u=i(4),d=n(u),p=function(){function e(){o(this,e)}return r(e,null,[{key:"zp_dataset_initialise",value:function(e){var t=(0,c.default)(".zp-dataset");t.find(".zp-dataset-checkbox").on("hover",function(){(0,c.default)(this).parent().addClass("zp-dataset-active")},function(){(0,c.default)(this).parent().removeClass("zp-dataset-active")}),t.find("td").filter(":not(.zp-dataset-checkbox)").on("click",function(){var t=(0,c.default)(this);if(e.template_details["dataset-integrity-enforce"])return void t.parent().find("> .zp-dataset-checkbox > input").mousedown().click();var i=e.template_details.pages[e.current_page],n=t.attr("class");if(!(i.fields&&i.fields[n]&&i.fields[n].dataset))return!1;var o=t.parent(),r=o.parent();r.children(".zp-dataset-selected").removeClass("zp-dataset-selected").find("input").prop("checked",!1).end().children().slice(1).addClass("zp-dataset-selected");var a=r.children().index(o);(0,c.default)("#input-fields-page-"+e.current_page).find('[name="zetaprints-_'+n+'"]').val(i.fields[n].dataset[a].text),r.find("td").filter("."+n.replace(/ /g,".")).removeClass("zp-dataset-selected"),d.default.instance().product_form.modified=!0,t.addClass("zp-dataset-selected")});var i=t.find("input");i.on("mousedown",function(){i.filter(":checked").prop("checked",!1)}).on("click",function(){var t=e.template_details.pages[e.current_page],i=t.fields;if(i){var n=(0,c.default)(this).parent().parent();n.parent().find(".zp-dataset-selected").removeClass("zp-dataset-selected");var o=n.parent().children().index(n),r=(0,c.default)("#input-fields-page-"+e.current_page);for(var a in i)i.hasOwnProperty(a)&&i[a].dataset&&r.find('[name="zetaprints-_'+a+'"]').val(i[a].dataset[o].text);d.default.instance().product_form.modified=!0,n.addClass("zp-dataset-selected")}});var n=(0,c.default)("#zp-dataset-button");n.on("click",function(){(new s.default).open({type:"inline",href:"#zp-dataset-page-"+e.current_page})}),(0,c.default)("#zp-dataset-page-"+e.current_page).length&&n.removeClass("hidden")}},{key:"zp_dataset_update_state",value:function(e,t,i){var n=(0,c.default)("#zp-dataset-table-page-"+e.current_page);n.find("tr.zp-dataset-selected").removeClass("zp-dataset-selected").find("input").prop("checked",!1).end().children().slice(1).addClass("zp-dataset-selected"),t="."+t.replace(/ /g,".")+".zp-dataset-selected",n.find(t).removeClass("zp-dataset-selected")}}]),e}();t.default=p},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(3),c=n(l),u=i(4),d=n(u),p=i(2),f=n(p),h=i(6),g=n(h),_=i(18),m=n(_),v=i(22),b=n(v),y=function(e){function t(e,i){o(this,t),f.default.assertInstanceOf(e,m.default),f.default.assertFunction(i,"get_share_name_callback");var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._get_share_name_callback=i,n._original_button=null,n._original_button_id=null,n.add=n.add.bind(n),n.remove=n.remove.bind(n),n._on_click=n._on_click.bind(n),n}return a(t,e),s(t,[{key:"add",value:function(e,t){var i=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._button)return!1;this._in_preview=t;var n=this._create_button();if(void 0===n.jquery)throw new TypeError("The return type of _create_button() must be jQuery element");return n.click(function(){i._on_click(e)}),!0}},{key:"remove",value:function(){this._button.remove(),this._button=null,this._original_button.attr("id",this._original_button_id)}},{key:"_create_button",value:function(){var e=this._original_button=d.default.instance().fancybox_close_button;e.addClass("resizer-tweaks");var t=e.clone();return t.css("display","inline").appendTo(this._get_outer()),this._original_button_id=e.attr("id"),e.attr("id","fancybox-close-orig"),t}},{key:"_on_click",value:function(e){c.default.debug("[CloseButton] Click"),e._shape_to_show=this._get_share_name_callback.call({},e),this._controller.get_preview_for_page_number(e.current_page).open_lightbox(),this.remove(),g.default.instance().notify(t.Events.CLICKED,{instance:this})}}]),t}(b.default);t.default=y,y.Events={CLICKED:"CloseButton.Events.CLICKED"}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(1),c=n(l),u=i(3),d=n(u),p=i(6),f=n(p),h=i(19),g=n(h),_=i(8),m=n(_),v=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._state=null,i}return a(t,e),s(t,[{key:"update",value:function(e){var i=void 0===e?t.STATE_UNDEFINED:e?t.STATE_DIRTY:t.STATE_CLEAN;this._state!==i&&(d.default.debug("[SaveImageButton] Update set "+(e?"":"not ")+"changed"),this._state=i,i===t.STATE_UNDEFINED?(this._button.addClass("disabled"),this._get_outer().removeClass("saved")):i===t.STATE_DIRTY?(this._get_outer().removeClass("saved"),this._button.removeClass("disabled")):(this._button.addClass("disabled"),this._get_outer().addClass("saved")))}},{key:"_create_button",value:function(e,t,i,n){var o=this._get_outer();if(0===o.length)throw new ReferenceError("Could not find fancybox-outer");return(0,c.default)('<a id="zp-save-image-button" class="no-middle disabled"><span class="icon left-part" /><span class="text"><span class="save-image-text">'+save_text+'</span><span class="saved-image-text">'+saved_text+"</span></span></a>").appendTo(o)}},{key:"_on_click",value:function(e){if(d.default.debug("[SaveImageButton] Click"),!this._button.hasClass("disabled")){var i=e.image_edit;i.save(),i.$input.prop("checked",!0).change(),this.update(!1),f.default.instance().notify(t.Events.CLICKED,{instance:this}),f.default.instance().notify(m.default.USER_DATA_SAVED,{instance:this})}}},{key:"_build_get_share_name_callback",value:function(e,t,i,n){return function(){return i}}}]),t}(g.default);t.default=v,v.STATE_CLEAN=1,v.STATE_DIRTY=2,v.STATE_UNDEFINED=3,v.Events={CLICKED:"SaveImageButton.Events.CLICKED"}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(1),c=n(l),u=i(4),d=n(u),p=i(19),f=n(p),h=i(23),g=n(h),_=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"_on_click",value:function(e){var t=this._get_outer();if(!t.hasClass("selected")){var i=this._get_image_inputs().prop("checked",!0).change();if(t.addClass("selected"),this._in_preview){var n=d.default.get_name_for_element(i);(0,c.default)("#zetaprints-preview-image-container").find(' > .zetaprints-field-shape[title="'+n+'"] > .top').click(),this._close_button.remove()}setTimeout(function(){g.default.close()},2e3)}}},{key:"_build_get_shape_name_callback",value:function(e,t,i,n){var o=this;return function(){return o._detect_share_name()}}},{key:"_create_button",value:function(e,t,i,n){if(d.default.instance().select_image_button.length)throw new Error("this must not happen");return(0,c.default)('<a id="zp-select-image-button" class="no-middle"><span class="icon left-part"><span class="icon tick" /></span><span class="text"><span class="use-image-text">'+use_image_button_text+'</span><span class="selected-image-text">'+selected_image_button_text+"</span></span></a>").appendTo(this._get_outer())}},{key:"update",value:function(){d.default.instance().fancybox_close_button.addClass("resizer-tweaks"),this._get_image_inputs().prop("checked")?this._get_outer().addClass("selected"):this._get_outer().removeClass("selected")}},{key:"_get_image_inputs",value:function(){return d.default.instance().select_image_elements.find(" > .selector-content > .tabs-wrapper > .images-scroller").find('a[href="'+d.default.instance().fancybox_image.attr("src")+'"]').parent().children("input")}},{key:"_detect_share_name",value:function(){return this._get_image_inputs().attr("name").substring(12)}}]),t}(f.default);t.default=_},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=i(1),u=n(c),d=i(4),p=n(d),f=i(3),h=n(f),g=i(19),_=n(g),m=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"_create_button",value:function(e,t,i,n){return(0,u.default)("#zp-update-preview-button").length?void h.default.error("[UpdatePreviewButton] Update preview button already exists"):(p.default.instance().fancybox_close_button.addClass("resizer-tweaks"),(0,u.default)('<a id="zp-update-preview-button"><span class="icon left-part"><span class="icon arrows" /></span><span class="title">'+update_preview_button_text+"</span></a>").appendTo(this._get_outer()))}},{key:"_on_click",value:function(e){var t=this._get_outer();if(!t.hasClass("modified"))return!1;t.find(p.default.instance().fancybox_image_selector).bind("load.update-preview",function(e){(0,u.default)(this).unbind("load.update-preview"),t.removeClass("preview-updating"),p.default.instance().fancybox_content.bind("mousemove.zp-show-shapes",function(e){(0,u.default)(this).unbind(e),t.removeClass("zp-hide-shapes")})}),t.addClass("preview-updating zp-hide-shapes"),this._controller.update_preview(e)}},{key:"update",value:function(){var e=p.default.instance().fancybox_resize;e.length?e.addClass("middle-position"):this.button.addClass("no-middle")}},{key:"remove",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this);var e=p.default.instance().fancybox;e.resize.removeClass("middle-position"),e.outer.removeClass("preview-updating zp-hide-shapes"),e.content.unbind("mousemove.zp-show-shapes"),e.image.unbind("load.update-preview")}}]),t}(_.default);t.default=m},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){function e(){n(this,e)}return o(e,[{key:"close_button",get:function(){return(0,a.default)("#fancybox-close, .fancybox-close")}},{key:"outer",get:function(){return(0,a.default)("#fancybox-outer, .fancybox-outer")}},{key:"content",get:function(){return(0,a.default)("#fancybox-content")}},{key:"wrap",get:function(){return(0,a.default)("#fancybox-wrap, .fancybox-wrap")}},{key:"resize",get:function(){return(0,a.default)("#fancybox-resize")}},{key:"overlay",get:function(){return(0,a.default)("#fancybox-overlay, .fancybox-overlay")}},{key:"image",get:function(){return(0,a.default)(this.image_selector)}},{key:"image_selector",get:function(){return"#fancybox-img, .fancybox-image"}}]),e}();t.default=s},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(4),s=n(a),l=i(3),c=n(l),u=function(){function t(){o(this,t)}return r(t,null,[{key:"disable_zoom",value:function(){c.default.debug("[ZoomHelper] Disable zoom");var t=s.default.instance().product_image_gallery;e(t).removeClass("product-image-zoom"),s.default.instance().original_product_image.remove(),e("#track_hint, div.zoom").remove(),e(".zoomContainer").remove(),e(".product-image-gallery .gallery-image").removeData("elevateZoom")}}]),t}();t.default=u}).call(t,i(0))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationCenter=t.GlobalEvents=t.ui_helper=t.environment=t.feature=t.$=t.ImageThumbnailService=t.ImageManipulationService=t.ImageEditingContext=t.PersonalizationForm=void 0;var o=i(14),r=n(o),a=i(7),s=n(a),l=i(4),c=n(l),u=i(10),d=n(u),p=i(11),f=n(p),h=i(15),g=n(h),_=i(17),m=n(_),v=i(8),b=n(v),y=i(6),w=n(y),k=i(1),x=n(k);i(36),i(0),i(38),i(12),i(37);var C=c.default.instance(),E=r.default.environment(),T=[s.default.feature.dataset,s.default.feature.textFieldEditor,s.default.feature.fancybox.saveImageButton,s.default.feature.fancybox.selectImage,s.default.feature.fancybox.updatePreview],z=new s.default(T);t.PersonalizationForm=d.default,t.ImageEditingContext=f.default,t.ImageManipulationService=g.default,t.ImageThumbnailService=m.default,t.$=x.default,t.feature=z,t.environment=E,t.ui_helper=C,t.GlobalEvents=b.default,t.NotificationCenter=w.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(59),l=n(s),c=i(9),u=n(c),d=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.selection={width:0,height:0,position:new l.default},i.image={width:0,height:0,position:new l.default},i._assign_properties(e),i}return a(t,e),t}(u.default);t.default=d},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(9),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i["cr-x1"]=void 0,i["cr-x2"]=void 0,i["cr-y1"]=void 0,i["cr-y2"]=void 0,i["abs-x1"]=void 0,i["abs-y1"]=void 0,i["abs-x2"]=void 0,i["abs-y2"]=void 0,i._assign_properties(e),i}return r(t,e),t}(s.default);t.default=l},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.top=t,this.left=i};t.default=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(9),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.context=void 0,i.source=void 0,i.preview_width=void 0,i.preview_height=void 0,i.width=void 0,i.height=void 0,i.undo_width=void 0,i.undo_height=void 0,i._assign_properties(e),i}return r(t,e),t}(s.default);t.default=l},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(9),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.name="",i.top=0,i.left=0,i.visual_width=0,i.visual_height=0,i.x1=0,i.y1=0,i.x2=0,i.y2=0,i.hidden=!1,i["has-value"]=!1,i["anchor-x"]=0,i["anchor-y"]=0,i._assign_properties(e),i}return r(t,e),t}(s.default);t.default=l},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(9),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.guid="",i.created="",i.comments="",i.url="",i.download=!1,i.missed_pages="",i.pdf=!0,i.jpeg=!1,i.png=!1,i.pages_number=0,i["corporate-guid"]="",i["product-reference"]="",i["dataset-integrity-enforce"]=!1,i.pages={},i._assign_properties(e),i}return r(t,e),t}(s.default);t.default=l},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){var t=void 0,i={destroy:function(){(t=this.data("power-crop-container"))&&(t.remove(),this.show())},state:function(){if(t=this.data("power-crop-container")){var e=t.find(".powercrop-viewport"),i=t.find(".powercrop-image");return{image:{width:i.width(),height:i.height(),position:i.parent().position()},selection:{width:e.width(),height:e.height(),position:e.position()}}}}};e.fn.power_crop=function(t){function o(e){e({image:{width:u.width(),height:u.height(),position:a},selection:{width:f.width(),height:f.height(),position:s}})}function r(){f.outerWidth()===p.width()&&f.outerHeight()===p.height()?f.addClass("no-moving-action"):f.removeClass("no-moving-action")}var a=null,s=null,l=void 0,c={simple:!1,data:null,crop:function(){},stop:function(){}};if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));"object"!==(void 0===t?"undefined":n(t))&&t?e.error("Method "+t+" does not exist on jQuery.power_crop"):e.extend(c,t);var u=this.clone().removeAttr("id").removeAttr("class"),d=(u.height(),u.width(),u.clone().addClass("powercrop-image-top")),p=u.addClass("powercrop-image").wrap('<div class="powercrop-container no-resizing-action" />').parent();c.simple&&p.addClass("simple"),this.hide().after(p).data("power-crop-container",p),c.simple?l=u:(u.resizable({aspectRatio:!0,handles:"ne, nw, se, sw",start:function(e,t){p.removeClass("no-resizing-action")},resize:function(e,t){h.css({width:t.size.width,height:t.size.height,top:t.position.top-s.top-1,left:t.position.left-s.left-1}),d.css({width:t.size.width,height:t.size.height}),a=l.position(),o(c.crop)},stop:function(e,t){a=l.position(),p.addClass("no-resizing-action");var i=Math.round(t.size.width),n=Math.round(t.size.height);h.css({width:i,height:n,top:a.top-s.top-1,left:a.left-s.left-1}),d.css({width:i,height:n}),u.css({width:i,height:n}),l.css({width:i,height:n}),o(c.stop)}}),l=u.parent().draggable({drag:function(e,t){h.css({top:t.position.top-s.top-1,left:t.position.left-s.left-1}),a=t.position,o(c.crop)},stop:function(e,t){a=t.position,o(c.stop)}}));var f=e('<div class="powercrop-viewport" />').appendTo(p);e('<div class="powercrop-viewport-inner" />').append(d).appendTo(f),f.append('<div class="powercrop-viewport-handle" title="Click and drag to move the frame" />'),f.resizable({aspectRatio:!c.simple,containment:!!c.simple&&p,handles:"ne, nw, se, sw",start:function(e,t){p.removeClass("no-resizing-action")},resize:function(e,t){t.position.left<0&&(t.position.left=0),t.position.top<0&&(t.position.top=0),h.css({top:a.top-t.position.top-1,left:a.left-t.position.left-1}),s=f.position(),o(c.crop)},stop:function(e,t){s=f.position(),p.addClass("no-resizing-action"),h.css({top:a.top-s.top-1,left:a.left-s.left-1}),c.simple&&r(),o(c.stop)}}).draggable({containment:!!c.simple&&p,handle:"div.powercrop-viewport-handle",drag:function(e,t){h.css({top:a.top-t.position.top-1,left:a.left-t.position.left-1}),s=t.position,o(c.crop)},stop:function(e,t){s=t.position,c.simple&&r(),o(c.stop)}});var h=void 0;return c.simple?h=d:(d.resizable({aspectRatio:!0,handles:"ne, nw, se, sw",resize:function(e,t){l.css({width:t.size.width,height:t.size.height,top:t.position.top+s.top+1,left:t.position.left+s.left+1}),u.css({width:t.size.width,height:t.size.height}),o(c.crop)},stop:function(e,t){var i=h.position(),n=Math.round(t.size.width),r=Math.round(t.size.height);l.css({width:n,height:r,top:i.top+s.top+1,left:i.left+s.left+1}),u.css({width:n,height:r}),d.css({width:n,height:r}),h.css({width:n,height:r}),o(c.stop)}}),h=d.parent().draggable({drag:function(e,t){l.css({top:s.top+t.position.top+1,left:s.left+t.position.left+1}),a=l.position(),o(c.crop)},stop:function(e,t){a=l.position(),o(c.stop)}})),function(e){l.css({width:e.image.width,height:e.image.height,top:e.image.position.top,left:e.image.position.left}),u.css({width:e.image.width,height:e.image.height}),a=e.image.position,f.css({width:e.selection.width,height:e.selection.height,top:e.selection.position.top,left:e.selection.position.left}),e.container?p.css({left:e.container.left,top:e.container.top,width:e.container.width+2,height:e.container.height+2}):c.simple&&p.css({width:f.outerWidth()>u.outerWidth()?f.outerWidth():u.outerWidth(),height:f.outerHeight()>u.outerHeight()?f.outerHeight():u.outerHeight()}),s=e.selection.position,h.css({width:e.image.width,height:e.image.height,top:a.top-s.top-1,left:a.left-s.left-1}),d.css({width:e.image.width,height:e.image.height})}(function(t){var i={image:{width:u.width(),height:u.height(),position:{top:0,left:0}},selection:{width:u.width(),height:u.height(),position:{top:0,left:0}}};return e.extend(!0,{},i,t)}(c.data)),c.simple&&r(),this}}},function(e,t,i){"use strict";(function(e){function t(e){return e&&e.__esModule?e:{default:e}}var n=i(3),o=t(n),r=i(1),a=t(r),s=a.default||e,l=function(e){var t=s(this),i=t.data("text-field-resizer");t.unbind(e),void 0===i.style?i.wrapper.removeAttr("style"):i.wrapper.attr("style",i.style)};s.fn.text_field_resizer=function(){return this.each(function(){var e=s(this),t=e.find(".input-text, textarea");"function"==typeof e.resizable?(e.resizable({handles:"TEXTAREA"===t.prop("tagName").toUpperCase()?"se, sw":"e, w",create:function(){e.on("mousedown",function(){t.focus()}),t.data("text-field-resizer",{style:e.attr("style"),wrapper:e})},start:function(){e.css("z-index",1e3),t.focus()},stop:function(){t.focus()}}),e.on("mouseenter",function(){t.unbind("blur",l)}).on("mouseleave",function(){t.bind("blur",l)})):o.default.error("$wrapper.resizable is not a function")})}}).call(t,i(0))},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t,i){n(this,e);var o=t.find(".zetaprints-field"),r=t.children(".color-sample"),a=o.val();a&&r.css("backgroundColor",a),t.find("span > a").click(function(){return o.colorpicker("open"),!1}),o.colorpicker({color:"804080",inline:!1,layout:{map:[0,0,1,5],bar:[1,0,1,5],preview:[2,0,1,1],rgb:[2,2,1,1],hex:[2,3,1,1],cmyk:[3,2,1,2]},parts:["switcher","header","map","bar","hex","rgb","cmyk","preview","footer"],part:{map:{size:128},bar:{size:128}},altField:r,showOn:"alt",title:" ",revert:!0,showCloseButton:!1,colorFormat:"#HEX",ok:function(e,t){o.val()&&(i.removeClass("no-value"),o.prop("disabled",!1).change().prop("checked",!0))}})};t.default=o},function(e,t,i){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function t(e){i(this,t),this.original_button=e}return n(t,[{key:"add",value:function(t){var i=this.original_button.attr("title"),n=t?window.notice_to_update_preview_text_for_multipage_template:window.notice_to_update_preview_text,o=e('<button id="zetaprints-fake-add-to-cart-button" class="button disabled" type="button" title="'+i+'"><span><span>'+i+'</span></span></button><span id="zetaprints-fake-add-to-cart-warning" class="zetaprints-notice to-update-preview">'+n+"</span>");this.original_button.addClass("no-display").after(o)}},{key:"remove",value:function(){e("#zetaprints-fake-add-to-cart-button, #zetaprints-fake-add-to-cart-warning").remove(),this.original_button.removeClass("no-display")}}]),t}();t.default=o}).call(t,i(0))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(3),c=n(l),u=i(1),d=n(u),p=i(7),f=n(p),h=i(13),g=n(h),_=i(2),m=n(_),v=i(23),b=n(v),y=i(6),w=n(y),k=function(e){function t(e,i){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return m.default.assertString(e),n.href=e,n.image_editor_controller=i,n}return a(t,e),s(t,[{key:"open",value:function(e,i,n){var o=this;c.default.debug("[ImageEditorLightbox] open");var r=w.default.instance(),a={instance:this,image_name:e,image_guid:i,$thumb:n},s=new g.default({padding:0,showTitle:!1,type:"ajax",href:this.href,showCloseButton:!0,closeOnOverlayClick:!1,willShow:function(){r.notify(t.Events.DID_SHOW,a)},didShow:function(){c.default.debug("[ImageEditorLightbox] Fancybox complete"),o.image_editor_controller.on_fancybox_complete(e,i,n),r.notify(t.Events.DID_SHOW,a)},willClose:function(){c.default.debug("[ImageEditorLightbox] Fancybox cleanup"),o.image_editor_controller.image_editor.close(),r.notify(t.Events.WILL_CLOSE,a)},didClose:function(){c.default.debug("[ImageEditorLightbox] Fancybox closed"),f.default.instance().call(f.default.feature.fancybox.saveImageButton,function(){o.image_editor_controller.save_image_button.remove()}),r.notify(t.Events.DID_CLOSE,a)}});d.default.fancybox(this._prepare_options(s))}}]),t}(b.default);t.default=k,k.Events={WILL_SHOW:"ImageEditorLightbox.Events.WILL_SHOW",DID_SHOW:"ImageEditorLightbox.Events.DID_SHOW",WILL_CLOSE:"ImageEditorLightbox.Events.WILL_CLOSE",DID_CLOSE:"ImageEditorLightbox.Events.DID_CLOSE"}},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(4),s=n(a),l=i(3),c=n(l),u=i(13),d=n(u),p=i(24),f=n(p),h=function(){function t(e,i,n,r){o(this,t),this.open_lightbox=this.open_lightbox.bind(this),this._page_number=i,this._controller=n,this._data=e,this._element=null,this._lightbox_callbacks=r,this._url=this._detect_url(i,e)}return r(t,[{key:"show",value:function(){var t=this,i=this,n=this._data,o=this._page_number,r=s.default.instance().product_image_gallery;this._element=e('<a id="preview-image-page-'+o+'" class="zetaprints-template-preview zp-hidden" href="'+this._url+'"><img title="'+click_to_view_in_large_size+'" src="'+this._url+'" alt="Preview image for page '+o+'" /></a>').appendTo(r),this._element.on("click",function(e){e.preventDefault(),t.open_lightbox()}),this._element.children().on("load",{page_number:o},function(){i._image_on_load(this,n)})}},{key:"update_url",value:function(e){var t=this._element;t||c.default.error("[Preview] DOM element does not exist"),t.attr("href",""+e),t.find("img").attr("src",""+e),this._url=""+e,f.default.redraw()}},{key:"open_lightbox",value:function(){var e=this._url,t="/"===e.substr(-1)?e.slice(0,-1):e,i=new d.default({opacity:!0,showOverlay:!1,transitionIn:"elastic",speedIn:500,speedOut:500,showTitle:!1,hideOnContentClick:!0,showNavArrows:!1,href:t});(new f.default).open(Object.assign({},i,this._lightbox_callbacks))}},{key:"_image_on_load",value:function(e,t){this._controller.image_on_load_callback(t,this._page_number,e,this)}},{key:"_detect_url",value:function(e,t){var i=t.template_details;if(1===e&&t.update_first_preview_on_load)return"";if(i.pages[e]["updated-preview-url"]){var n=i.pages[e]["updated-preview-url"];return this._controller.update_preview_sharing_link_for_page(t,e,n.split("/preview/")[1]),n}return""+i.pages[e]["preview-url"]}},{key:"element",get:function(){return this._element}}]),t}();t.default=h}).call(t,i(0))},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(3),s=n(a),l=i(4),c=n(l),u=function(){function t(i,n){o(this,t),this._element=e('<div id="zp-preview-overlay" class="zp-no-preview"><div class="zp-preview-overlay-spinner"><div /></div><div class="zp-preview-overlay-text-wrapper"><span class="zp-preview-overlay-text-left">&nbsp;</span><span class="zp-preview-overlay-text-middle">'+n+'&hellip;</span><span class="zp-preview-overlay-text-right">&nbsp;</span></div></div>').appendTo(i)}return r(t,[{key:"hide",value:function(){return s.default.log("[PreviewOverlay] Hide",this._element.get(0)),c.default.instance().hide(this._element),this}},{key:"show",value:function(){return s.default.log("[PreviewOverlay] Show",this._element.get(0)),c.default.instance().show(this._element),this}},{key:"remove_no_preview",value:function(){return this._element.removeClass("zp-no-preview"),this}}]),t}();t.default=u}).call(t,i(0))},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){n(this,e),this._element=t,this._modified=!1,this._user_data_changed=!1}return o(e,[{key:"append",value:function(e){return this._element.append(e),this}},{key:"modified",get:function(){return this._modified},set:function(e){this._modified!==!!e&&(this._modified=e,e?this._element.removeClass("zp-not-modified"):this._element.addClass("zp-not-modified"))}},{key:"user_data_changed",get:function(){return this._user_data_changed},set:function(e){this._user_data_changed!==!!e&&(this._user_data_changed=e,e?this._element.addClass("zp-user-data-changed"):this._element.removeClass("zp-user-data-changed"))}}]),e}();t.default=r},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(32),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"_get_title",value:function(){return"Rotate left"}},{key:"_get_text",value:function(){return"Rotate left"}},{key:"_get_class_name",value:function(){return"zp-rotate-button-left"}},{key:"_get_direction",value:function(){return"left"}}]),t}(l.default);t.default=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(32),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"_get_title",value:function(){return"Rotate right"}},{key:"_get_text",value:function(){return"Rotate right"}},{key:"_get_class_name",value:function(){return"zp-rotate-button-right"}},{key:"_get_direction",value:function(){return"right"}}]),t}(l.default);t.default=c},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),s=n(a),l=i(2),c=n(l),u=i(4),d=n(u),p=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),c.default.assertjQuery(t),c.default.assertObject(i);var n=this;this._on_handle_click=this._on_handle_click.bind(this),this._element=t;var r=this._settings=Object.assign({},e.default_settings,i);this._editor=(0,s.default)('<div class="zp-text-field-editor" />').prependTo(r.button_parent),this._handle=this._render_handle();var a=this._panel=this._render_panel(),l=(0,s.default)('<div class="zp-text-field-editor-row"><div class="zp-text-field-editor-icon color-picker" /></div>').appendTo(a),u=(0,s.default)('<div class="zp-text-field-editor-options" />').appendTo(l);(0,s.default)('<div class="zp-text-field-editor-clear" />').appendTo(l);var p="zp-text-field-editor-colorpicker-"+d.default.get_name_for_element(t);(0,s.default)('<div class="zp-text-field-editor-option"><div><input type="radio" name="'+p+'" value="default" checked="checked" /></div><div><span>Default</span></div></div>').appendTo(u);var f=(0,s.default)('<div class="zp-text-field-editor-icon pallet"><div class="zp-text-field-editor-color-example" /></div>'),h=f.children(),g=(0,s.default)('<input type="radio" name="'+p+'" value="" />');r.colour&&(h.css("backgroundColor",r.colour),g.val(r.colour)),(0,s.default)('<div class="zp-text-field-editor-option" />').append(g.wrap("<div />").parent()).append(f).appendTo(u),(0,s.default)("input",l).change(function(){var e=(0,s.default)(this).val();e?""+e=="default"?n._change("color",void 0):n._change("color",e):g.colorpicker("open")}),this._init_color_picker(g,h)}return r(e,[{key:"_init_color_picker",value:function(e,t){var i=this;this._color_picker_on=!1,e.colorpicker({color:"804080",inline:!1,layout:{map:[0,0,1,5],bar:[1,0,1,5],preview:[2,0,1,1],rgb:[2,2,1,1],hex:[2,3,1,1],cmyk:[3,2,1,2]},parts:["switcher","header","map","bar","hex","rgb","cmyk","preview","footer"],part:{map:{size:128},bar:{size:128}},altField:t,showOn:"alt",title:" ",revert:!0,showCloseButton:!1,colorFormat:"#HEX",open:function(){i._color_picker_on=!0},close:function(){i._color_picker_on=!1},ok:function(e,t){i._change("color",t.formatted)}})}},{key:"_change",value:function(e,t){this.state_changed=void 0!==t;var i={};i[""+e]=t,this._settings.change(i)}},{key:"_render_panel",value:function(){return(0,s.default)('<div class="zp-text-field-editor-panel"><div class="white-line" /></div>').appendTo(this._editor)}},{key:"_render_handle",value:function(){var e=(0,s.default)('<div class="zp-text-field-editor-handle"><div class="zp-text-field-editor-icon pen" /></div>').appendTo(this._editor);return e.click(this._on_handle_click),e}},{key:"_out_editor_click",value:function(e){if(!this._color_picker_on){var t=this._editor.get(0),i=(0,s.default)(e.target).parents("div.zp-text-field-editor").get(0);e.target!==t&&i!==t&&this._handle.click()}}},{key:"_on_handle_click",value:function(e){e.preventDefault();var t=this._handle;if((0,s.default)(document).unbind("click.text-field-editor"),this.is_opened)this.is_opened=!1;else{(0,s.default)("div.zp-text-field-editor").removeClass("opened");var i=t.offset(),n=t.position(),o=i.top===n.top&&i.left===n.left?i:n;this._panel.css({top:o.top+t.outerHeight()-1,left:o.left}),this.is_opened=!0,(0,s.default)(document).bind("click.text-field-editor",this._out_editor_click)}return!1}},{key:"state_changed",set:function(e){e!==this.is_opened&&(e?this._editor.addClass("state-changed"):this._editor.removeClass("state-changed"))}},{key:"is_opened",get:function(){return!!this._editor.hasClass("opened")},set:function(e){e!==this.is_opened&&(e?this._editor.addClass("opened"):this._editor.removeClass("opened"))}}]),e}();t.default=p,p.default_settings={button_parent:null,colour:"",change:function(e){}}},function(e,t){/*!
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
e.exports=function(e){"use strict";var t=e("html"),i=e(window),n=e(document),o=e.fancybox=function(){o.open.apply(this,arguments)},r=navigator.userAgent.match(/msie/i),a=null,s=void 0!==document.createTouch,l=function(t){return t&&t.hasOwnProperty&&t instanceof e},c=function(t){return t&&"string"===e.type(t)},u=function(e){return c(e)&&e.indexOf("%")>0},d=function(e){return e&&!(e.style.overflow&&"hidden"===e.style.overflow)&&(e.clientWidth&&e.scrollWidth>e.clientWidth||e.clientHeight&&e.scrollHeight>e.clientHeight)},p=function(e,t){var i=parseInt(e,10)||0;return t&&u(e)&&(i=o.getViewport()[t]/100*i),Math.ceil(i)},f=function(e,t){return p(e,t)+"px"};e.extend(o,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(r?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>',loading:'<div id="fancybox-loading"><div></div></div>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:e.noop,beforeLoad:e.noop,afterLoad:e.noop,beforeShow:e.noop,afterShow:e.noop,beforeChange:e.noop,beforeClose:e.noop,afterClose:e.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,i){if(t&&(e.isPlainObject(i)||(i={}),!1!==o.close(!0)))return e.isArray(t)||(t=l(t)?e(t).get():[t]),e.each(t,function(n,r){var a,s,u,d,p,f,h,g={};"object"===e.type(r)&&(r.nodeType&&(r=e(r)),l(r)?(g={href:r.data("fancybox-href")||r.attr("href"),title:e("<div/>").text(r.data("fancybox-title")||r.attr("title")||"").html(),isDom:!0,element:r},e.metadata&&e.extend(!0,g,r.metadata())):g=r),a=i.href||g.href||(c(r)?r:null),s=void 0!==i.title?i.title:g.title||"",u=i.content||g.content,d=u?"html":i.type||g.type,!d&&g.isDom&&((d=r.data("fancybox-type"))||(p=r.prop("class").match(/fancybox\.(\w+)/),d=p?p[1]:null)),c(a)&&(d||(o.isImage(a)?d="image":o.isSWF(a)?d="swf":"#"===a.charAt(0)?d="inline":c(r)&&(d="html",u=r)),"ajax"===d&&(f=a.split(/\s+/,2),a=f.shift(),h=f.shift())),u||("inline"===d?a?u=e(c(a)?a.replace(/.*(?=#[^\s]+$)/,""):a):g.isDom&&(u=r):"html"===d?u=a:d||a||!g.isDom||(d="inline",u=r)),e.extend(g,{href:a,type:d,content:u,title:s,selector:h}),t[n]=g}),o.opts=e.extend(!0,{},o.defaults,i),void 0!==i.keys&&(o.opts.keys=!!i.keys&&e.extend({},o.defaults.keys,i.keys)),o.group=t,o._start(o.opts.index)},cancel:function(){var e=o.coming;e&&!1===o.trigger("onCancel")||(o.hideLoading(),e&&(o.ajaxLoad&&o.ajaxLoad.abort(),o.ajaxLoad=null,o.imgPreload&&(o.imgPreload.onload=o.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),o.coming=null,o.current||o._afterZoomOut(e)))},close:function(t){o.cancel(),!1!==o.trigger("beforeClose")&&(o.unbindEvents(),o.isActive&&(o.isOpen&&!0!==t?(o.isOpen=o.isOpened=!1,o.isClosing=!0,e(".fancybox-item, .fancybox-nav").remove(),o.wrap.stop(!0,!0).removeClass("fancybox-opened"),o.transitions[o.current.closeMethod]()):(e(".fancybox-wrap").stop(!0).trigger("onReset").remove(),o._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(o.player.timer)},i=function(){t(),o.current&&o.player.isActive&&(o.player.timer=setTimeout(o.next,o.current.playSpeed))},r=function(){t(),n.unbind(".player"),o.player.isActive=!1,o.trigger("onPlayEnd")};!0===e||!o.player.isActive&&!1!==e?function(){o.current&&(o.current.loop||o.current.index<o.group.length-1)&&(o.player.isActive=!0,n.bind({"onCancel.player beforeClose.player":r,"onUpdate.player":i,"beforeLoad.player":t}),i(),o.trigger("onPlayStart"))}():r()},next:function(e){var t=o.current;t&&(c(e)||(e=t.direction.next),o.jumpto(t.index+1,e,"next"))},prev:function(e){var t=o.current;t&&(c(e)||(e=t.direction.prev),o.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,i){var n=o.current;n&&(e=p(e),o.direction=t||n.direction[e>=n.index?"next":"prev"],o.router=i||"jumpto",n.loop&&(e<0&&(e=n.group.length+e%n.group.length),e%=n.group.length),void 0!==n.group[e]&&(o.cancel(),o._start(e)))},reposition:function(t,i){var n,r=o.current,a=r?r.wrap:null;a&&(n=o._getPosition(i),t&&"scroll"===t.type?(delete n.position,a.stop(!0,!0).animate(n,200)):(a.css(n),r.pos=e.extend({},r.dim,n)))},update:function(e){var t=e&&e.originalEvent&&e.originalEvent.type,i=!t||"orientationchange"===t;i&&(clearTimeout(a),a=null),o.isOpen&&!a&&(a=setTimeout(function(){var n=o.current;n&&!o.isClosing&&(o.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&n.autoResize)&&o._setDimension(),"scroll"===t&&n.canShrink||o.reposition(e),o.trigger("onUpdate"),a=null)},i&&!s?0:300))},toggle:function(t){o.isOpen&&(o.current.fitToView="boolean"===e.type(t)?t:!o.current.fitToView,s&&(o.wrap.removeAttr("style").addClass("fancybox-tmp"),o.trigger("onUpdate")),o.update())},hideLoading:function(){n.unbind(".loading"),e("#fancybox-loading").remove()},showLoading:function(){var t,i;o.hideLoading(),t=e(o.opts.tpl.loading).click(o.cancel).appendTo("body"),n.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),o.cancel())}),o.defaults.fixed||(i=o.getViewport(),t.css({position:"absolute",top:.5*i.h+i.y,left:.5*i.w+i.x})),o.trigger("onLoading")},getViewport:function(){var e=o.current&&o.current.locked||!1,t={x:i.scrollLeft(),y:i.scrollTop()};return e&&e.length?(t.w=e[0].clientWidth,t.h=e[0].clientHeight):(t.w=s&&window.innerWidth?window.innerWidth:i.width(),t.h=s&&window.innerHeight?window.innerHeight:i.height()),t},unbindEvents:function(){o.wrap&&l(o.wrap)&&o.wrap.unbind(".fb"),n.unbind(".fb"),i.unbind(".fb")},bindEvents:function(){var t,r=o.current;r&&(i.bind("orientationchange.fb"+(s?"":" resize.fb")+(r.autoCenter&&!r.locked?" scroll.fb":""),o.update),t=r.keys,t&&n.bind("keydown.fb",function(i){var n=i.which||i.keyCode,a=i.target||i.srcElement;if(27===n&&o.coming)return!1;i.ctrlKey||i.altKey||i.shiftKey||i.metaKey||a&&(a.type||e(a).is("[contenteditable]"))||e.each(t,function(t,a){return r.group.length>1&&void 0!==a[n]?(o[t](a[n]),i.preventDefault(),!1):e.inArray(n,a)>-1?(o[t](),i.preventDefault(),!1):void 0})}),e.fn.mousewheel&&r.mouseWheel&&o.wrap.bind("mousewheel.fb",function(t,i,n,a){for(var s=t.target||null,l=e(s),c=!1;l.length&&!(c||l.is(".fancybox-skin")||l.is(".fancybox-wrap"));)c=d(l[0]),l=e(l).parent();0===i||c||o.group.length>1&&!r.canShrink&&(a>0||n>0?o.prev(a>0?"down":"left"):(a<0||n<0)&&o.next(a<0?"up":"right"),t.preventDefault())}))},trigger:function(t,i){var r,a=i||o.coming||o.current;if(a){if(e.isFunction(a[t])&&(r=a[t].apply(a,Array.prototype.slice.call(arguments,1))),!1===r)return!1;a.helpers&&e.each(a.helpers,function(i,n){n&&o.helpers[i]&&e.isFunction(o.helpers[i][t])&&o.helpers[i][t](e.extend(!0,{},o.helpers[i].defaults,n),a)})}n.trigger(t)},isImage:function(e){return c(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return c(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var i,n,r,a,l,c={};if(t=p(t),!(i=o.group[t]||null))return!1;if(c=e.extend(!0,{},o.opts,i),a=c.margin,l=c.padding,"number"===e.type(a)&&(c.margin=[a,a,a,a]),"number"===e.type(l)&&(c.padding=[l,l,l,l]),c.modal&&e.extend(!0,c,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),c.autoSize&&(c.autoWidth=c.autoHeight=!0),"auto"===c.width&&(c.autoWidth=!0),"auto"===c.height&&(c.autoHeight=!0),c.group=o.group,c.index=t,o.coming=c,!1===o.trigger("beforeLoad"))return void(o.coming=null);if(r=c.type,n=c.href,!r)return o.coming=null,!(!o.current||!o.router||"jumpto"===o.router)&&(o.current.index=t,o[o.router](o.direction));if(o.isActive=!0,"image"!==r&&"swf"!==r||(c.autoHeight=c.autoWidth=!1,c.scrolling="visible"),"image"===r&&(c.aspectRatio=!0),"iframe"===r&&s&&(c.scrolling="scroll"),c.wrap=e(c.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+r+" fancybox-tmp "+c.wrapCSS).appendTo(c.parent||"body"),e.extend(c,{skin:e(".fancybox-skin",c.wrap),outer:e(".fancybox-outer",c.wrap),inner:e(".fancybox-inner",c.wrap)}),e.each(["Top","Right","Bottom","Left"],function(e,t){c.skin.css("padding"+t,f(c.padding[e]))}),o.trigger("onReady"),"inline"===r||"html"===r){if(!c.content||!c.content.length)return o._error("content")}else if(!n)return o._error("href");"image"===r?o._loadImage():"ajax"===r?o._loadAjax():"iframe"===r?o._loadIframe():o._afterLoad()},_error:function(t){e.extend(o.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:o.coming.tpl.error}),o._afterLoad()},_loadImage:function(){var e=o.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,o.coming.width=this.width/o.opts.pixelRatio,o.coming.height=this.height/o.opts.pixelRatio,o._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,o._error("image")},e.src=o.coming.href,!0!==e.complete&&o.showLoading()},_loadAjax:function(){var t=o.coming;o.showLoading(),o.ajaxLoad=e.ajax(e.extend({},t.ajax,{url:t.href,error:function(e,t){o.coming&&"abort"!==t?o._error("ajax",e):o.hideLoading()},success:function(e,i){"success"===i&&(t.content=e,o._afterLoad())}}))},_loadIframe:function(){var t=o.coming,i=e(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":t.iframe.scrolling).attr("src",t.href);e(t.wrap).bind("onReset",function(){try{e(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),t.iframe.preload&&(o.showLoading(),i.one("load",function(){e(this).data("ready",1),s||e(this).bind("load.fb",o.update),e(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),o._afterLoad()})),t.content=i.appendTo(t.inner),t.iframe.preload||o._afterLoad()},_preloadImages:function(){var e,t,i=o.group,n=o.current,r=i.length,a=n.preload?Math.min(n.preload,r-1):0;for(t=1;t<=a;t+=1)e=i[(n.index+t)%r],"image"===e.type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var t,i,n,r,a,s,c=o.coming,u=o.current,d="fancybox-placeholder";if(o.hideLoading(),c&&!1!==o.isActive){if(!1===o.trigger("afterLoad",c,u))return c.wrap.stop(!0).trigger("onReset").remove(),void(o.coming=null);switch(u&&(o.trigger("beforeChange",u),u.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),o.unbindEvents(),t=c,i=c.content,n=c.type,r=c.scrolling,e.extend(o,{wrap:t.wrap,skin:t.skin,outer:t.outer,inner:t.inner,current:t,previous:u}),a=t.href,n){case"inline":case"ajax":case"html":t.selector?i=e("<div>").html(i).find(t.selector):l(i)&&(i.data(d)||i.data(d,e('<div class="'+d+'"></div>').insertAfter(i).hide()),i=i.show().detach(),t.wrap.bind("onReset",function(){e(this).find(i).length&&i.hide().replaceAll(i.data(d)).data(d,!1)}));break;case"image":i=t.tpl.image.replace(/\{href\}/g,a);break;case"swf":i='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+a+'"></param>',s="",e.each(t.swf,function(e,t){i+='<param name="'+e+'" value="'+t+'"></param>',s+=" "+e+'="'+t+'"'}),i+='<embed src="'+a+'" type="application/x-shockwave-flash" width="100%" height="100%"'+s+"></embed></object>"}l(i)&&i.parent().is(t.inner)||t.inner.append(i),o.trigger("beforeShow"),t.inner.css("overflow","yes"===r?"scroll":"no"===r?"hidden":r),o._setDimension(),o.reposition(),o.isOpen=!1,o.coming=null,o.bindEvents(),o.isOpened?u.prevMethod&&o.transitions[u.prevMethod]():e(".fancybox-wrap").not(t.wrap).stop(!0).trigger("onReset").remove(),o.transitions[o.isOpened?t.nextMethod:t.openMethod](),o._preloadImages()}},_setDimension:function(){var t,i,n,r,a,s,l,c,d,h,g,_,m,v,b,y=o.getViewport(),w=0,k=!1,x=!1,C=o.wrap,E=o.skin,T=o.inner,z=o.current,O=z.width,P=z.height,j=z.minWidth,S=z.minHeight,A=z.maxWidth,D=z.maxHeight,M=z.scrolling,I=z.scrollOutside?z.scrollbarWidth:0,N=z.margin,R=p(N[1]+N[3]),H=p(N[0]+N[2]);if(C.add(E).add(T).width("auto").height("auto").removeClass("fancybox-tmp"),t=p(E.outerWidth(!0)-E.width()),i=p(E.outerHeight(!0)-E.height()),n=R+t,r=H+i,a=u(O)?(y.w-n)*p(O)/100:O,s=u(P)?(y.h-r)*p(P)/100:P,"iframe"===z.type){if(v=z.content,z.autoHeight&&1===v.data("ready"))try{v[0].contentWindow.document.location&&(T.width(a).height(9999),b=v.contents().find("body"),I&&b.css("overflow-x","hidden"),s=b.outerHeight(!0))}catch(e){}}else(z.autoWidth||z.autoHeight)&&(T.addClass("fancybox-tmp"),z.autoWidth||T.width(a),z.autoHeight||T.height(s),z.autoWidth&&(a=T.width()),z.autoHeight&&(s=T.height()),T.removeClass("fancybox-tmp"));if(O=p(a),P=p(s),d=a/s,j=p(u(j)?p(j,"w")-n:j),A=p(u(A)?p(A,"w")-n:A),S=p(u(S)?p(S,"h")-r:S),D=p(u(D)?p(D,"h")-r:D),l=A,c=D,z.fitToView&&(A=Math.min(y.w-n,A),D=Math.min(y.h-r,D)),_=y.w-R,m=y.h-H,z.aspectRatio?(O>A&&(O=A,P=p(O/d)),P>D&&(P=D,O=p(P*d)),O<j&&(O=j,P=p(O/d)),P<S&&(P=S,O=p(P*d))):(O=Math.max(j,Math.min(O,A)),z.autoHeight&&"iframe"!==z.type&&(T.width(O),P=T.height()),P=Math.max(S,Math.min(P,D))),z.fitToView)if(T.width(O).height(P),C.width(O+t),h=C.width(),g=C.height(),z.aspectRatio)for(;(h>_||g>m)&&O>j&&P>S&&!(w++>19);)P=Math.max(S,Math.min(D,P-10)),O=p(P*d),O<j&&(O=j,P=p(O/d)),O>A&&(O=A,P=p(O/d)),T.width(O).height(P),C.width(O+t),h=C.width(),g=C.height();else O=Math.max(j,Math.min(O,O-(h-_))),P=Math.max(S,Math.min(P,P-(g-m)));I&&"auto"===M&&P<s&&O+t+I<_&&(O+=I),T.width(O).height(P),C.width(O+t),h=C.width(),g=C.height(),k=(h>_||g>m)&&O>j&&P>S,x=z.aspectRatio?O<l&&P<c&&O<a&&P<s:(O<l||P<c)&&(O<a||P<s),e.extend(z,{dim:{width:f(h),height:f(g)},origWidth:a,origHeight:s,canShrink:k,canExpand:x,wPadding:t,hPadding:i,wrapSpace:g-E.outerHeight(!0),skinSpace:E.height()-P}),!v&&z.autoHeight&&P>S&&P<D&&!x&&T.height("auto")},_getPosition:function(e){var t=o.current,i=o.getViewport(),n=t.margin,r=o.wrap.width()+n[1]+n[3],a=o.wrap.height()+n[0]+n[2],s={position:"absolute",top:n[0],left:n[3]};return t.autoCenter&&t.fixed&&!e&&a<=i.h&&r<=i.w?s.position="fixed":t.locked||(s.top+=i.y,s.left+=i.x),s.top=f(Math.max(s.top,s.top+(i.h-a)*t.topRatio)),s.left=f(Math.max(s.left,s.left+(i.w-r)*t.leftRatio)),s},_afterZoomIn:function(){var t=o.current;t&&(o.isOpen=o.isOpened=!0,o.wrap.css("overflow","visible").addClass("fancybox-opened").hide().show(0),o.update(),(t.closeClick||t.nextClick&&o.group.length>1)&&o.inner.css("cursor","pointer").bind("click.fb",function(i){e(i.target).is("a")||e(i.target).parent().is("a")||(i.preventDefault(),o[t.closeClick?"close":"next"]())}),t.closeBtn&&e(t.tpl.closeBtn).appendTo(o.skin).bind("click.fb",function(e){e.preventDefault(),o.close()}),t.arrows&&o.group.length>1&&((t.loop||t.index>0)&&e(t.tpl.prev).appendTo(o.outer).bind("click.fb",o.prev),(t.loop||t.index<o.group.length-1)&&e(t.tpl.next).appendTo(o.outer).bind("click.fb",o.next)),o.trigger("afterShow"),t.loop||t.index!==t.group.length-1?o.opts.autoPlay&&!o.player.isActive&&(o.opts.autoPlay=!1,o.play(!0)):o.play(!1))},_afterZoomOut:function(t){t=t||o.current,e(".fancybox-wrap").trigger("onReset").remove(),e.extend(o,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),o.trigger("afterClose",t)}}),o.transitions={getOrigPosition:function(){var e=o.current,t=e.element,i=e.orig,n={},r=50,a=50,s=e.hPadding,c=e.wPadding,u=o.getViewport();return!i&&e.isDom&&t.is(":visible")&&(i=t.find("img:first"),i.length||(i=t)),l(i)?(n=i.offset(),i.is("img")&&(r=i.outerWidth(),a=i.outerHeight())):(n.top=u.y+(u.h-a)*e.topRatio,n.left=u.x+(u.w-r)*e.leftRatio),("fixed"===o.wrap.css("position")||e.locked)&&(n.top-=u.y,n.left-=u.x),n={top:f(n.top-s*e.topRatio),left:f(n.left-c*e.leftRatio),width:f(r+c),height:f(a+s)}},step:function(e,t){var i,n,r,a=t.prop,s=o.current,l=s.wrapSpace,c=s.skinSpace;"width"!==a&&"height"!==a||(i=t.end===t.start?1:(e-t.start)/(t.end-t.start),o.isClosing&&(i=1-i),n="width"===a?s.wPadding:s.hPadding,r=e-n,o.skin[a](p("width"===a?r:r-l*i)),o.inner[a](p("width"===a?r:r-l*i-c*i)))},zoomIn:function(){var t=o.current,i=t.pos,n=t.openEffect,r="elastic"===n,a=e.extend({opacity:1},i);delete a.position,r?(i=this.getOrigPosition(),t.openOpacity&&(i.opacity=.1)):"fade"===n&&(i.opacity=.1),o.wrap.css(i).animate(a,{duration:"none"===n?0:t.openSpeed,easing:t.openEasing,step:r?this.step:null,complete:o._afterZoomIn})},zoomOut:function(){var e=o.current,t=e.closeEffect,i="elastic"===t,n={opacity:.1};i&&(n=this.getOrigPosition(),e.closeOpacity&&(n.opacity=.1)),o.wrap.animate(n,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:i?this.step:null,complete:o._afterZoomOut})},changeIn:function(){var e,t=o.current,i=t.nextEffect,n=t.pos,r={opacity:1},a=o.direction;n.opacity=.1,"elastic"===i&&(e="down"===a||"up"===a?"top":"left","down"===a||"right"===a?(n[e]=f(p(n[e])-200),r[e]="+=200px"):(n[e]=f(p(n[e])+200),r[e]="-=200px")),"none"===i?o._afterZoomIn():o.wrap.css(n).animate(r,{duration:t.nextSpeed,easing:t.nextEasing,complete:o._afterZoomIn})},changeOut:function(){var t=o.previous,i=t.prevEffect,n={opacity:.1},r=o.direction;"elastic"===i&&(n["down"===r||"up"===r?"top":"left"]=("up"===r||"left"===r?"-":"+")+"=200px"),t.wrap.animate(n,{duration:"none"===i?0:t.prevSpeed,easing:t.prevEasing,complete:function(){e(this).trigger("onReset").remove()}})}},o.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:e("html"),create:function(t){var i;t=e.extend({},this.defaults,t),this.overlay&&this.close(),i=o.coming?o.coming.parent:t.parent,this.overlay=e('<div class="fancybox-overlay"></div>').appendTo(i&&i.length?i:"body"),this.fixed=!1,t.fixed&&o.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(t){var n=this;t=e.extend({},this.defaults,t),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(t),this.fixed||(i.bind("resize.overlay",e.proxy(this.update,this)),this.update()),t.closeClick&&this.overlay.bind("click.overlay",function(t){if(e(t.target).hasClass("fancybox-overlay"))return o.isActive?o.close():n.close(),!1}),this.overlay.css(t.css).show()},close:function(){i.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(e(".fancybox-margin").removeClass("fancybox-margin"),this.el.removeClass("fancybox-lock"),i.scrollTop(this.scrollV).scrollLeft(this.scrollH)),e(".fancybox-overlay").remove().hide(),e.extend(this,{overlay:null,fixed:!1})},update:function(){var e,t="100%";this.overlay.width(t).height("100%"),r?(e=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),n.width()>e&&(t=n.width())):n.width()>i.width()&&(t=n.width()),this.overlay.width(t).height(n.height())},onReady:function(t,i){var n=this.overlay;e(".fancybox-overlay").stop(!0,!0),n||this.create(t),t.locked&&this.fixed&&i.fixed&&(i.locked=this.overlay.append(i.wrap),i.fixed=!1),!0===t.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(t,n){n.locked&&!this.el.hasClass("fancybox-lock")&&(!1!==this.fixPosition&&e("*").filter(function(){return"fixed"===e(this).css("position")&&!e(this).hasClass("fancybox-overlay")&&!e(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin"),this.scrollV=i.scrollTop(),this.scrollH=i.scrollLeft(),this.el.addClass("fancybox-lock"),i.scrollTop(this.scrollV).scrollLeft(this.scrollH)),this.open(t)},onUpdate:function(){this.fixed||this.update()},afterClose:function(t){this.overlay&&!o.coming&&this.overlay.fadeOut(t.speedOut,e.proxy(this.close,this))}},o.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var i,n,a=o.current,s=a.title,l=t.type;if(e.isFunction(s)&&(s=s.call(a.element,a)),c(s)&&""!==e.trim(s)){switch(i=e('<div class="fancybox-title fancybox-title-'+l+'-wrap">'+s+"</div>"),l){case"inside":n=o.skin;break;case"outside":n=o.wrap;break;case"over":n=o.inner;break;default:n=o.skin,i.appendTo("body"),r&&i.width(i.width()),i.wrapInner('<span class="child"></span>'),o.current.margin[2]+=Math.abs(p(i.css("margin-bottom")))}i["top"===t.position?"prependTo":"appendTo"](n)}}},e.fn.fancybox=function(t){var i,r=e(this),a=this.selector||"",s=function(n){var s,l,c=e(this).blur(),u=i;n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||c.is(".fancybox-wrap")||(s=t.groupAttr||"data-fancybox-group",l=c.attr(s),l||(s="rel",l=c.get(0)[s]),l&&""!==l&&"nofollow"!==l&&(c=a.length?e(a):r,c=c.filter("["+s+'="'+l+'"]'),u=c.index(this)),t.index=u,!1!==o.open(c,t)&&n.preventDefault())};return t=t||{},i=t.index||0,a&&!1!==t.live?n.undelegate(a,"click.fb-start").delegate(a+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s):r.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-fancybox-start=1]").trigger("click"),this},n.ready(function(){var i,n;void 0===e.scrollbarWidth&&(e.scrollbarWidth=function(){var t=e('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),i=t.children(),n=i.innerWidth()-i.height(99).innerWidth();return t.remove(),n}),void 0===e.support.fixedPosition&&(e.support.fixedPosition=function(){var t=e('<div style="position:fixed;top:20px;"></div>').appendTo("body"),i=20===t[0].offsetTop||15===t[0].offsetTop;return t.remove(),i}()),e.extend(o.defaults,{scrollbarWidth:e.scrollbarWidth(),fixed:e.support.fixedPosition,parent:e("body")}),i=e(window).width(),t.addClass("fancybox-lock-test"),n=e(window).width(),t.removeClass("fancybox-lock-test"),e("<style type='text/css'>.fancybox-margin{margin-right:"+(n-i)+"px;}</style>").appendTo("head")})}},function(e,t,i){var n,o;!function(r){n=[i(0)],void 0!==(o=function(e){return r(e,window)}.apply(t,n))&&(e.exports=o)}(function(e,t){"use strict";function i(e,t){for(var i=/^(\d+)\.(\d+)\.(\d+)/,n=i.exec(e)||[],o=i.exec(t)||[],r=1;r<=3;r++){if(+n[r]>+o[r])return 1;if(+n[r]<+o[r])return-1}return 0}function n(t){return i(e.fn.jquery,t)>=0}function o(i){var n=t.console;s[i]||(s[i]=!0,e.migrateWarnings.push(i),n&&n.warn&&!e.migrateMute&&(n.warn("JQMIGRATE: "+i),e.migrateTrace&&n.trace&&n.trace()))}function r(e,t,i,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return o(n),i},set:function(e){o(n),i=e}})}function a(e,t,i,n){e[t]=function(){return o(n),i.apply(this,arguments)}}e.migrateVersion="3.1.0",function(){t.console&&t.console.log&&(e&&n("3.0.0")||t.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),e.migrateWarnings&&t.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),t.console.log("JQMIGRATE: Migrate is installed"+(e.migrateMute?"":" with logging active")+", version "+e.migrateVersion))}();var s={};e.migrateWarnings=[],void 0===e.migrateTrace&&(e.migrateTrace=!0),e.migrateReset=function(){s={},e.migrateWarnings.length=0},"BackCompat"===t.document.compatMode&&o("jQuery is not compatible with Quirks Mode");var l=e.fn.init,c=e.isNumeric,u=e.find,d=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,p=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;e.fn.init=function(e){var t=Array.prototype.slice.call(arguments);return"string"==typeof e&&"#"===e&&(o("jQuery( '#' ) is not a valid selector"),t[0]=[]),l.apply(this,t)},e.fn.init.prototype=e.fn,e.find=function(e){var i=Array.prototype.slice.call(arguments);if("string"==typeof e&&d.test(e))try{t.document.querySelector(e)}catch(n){e=e.replace(p,function(e,t,i,n){return"["+t+i+'"'+n+'"]'});try{t.document.querySelector(e),o("Attribute selector with '#' must be quoted: "+i[0]),i[0]=e}catch(e){o("Attribute selector with '#' was not fixed: "+i[0])}}return u.apply(this,i)};var f;for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e.find[f]=u[f]);e.fn.size=function(){return o("jQuery.fn.size() is deprecated and removed; use the .length property"),this.length},e.parseJSON=function(){return o("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)},e.isNumeric=function(t){var i=c(t),n=function(t){var i=t&&t.toString();return!e.isArray(t)&&i-parseFloat(i)+1>=0}(t);return i!==n&&o("jQuery.isNumeric() should not be called on constructed objects"),n},n("3.3.0")&&a(e,"isWindow",function(e){return null!=e&&e===e.window},"jQuery.isWindow() is deprecated"),a(e,"holdReady",e.holdReady,"jQuery.holdReady is deprecated"),a(e,"unique",e.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),r(e.expr,"filters",e.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),r(e.expr,":",e.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),n("3.2.0")&&a(e,"nodeName",e.nodeName,"jQuery.nodeName is deprecated");var h=e.ajax;e.ajax=function(){var e=h.apply(this,arguments);return e.promise&&(a(e,"success",e.done,"jQXHR.success is deprecated and removed"),a(e,"error",e.fail,"jQXHR.error is deprecated and removed"),a(e,"complete",e.always,"jQXHR.complete is deprecated and removed")),e};var g=e.fn.removeAttr,_=e.fn.toggleClass,m=/\S+/g;e.fn.removeAttr=function(t){var i=this;return e.each(t.match(m),function(t,n){e.expr.match.bool.test(n)&&(o("jQuery.fn.removeAttr no longer sets boolean properties: "+n),i.prop(n,!1))}),g.apply(this,arguments)},e.fn.toggleClass=function(t){return void 0!==t&&"boolean"!=typeof t?_.apply(this,arguments):(o("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var i=this.getAttribute&&this.getAttribute("class")||"";i&&e.data(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===t?"":e.data(this,"__className__")||"")}))};var v=!1;e.swap&&e.each(["height","width","reliableMarginRight"],function(t,i){var n=e.cssHooks[i]&&e.cssHooks[i].get;n&&(e.cssHooks[i].get=function(){var e;return v=!0,e=n.apply(this,arguments),v=!1,e})}),e.swap=function(e,t,i,n){var r,a,s={};v||o("jQuery.swap() is undocumented and deprecated");for(a in t)s[a]=e.style[a],e.style[a]=t[a];r=i.apply(e,n||[]);for(a in t)e.style[a]=s[a];return r};var b=e.data;e.data=function(t,i,n){var r;if(i&&"object"==typeof i&&2===arguments.length){r=e.hasData(t)&&b.call(this,t);var a={};for(var s in i)s!==e.camelCase(s)?(o("jQuery.data() always sets/gets camelCased names: "+s),r[s]=i[s]):a[s]=i[s];return b.call(this,t,a),i}return i&&"string"==typeof i&&i!==e.camelCase(i)&&(r=e.hasData(t)&&b.call(this,t))&&i in r?(o("jQuery.data() always sets/gets camelCased names: "+i),arguments.length>2&&(r[i]=n),r[i]):b.apply(this,arguments)};var y=e.Tween.prototype.run,w=function(e){return e};e.Tween.prototype.run=function(){e.easing[this.easing].length>1&&(o("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),e.easing[this.easing]=w),y.apply(this,arguments)};var k=e.fx.interval||13;t.requestAnimationFrame&&Object.defineProperty(e.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return t.document.hidden||o("jQuery.fx.interval is deprecated"),k},set:function(e){o("jQuery.fx.interval is deprecated"),k=e}});var x=e.fn.load,C=e.event.add,E=e.event.fix;e.event.props=[],e.event.fixHooks={},r(e.event.props,"concat",e.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),e.event.fix=function(t){var i,n=t.type,r=this.fixHooks[n],a=e.event.props;if(a.length)for(o("jQuery.event.props are deprecated and removed: "+a.join());a.length;)e.event.addProp(a.pop());if(r&&!r._migrated_&&(r._migrated_=!0,o("jQuery.event.fixHooks are deprecated and removed: "+n),(a=r.props)&&a.length))for(;a.length;)e.event.addProp(a.pop());return i=E.call(this,t),r&&r.filter?r.filter(i,t):i},e.event.add=function(e,i){return e===t&&"load"===i&&"complete"===t.document.readyState&&o("jQuery(window).on('load'...) called after load event occurred"),C.apply(this,arguments)},e.each(["load","unload","error"],function(t,i){e.fn[i]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof e[0]?x.apply(this,e):(o("jQuery.fn."+i+"() is deprecated"),e.splice(0,0,i),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))}}),e.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,i){e.fn[i]=function(e,t){return o("jQuery.fn."+i+"() event shorthand is deprecated"),arguments.length>0?this.on(i,null,e,t):this.trigger(i)}}),e(function(){e(t.document).triggerHandler("ready")}),e.event.special.ready={setup:function(){this===t.document&&o("'ready' event is deprecated")}},e.fn.extend({bind:function(e,t,i){return o("jQuery.fn.bind() is deprecated"),this.on(e,null,t,i)},unbind:function(e,t){return o("jQuery.fn.unbind() is deprecated"),this.off(e,null,t)},delegate:function(e,t,i,n){return o("jQuery.fn.delegate() is deprecated"),this.on(t,e,i,n)},undelegate:function(e,t,i){return o("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return o("jQuery.fn.hover() is deprecated"),this.on("mouseenter",e).on("mouseleave",t||e)}});var T=e.fn.offset;e.fn.offset=function(){var i,n=this[0],r={top:0,left:0};return n&&n.nodeType?(i=(n.ownerDocument||t.document).documentElement,e.contains(i,n)?T.apply(this,arguments):(o("jQuery.fn.offset() requires an element connected to a document"),r)):(o("jQuery.fn.offset() requires a valid DOM element"),r)};var z=e.param;e.param=function(t,i){var n=e.ajaxSettings&&e.ajaxSettings.traditional;return void 0===i&&n&&(o("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),i=n),z.call(this,t,i)};var O=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return o("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),O.apply(this,arguments)};var P=e.Deferred,j=[["resolve","done",e.Callbacks("once memory"),e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory"),e.Callbacks("memory")]];return e.Deferred=function(t){var i=P(),n=i.promise();return i.pipe=n.pipe=function(){var t=arguments;return o("deferred.pipe() is deprecated"),e.Deferred(function(o){e.each(j,function(r,a){var s=e.isFunction(t[r])&&t[r];i[a[1]](function(){var t=s&&s.apply(this,arguments);t&&e.isFunction(t.promise)?t.promise().done(o.resolve).fail(o.reject).progress(o.notify):o[a[0]+"With"](this===n?o.promise():this,s?[t]:arguments)})}),t=null}).promise()},t&&t.call(i,i),i},e.Deferred.exceptionHook=P.exceptionHook,e})},function(e,t,i){var n,o,r;/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])}})})},function(e,t,i){var n,o,r;/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})},function(e,t,i){var n,o,r;!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}()})},function(e,t,i){var n,o,r;!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},function(e,t,i){var n,o,r;/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})},function(e,t,i){var n,o,r;!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}})},function(e,t,i){var n,o,r;/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return(!n||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:e(this[0].ownerDocument||document)}})},function(e,t,i){var n,o,r;/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(5)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}})})},function(e,t,i){var n,o,r;/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(35),i(76),i(33),i(34),i(81),i(82),i(5),i(12)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging"))return void(this.destroyOnClear=!0);this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(i).length||e.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",t)&&i._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),o=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=e(o.containment),void((n=i[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,o,r,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),a.grid&&(o=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-a.grid[1]:o+a.grid[1]:o,r=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-a.grid[0]:r+a.grid[0]:r),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))})},drag:function(t,i,n){e.each(n.sortables,function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",t),n.dropped=r.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(t),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var o=e("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,i,n){var o=n.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,i,n){var o=n.options;o._opacity&&e(i.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var o=n.options,r=!1,a=n.scrollParentNotHidden[0],s=n.document[0];a!==s&&"HTML"!==a.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+a.offsetHeight-t.pageY<o.scrollSensitivity?a.scrollTop=r=a.scrollTop+o.scrollSpeed:t.pageY-n.overflowOffset.top<o.scrollSensitivity&&(a.scrollTop=r=a.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+a.offsetWidth-t.pageX<o.scrollSensitivity?a.scrollLeft=r=a.scrollLeft+o.scrollSpeed:t.pageX-n.overflowOffset.left<o.scrollSensitivity&&(a.scrollLeft=r=a.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(s).scrollTop()<o.scrollSensitivity?r=e(s).scrollTop(e(s).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<o.scrollSensitivity&&(r=e(s).scrollTop(e(s).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(s).scrollLeft()<o.scrollSensitivity?r=e(s).scrollLeft(e(s).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<o.scrollSensitivity&&(r=e(s).scrollLeft(e(s).scrollLeft()+o.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var o=n.options;n.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var o,r,a,s,l,c,u,d,p,f,h=n.options,g=h.snapTolerance,_=i.offset.left,m=_+n.helperProportions.width,v=i.offset.top,b=v+n.helperProportions.height;for(p=n.snapElements.length-1;p>=0;p--)l=n.snapElements[p].left-n.margins.left,c=l+n.snapElements[p].width,u=n.snapElements[p].top-n.margins.top,d=u+n.snapElements[p].height,m<l-g||_>c+g||b<u-g||v>d+g||!e.contains(n.snapElements[p].item.ownerDocument,n.snapElements[p].item)?(n.snapElements[p].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=!1):("inner"!==h.snapMode&&(o=Math.abs(u-b)<=g,r=Math.abs(d-v)<=g,a=Math.abs(l-m)<=g,s=Math.abs(c-_)<=g,o&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),f=o||r||a||s,"outer"!==h.snapMode&&(o=Math.abs(u-v)<=g,r=Math.abs(d-b)<=g,a=Math.abs(l-_)<=g,s=Math.abs(c-m)<=g,o&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[p].snapping&&(o||r||a||s||f)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=o||r||a||s||f)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var o,r=n.options,a=e.makeArray(e(r.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});a.length&&(o=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,i,n){var o=n.options;o._zIndex&&e(i.helper).css("zIndex",o._zIndex)}}),e.ui.draggable})},function(e,t,i){var n,o,r;/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(35),i(77),i(33),i(5),i(12)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0||(t[n]=1,o=t[n]>0,t[n]=0,o)},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),i.autoHide&&e(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,i,n,o,r,a=this.options,s=this;if(this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)t=e.trim(n[i]),o="ui-resizable-"+t,r=e("<div>"),this._addClass(r,"ui-resizable-handle "+o),r.css({zIndex:a.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(r);this._renderAxis=function(t){var i,n,o,r;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=r&&r[1]?r[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var i,n,o,r=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(i+=e(r.containment).scrollLeft()||0,n+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n,o=this.originalMousePosition,r=this.axis,a=t.pageX-o.left||0,s=t.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[t,a,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,o,r,a,s,l,c=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,r=n?0:u.sizeDiff.width,a={width:u.helper.width()-r,height:u.helper.height()-o},s=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(a,{top:l,left:s})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,o,r,a=this.options;r={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&c&&(e.left=s-t.minWidth),n&&c&&(e.left=s-t.maxWidth),a&&u&&(e.top=l-t.minHeight),o&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(o[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),a=r&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,s=r?0:i.sizeDiff.width,l={width:i.size.width-s,height:i.size.height-a},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,u=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,o,r,a,s,l=e(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,p=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=e(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,a=l._hasScroll(p,"left")?p.scrollWidth:r,s=l._hasScroll(p)?p.scrollHeight:o,l.parentData={element:p,left:n.left,top:n.top,width:a,height:s}))},resize:function(t){var i,n,o,r,a=e(this).resizable("instance"),s=a.options,l=a.containerOffset,c=a.position,u=a._aspectRatio||t.shiftKey,d={top:0,left:0},p=a.containerElement,f=!0;p[0]!==document&&/static/.test(p.css("position"))&&(d=l),c.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),u&&(a.size.height=a.size.width/a.aspectRatio,f=!1),a.position.left=s.helper?l.left:0),c.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),u&&(a.size.width=a.size.height*a.aspectRatio,f=!1),a.position.top=a._helper?l.top:0),o=a.containerElement.get(0)===a.element.parent().get(0),r=/relative|absolute/.test(a.containerElement.css("position")),o&&r?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-d.left:a.offset.left-l.left)),n=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-d.top:a.offset.top-l.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,u&&(a.size.height=a.size.width/a.aspectRatio,f=!1)),n+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-n,u&&(a.size.width=a.size.height*a.aspectRatio,f=!1)),f||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,o=t.containerPosition,r=t.containerElement,a=e(t.helper),s=a.offset(),l=a.outerWidth()-t.sizeDiff.width,c=a.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(r.css("position"))&&e(this).css({left:s.left-o.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(r.css("position"))&&e(this).css({left:s.left-o.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var n=e(this).resizable("instance"),o=n.options,r=n.originalSize,a=n.originalPosition,s={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-a.top||0,left:n.position.left-a.left||0};e(o.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),o={},r=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(n[t]||0)+(s[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,o=i.size,r=i.originalSize,a=i.originalPosition,s=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,u=l[1]||1,d=Math.round((o.width-r.width)/c)*c,p=Math.round((o.height-r.height)/u)*u,f=r.width+d,h=r.height+p,g=n.maxWidth&&n.maxWidth<f,_=n.maxHeight&&n.maxHeight<h,m=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>h;n.grid=l,m&&(f+=c),v&&(h+=u),g&&(f-=c),_&&(h-=u),/^(se|s|e)$/.test(s)?(i.size.width=f,i.size.height=h):/^(ne)$/.test(s)?(i.size.width=f,i.size.height=h,i.position.top=a.top-p):/^(sw)$/.test(s)?(i.size.width=f,i.size.height=h,i.position.left=a.left-d):((h-u<=0||f-c<=0)&&(t=i._getPaddingPlusBorderDimensions(this)),h-u>0?(i.size.height=h,i.position.top=a.top-p):(h=u-t.height,i.size.height=h,i.position.top=a.top+r.height-h),f-c>0?(i.size.width=f,i.position.left=a.left-d):(f=c-t.width,i.size.width=f,i.position.left=a.left+r.width-f))}}),e.ui.resizable})},function(e,t,i){var n,o,r;/*!
 * jQuery UI Tabs 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){o=[i(0),i(78),i(80),i(34),i(83),i(5),i(12)],n=a,void 0!==(r="function"==typeof n?n.apply(t,o):n)&&(e.exports=r)}(function(e){return e.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,n;i=t.href.replace(e,""),n=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}return t.hash.length>1&&i===n}}(),_create:function(){var t=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,o){if(e(o).attr("aria-controls")===n)return t=i,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!i&&0),!i&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(e.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(i),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){for(var n=this.tabs.length-1;-1!==e.inArray(function(){return t>n&&(t=0),t<0&&(t=n),t}(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){if("active"===e)return void this._activate(t);this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,n=this.anchors,o=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each(function(i,n){var o,r,a,s=e(n).uniqueId().attr("id"),l=e(n).closest("li"),c=l.attr("aria-controls");t._isLocal(n)?(o=n.hash,a=o.substring(1),r=t.element.find(t._sanitizeSelector(o))):(a=l.attr("aria-controls")||e({}).uniqueId()[0].id,o="#"+a,r=t.element.find(o),r.length||(r=t._createPanel(a),r.insertAfter(t.panels[i-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":a,"aria-labelledby":s}),r.attr("aria-labelledby",s)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(o.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var i,n,o;for(e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),o=0;n=this.tabs[o];o++)i=e(n),!0===t||-1!==e.inArray(o,t)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),r=o.closest("li"),a=r[0]===n[0],s=a&&i.collapsible,l=s?e():this._getPanelForTab(r),c=n.length?this._getPanelForTab(n):e(),u={oldTab:n,oldPanel:c,newTab:s?e():r,newPanel:l};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||!1===this._trigger("beforeActivate",t,u)||(i.active=!s&&this.tabs.index(r),this.active=a?e():r,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),t),this._toggle(t,u))},_toggle:function(t,i){function n(){r.running=!1,r._trigger("activate",t,i)}function o(){r._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),a.length&&r.options.show?r._show(a,r.options.show,n):(a.show(),n())}var r=this,a=i.newPanel,s=i.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){r._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o()}):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s.hide(),o()),s.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&s.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;!1!==i&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setOptionDisabled(i))},disable:function(t){var i=this.options.disabled;if(!0!==i){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setOptionDisabled(i)}},load:function(t,i){t=this._getIndex(t);var n=this,o=this.tabs.eq(t),r=o.find(".ui-tabs-anchor"),a=this._getPanelForTab(o),s={tab:o,panel:a},l=function(e,t){"abort"===t&&n.panels.stop(!1,!0),n._removeClass(o,"ui-tabs-loading"),a.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr};this._isLocal(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(o,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(e,t,o){setTimeout(function(){a.html(e),n._trigger("load",i,s),l(o,t)},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})))},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,r){return o._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:r},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),e.ui.tabs})}]);
//# sourceMappingURL=webtoprint.js.map